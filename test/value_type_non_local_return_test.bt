// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// BT-754: Non-local return (^) inside block arguments in Object subclass methods.

// @load tests/e2e/fixtures/nlr_return_test.bt
// @load tests/e2e/fixtures/nlr_foo.bt
// @load tests/e2e/fixtures/nlr_bar.bt
// @load tests/e2e/fixtures/nlr_baz.bt
// @load tests/e2e/fixtures/nlr_skipper.bt
// @load tests/e2e/fixtures/nlr_doubler.bt
// @load tests/e2e/fixtures/nlr_on_do.bt

TestCase subclass: ValueTypeNonLocalReturnTest

  testSection1 =>
    self assert: (NlrReturnTest new test: #()) equals: "empty".
    self assert: (NlrReturnTest new test: #(1)) equals: "not empty".
    self assert: (NlrFoo new classify: 5) equals: "positive".
    self assert: (NlrFoo new classify: -1) equals: "non-positive".
    self assert: (NlrFoo new classify: 0) equals: "non-positive".
    self assert: (NlrBar new check: #()) equals: "empty".
    self assert: (NlrBar new check: #(1)) equals: "not empty".
    self assert: (NlrBaz new double: 5) equals: 10.
    self assert: (NlrSkipper new test: #()) equals: "early".
    self assert: (NlrSkipper new test: #(1, 2, 3)) equals: "middle".
    self assert: (NlrDoubler new test: 5) equals: 10.
    self assert: (NlrDoubler new test: -1) equals: 0.
    self assert: (NlrOnDo new test: #()) equals: "early".
    self assert: (NlrOnDo new test: #(1)) equals: "not early"
