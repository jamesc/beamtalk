---
source: test-package-compiler/tests/compiler_tests.rs
expression: output
---
AST:
Module {
    classes: [],
    method_definitions: [],
    expressions: [
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Copyright 2026 James Casey",
                        span: Span {
                            start: 188,
                            end: 192,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "SPDX-License-Identifier: Apache-2.0",
                        span: Span {
                            start: 188,
                            end: 192,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Test error recovery: unterminated string",
                        span: Span {
                            start: 188,
                            end: 192,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Lexer should recover and continue",
                        span: Span {
                            start: 188,
                            end: 192,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Unterminated double quote string",
                        span: Span {
                            start: 188,
                            end: 192,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "str1",
                        span: Span {
                            start: 188,
                            end: 192,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: MessageSend {
                        receiver: Literal(
                            String(
                                "unterminated string\n\n// Code after error should still parse\nx := 42\n\n// Another unterminated string\nstr2 := ",
                            ),
                            Span {
                                start: 196,
                                end: 306,
                            },
                        ),
                        selector: Unary(
                            "another",
                        ),
                        arguments: [],
                        is_cast: false,
                        span: Span {
                            start: 196,
                            end: 313,
                        },
                    },
                    selector: Unary(
                        "unclosed",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 196,
                        end: 322,
                    },
                },
                span: Span {
                    start: 188,
                    end: 322,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "More code",
                        span: Span {
                            start: 337,
                            end: 338,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "y",
                        span: Span {
                            start: 337,
                            end: 338,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "x",
                            span: Span {
                                start: 342,
                                end: 343,
                            },
                        },
                    ),
                    selector: Binary(
                        "+",
                    ),
                    arguments: [
                        Literal(
                            Integer(
                                1,
                            ),
                            Span {
                                start: 346,
                                end: 347,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 342,
                        end: 347,
                    },
                },
                span: Span {
                    start: 337,
                    end: 347,
                },
            },
            preceding_blank_line: true,
        },
    ],
    span: Span {
        start: 188,
        end: 347,
    },
    file_leading_comments: [],
    file_trailing_comments: [],
}
