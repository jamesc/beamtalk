---
source: test-package-compiler/tests/compiler_tests.rs
expression: output
---
AST:
Module {
    classes: [],
    expressions: [
        Assignment {
            target: Identifier(
                Identifier {
                    name: "greeting",
                    span: Span {
                        start: 116,
                        end: 124,
                    },
                },
            ),
            value: Literal(
                String(
                    "Hello",
                ),
                Span {
                    start: 128,
                    end: 135,
                },
            ),
            span: Span {
                start: 116,
                end: 135,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "name",
                    span: Span {
                        start: 136,
                        end: 140,
                    },
                },
            ),
            value: Literal(
                String(
                    "World",
                ),
                Span {
                    start: 144,
                    end: 151,
                },
            ),
            span: Span {
                start: 136,
                end: 151,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "message",
                    span: Span {
                        start: 170,
                        end: 177,
                    },
                },
            ),
            value: MessageSend {
                receiver: MessageSend {
                    receiver: MessageSend {
                        receiver: Identifier(
                            Identifier {
                                name: "greeting",
                                span: Span {
                                    start: 181,
                                    end: 189,
                                },
                            },
                        ),
                        selector: Binary(
                            "++",
                        ),
                        arguments: [
                            Literal(
                                String(
                                    ", ",
                                ),
                                Span {
                                    start: 193,
                                    end: 197,
                                },
                            ),
                        ],
                        span: Span {
                            start: 181,
                            end: 197,
                        },
                    },
                    selector: Binary(
                        "++",
                    ),
                    arguments: [
                        Identifier(
                            Identifier {
                                name: "name",
                                span: Span {
                                    start: 201,
                                    end: 205,
                                },
                            },
                        ),
                    ],
                    span: Span {
                        start: 181,
                        end: 205,
                    },
                },
                selector: Binary(
                    "++",
                ),
                arguments: [
                    Literal(
                        String(
                            "!",
                        ),
                        Span {
                            start: 209,
                            end: 212,
                        },
                    ),
                ],
                span: Span {
                    start: 181,
                    end: 212,
                },
            },
            span: Span {
                start: 170,
                end: 212,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "len",
                    span: Span {
                        start: 231,
                        end: 234,
                    },
                },
            ),
            value: MessageSend {
                receiver: Identifier(
                    Identifier {
                        name: "greeting",
                        span: Span {
                            start: 238,
                            end: 246,
                        },
                    },
                ),
                selector: Unary(
                    "length",
                ),
                arguments: [],
                span: Span {
                    start: 238,
                    end: 253,
                },
            },
            span: Span {
                start: 231,
                end: 253,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "isEqual",
                    span: Span {
                        start: 276,
                        end: 283,
                    },
                },
            ),
            value: Literal(
                String(
                    "hello",
                ),
                Span {
                    start: 287,
                    end: 294,
                },
            ),
            span: Span {
                start: 276,
                end: 294,
            },
        },
        Error {
            message: "Unexpected token: expected expression, found =",
            span: Span {
                start: 295,
                end: 296,
            },
        },
    ],
    span: Span {
        start: 116,
        end: 580,
    },
    leading_comments: [
        Comment {
            content: "// Copyright 2026 James Casey",
            span: Span {
                start: 116,
                end: 124,
            },
            kind: Line,
        },
        Comment {
            content: "// SPDX-License-Identifier: Apache-2.0",
            span: Span {
                start: 116,
                end: 124,
            },
            kind: Line,
        },
        Comment {
            content: "// Test string operations",
            span: Span {
                start: 116,
                end: 124,
            },
            kind: Line,
        },
        Comment {
            content: "// String literals",
            span: Span {
                start: 116,
                end: 124,
            },
            kind: Line,
        },
    ],
}

Diagnostics:
Diagnostic { severity: Error, message: "Unexpected token: expected expression, found =", span: Span { start: 295, end: 296 }, hint: None }
