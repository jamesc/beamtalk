---
source: test-package-compiler/tests/compiler_tests.rs
assertion_line: 70
expression: output
---
AST:
Module {
    classes: [],
    method_definitions: [],
    expressions: [
        Assignment {
            target: Identifier(
                Identifier {
                    name: "greeting",
                    span: Span {
                        start: 116,
                        end: 124,
                    },
                },
            ),
            value: Literal(
                String(
                    "Hello",
                ),
                Span {
                    start: 128,
                    end: 135,
                },
            ),
            span: Span {
                start: 116,
                end: 135,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "name",
                    span: Span {
                        start: 136,
                        end: 140,
                    },
                },
            ),
            value: Literal(
                String(
                    "World",
                ),
                Span {
                    start: 144,
                    end: 151,
                },
            ),
            span: Span {
                start: 136,
                end: 151,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "message",
                    span: Span {
                        start: 170,
                        end: 177,
                    },
                },
            ),
            value: MessageSend {
                receiver: MessageSend {
                    receiver: MessageSend {
                        receiver: Identifier(
                            Identifier {
                                name: "greeting",
                                span: Span {
                                    start: 181,
                                    end: 189,
                                },
                            },
                        ),
                        selector: Binary(
                            "++",
                        ),
                        arguments: [
                            Literal(
                                String(
                                    ", ",
                                ),
                                Span {
                                    start: 193,
                                    end: 197,
                                },
                            ),
                        ],
                        is_cast: false,
                        span: Span {
                            start: 181,
                            end: 197,
                        },
                    },
                    selector: Binary(
                        "++",
                    ),
                    arguments: [
                        Identifier(
                            Identifier {
                                name: "name",
                                span: Span {
                                    start: 201,
                                    end: 205,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 181,
                        end: 205,
                    },
                },
                selector: Binary(
                    "++",
                ),
                arguments: [
                    Literal(
                        String(
                            "!",
                        ),
                        Span {
                            start: 209,
                            end: 212,
                        },
                    ),
                ],
                is_cast: false,
                span: Span {
                    start: 181,
                    end: 212,
                },
            },
            span: Span {
                start: 170,
                end: 212,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "len",
                    span: Span {
                        start: 231,
                        end: 234,
                    },
                },
            ),
            value: MessageSend {
                receiver: Identifier(
                    Identifier {
                        name: "greeting",
                        span: Span {
                            start: 238,
                            end: 246,
                        },
                    },
                ),
                selector: Unary(
                    "length",
                ),
                arguments: [],
                is_cast: false,
                span: Span {
                    start: 238,
                    end: 253,
                },
            },
            span: Span {
                start: 231,
                end: 253,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "isEqual",
                    span: Span {
                        start: 276,
                        end: 283,
                    },
                },
            ),
            value: MessageSend {
                receiver: Literal(
                    String(
                        "hello",
                    ),
                    Span {
                        start: 287,
                        end: 294,
                    },
                ),
                selector: Binary(
                    "=:=",
                ),
                arguments: [
                    Literal(
                        String(
                            "hello",
                        ),
                        Span {
                            start: 299,
                            end: 306,
                        },
                    ),
                ],
                is_cast: false,
                span: Span {
                    start: 287,
                    end: 306,
                },
            },
            span: Span {
                start: 276,
                end: 306,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "isLess",
                    span: Span {
                        start: 307,
                        end: 313,
                    },
                },
            ),
            value: MessageSend {
                receiver: Literal(
                    String(
                        "apple",
                    ),
                    Span {
                        start: 317,
                        end: 324,
                    },
                ),
                selector: Binary(
                    "<",
                ),
                arguments: [
                    Literal(
                        String(
                            "banana",
                        ),
                        Span {
                            start: 327,
                            end: 335,
                        },
                    ),
                ],
                is_cast: false,
                span: Span {
                    start: 317,
                    end: 335,
                },
            },
            span: Span {
                start: 307,
                end: 335,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "upper",
                    span: Span {
                        start: 362,
                        end: 367,
                    },
                },
            ),
            value: MessageSend {
                receiver: Identifier(
                    Identifier {
                        name: "greeting",
                        span: Span {
                            start: 371,
                            end: 379,
                        },
                    },
                ),
                selector: Unary(
                    "uppercase",
                ),
                arguments: [],
                is_cast: false,
                span: Span {
                    start: 371,
                    end: 389,
                },
            },
            span: Span {
                start: 362,
                end: 389,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "lower",
                    span: Span {
                        start: 390,
                        end: 395,
                    },
                },
            ),
            value: MessageSend {
                receiver: Identifier(
                    Identifier {
                        name: "upper",
                        span: Span {
                            start: 399,
                            end: 404,
                        },
                    },
                ),
                selector: Unary(
                    "lowercase",
                ),
                arguments: [],
                is_cast: false,
                span: Span {
                    start: 399,
                    end: 414,
                },
            },
            span: Span {
                start: 390,
                end: 414,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "isEmpty",
                    span: Span {
                        start: 434,
                        end: 441,
                    },
                },
            ),
            value: MessageSend {
                receiver: Literal(
                    String(
                        "",
                    ),
                    Span {
                        start: 445,
                        end: 447,
                    },
                ),
                selector: Unary(
                    "isEmpty",
                ),
                arguments: [],
                is_cast: false,
                span: Span {
                    start: 445,
                    end: 455,
                },
            },
            span: Span {
                start: 434,
                end: 455,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "hasContent",
                    span: Span {
                        start: 456,
                        end: 466,
                    },
                },
            ),
            value: MessageSend {
                receiver: Identifier(
                    Identifier {
                        name: "message",
                        span: Span {
                            start: 470,
                            end: 477,
                        },
                    },
                ),
                selector: Unary(
                    "isNotEmpty",
                ),
                arguments: [],
                is_cast: false,
                span: Span {
                    start: 470,
                    end: 488,
                },
            },
            span: Span {
                start: 456,
                end: 488,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "found",
                    span: Span {
                        start: 510,
                        end: 515,
                    },
                },
            ),
            value: MessageSend {
                receiver: Identifier(
                    Identifier {
                        name: "message",
                        span: Span {
                            start: 519,
                            end: 526,
                        },
                    },
                ),
                selector: Keyword(
                    [
                        KeywordPart {
                            keyword: "includesSubstring:",
                            span: Span {
                                start: 527,
                                end: 545,
                            },
                        },
                    ],
                ),
                arguments: [
                    Literal(
                        String(
                            "World",
                        ),
                        Span {
                            start: 546,
                            end: 553,
                        },
                    ),
                ],
                is_cast: false,
                span: Span {
                    start: 519,
                    end: 553,
                },
            },
            span: Span {
                start: 510,
                end: 553,
            },
        },
        Assignment {
            target: Identifier(
                Identifier {
                    name: "starts",
                    span: Span {
                        start: 554,
                        end: 560,
                    },
                },
            ),
            value: MessageSend {
                receiver: Identifier(
                    Identifier {
                        name: "message",
                        span: Span {
                            start: 564,
                            end: 571,
                        },
                    },
                ),
                selector: Keyword(
                    [
                        KeywordPart {
                            keyword: "startsWith:",
                            span: Span {
                                start: 572,
                                end: 583,
                            },
                        },
                    ],
                ),
                arguments: [
                    Literal(
                        String(
                            "Hello",
                        ),
                        Span {
                            start: 584,
                            end: 591,
                        },
                    ),
                ],
                is_cast: false,
                span: Span {
                    start: 564,
                    end: 591,
                },
            },
            span: Span {
                start: 554,
                end: 591,
            },
        },
    ],
    span: Span {
        start: 116,
        end: 591,
    },
    leading_comments: [
        Comment {
            content: "// Copyright 2026 James Casey",
            span: Span {
                start: 116,
                end: 124,
            },
            kind: Line,
        },
        Comment {
            content: "// SPDX-License-Identifier: Apache-2.0",
            span: Span {
                start: 116,
                end: 124,
            },
            kind: Line,
        },
        Comment {
            content: "// Test string operations",
            span: Span {
                start: 116,
                end: 124,
            },
            kind: Line,
        },
        Comment {
            content: "// String literals",
            span: Span {
                start: 116,
                end: 124,
            },
            kind: Line,
        },
    ],
}
