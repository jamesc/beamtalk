---
source: test-package-compiler/tests/compiler_tests.rs
expression: output
---
AST:
Module {
    classes: [],
    method_definitions: [],
    expressions: [
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Copyright 2026 James Casey",
                        span: Span {
                            start: 125,
                            end: 129,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "SPDX-License-Identifier: Apache-2.0",
                        span: Span {
                            start: 125,
                            end: 129,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Simple whileTrue test with local variable mutation",
                        span: Span {
                            start: 125,
                            end: 129,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "test",
                        span: Span {
                            start: 125,
                            end: 129,
                        },
                    },
                ),
                value: Block(
                    Block {
                        parameters: [],
                        body: [
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Assignment {
                                    target: Identifier(
                                        Identifier {
                                            name: "count",
                                            span: Span {
                                                start: 139,
                                                end: 144,
                                            },
                                        },
                                    ),
                                    value: Literal(
                                        Integer(
                                            0,
                                        ),
                                        Span {
                                            start: 148,
                                            end: 149,
                                        },
                                    ),
                                    span: Span {
                                        start: 139,
                                        end: 149,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: MessageSend {
                                    receiver: Block(
                                        Block {
                                            parameters: [],
                                            body: [
                                                ExpressionStatement {
                                                    comments: CommentAttachment {
                                                        leading: [],
                                                        trailing: None,
                                                    },
                                                    expression: MessageSend {
                                                        receiver: Identifier(
                                                            Identifier {
                                                                name: "count",
                                                                span: Span {
                                                                    start: 156,
                                                                    end: 161,
                                                                },
                                                            },
                                                        ),
                                                        selector: Binary(
                                                            "<",
                                                        ),
                                                        arguments: [
                                                            Literal(
                                                                Integer(
                                                                    3,
                                                                ),
                                                                Span {
                                                                    start: 164,
                                                                    end: 165,
                                                                },
                                                            ),
                                                        ],
                                                        is_cast: false,
                                                        span: Span {
                                                            start: 156,
                                                            end: 165,
                                                        },
                                                    },
                                                    preceding_blank_line: false,
                                                },
                                            ],
                                            span: Span {
                                                start: 155,
                                                end: 166,
                                            },
                                        },
                                    ),
                                    selector: Keyword(
                                        [
                                            KeywordPart {
                                                keyword: "whileTrue:",
                                                span: Span {
                                                    start: 167,
                                                    end: 177,
                                                },
                                            },
                                        ],
                                    ),
                                    arguments: [
                                        Block(
                                            Block {
                                                parameters: [],
                                                body: [
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: Assignment {
                                                            target: Identifier(
                                                                Identifier {
                                                                    name: "count",
                                                                    span: Span {
                                                                        start: 179,
                                                                        end: 184,
                                                                    },
                                                                },
                                                            ),
                                                            value: MessageSend {
                                                                receiver: Identifier(
                                                                    Identifier {
                                                                        name: "count",
                                                                        span: Span {
                                                                            start: 188,
                                                                            end: 193,
                                                                        },
                                                                    },
                                                                ),
                                                                selector: Binary(
                                                                    "+",
                                                                ),
                                                                arguments: [
                                                                    Literal(
                                                                        Integer(
                                                                            1,
                                                                        ),
                                                                        Span {
                                                                            start: 196,
                                                                            end: 197,
                                                                        },
                                                                    ),
                                                                ],
                                                                is_cast: false,
                                                                span: Span {
                                                                    start: 188,
                                                                    end: 197,
                                                                },
                                                            },
                                                            span: Span {
                                                                start: 179,
                                                                end: 197,
                                                            },
                                                        },
                                                        preceding_blank_line: false,
                                                    },
                                                ],
                                                span: Span {
                                                    start: 178,
                                                    end: 198,
                                                },
                                            },
                                        ),
                                    ],
                                    is_cast: false,
                                    span: Span {
                                        start: 155,
                                        end: 198,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Return {
                                    value: Identifier(
                                        Identifier {
                                            name: "count",
                                            span: Span {
                                                start: 205,
                                                end: 210,
                                            },
                                        },
                                    ),
                                    span: Span {
                                        start: 204,
                                        end: 210,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                        ],
                        span: Span {
                            start: 133,
                            end: 212,
                        },
                    },
                ),
                span: Span {
                    start: 125,
                    end: 212,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test without module-level field",
                        span: Span {
                            start: 250,
                            end: 259,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "testLocal",
                        span: Span {
                            start: 250,
                            end: 259,
                        },
                    },
                ),
                value: Block(
                    Block {
                        parameters: [],
                        body: [
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Assignment {
                                    target: Identifier(
                                        Identifier {
                                            name: "x",
                                            span: Span {
                                                start: 269,
                                                end: 270,
                                            },
                                        },
                                    ),
                                    value: Literal(
                                        Integer(
                                            0,
                                        ),
                                        Span {
                                            start: 274,
                                            end: 275,
                                        },
                                    ),
                                    span: Span {
                                        start: 269,
                                        end: 275,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: MessageSend {
                                    receiver: Block(
                                        Block {
                                            parameters: [],
                                            body: [
                                                ExpressionStatement {
                                                    comments: CommentAttachment {
                                                        leading: [],
                                                        trailing: None,
                                                    },
                                                    expression: MessageSend {
                                                        receiver: Identifier(
                                                            Identifier {
                                                                name: "x",
                                                                span: Span {
                                                                    start: 282,
                                                                    end: 283,
                                                                },
                                                            },
                                                        ),
                                                        selector: Binary(
                                                            "<",
                                                        ),
                                                        arguments: [
                                                            Literal(
                                                                Integer(
                                                                    5,
                                                                ),
                                                                Span {
                                                                    start: 286,
                                                                    end: 287,
                                                                },
                                                            ),
                                                        ],
                                                        is_cast: false,
                                                        span: Span {
                                                            start: 282,
                                                            end: 287,
                                                        },
                                                    },
                                                    preceding_blank_line: false,
                                                },
                                            ],
                                            span: Span {
                                                start: 281,
                                                end: 288,
                                            },
                                        },
                                    ),
                                    selector: Keyword(
                                        [
                                            KeywordPart {
                                                keyword: "whileTrue:",
                                                span: Span {
                                                    start: 289,
                                                    end: 299,
                                                },
                                            },
                                        ],
                                    ),
                                    arguments: [
                                        Block(
                                            Block {
                                                parameters: [],
                                                body: [
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: Assignment {
                                                            target: Identifier(
                                                                Identifier {
                                                                    name: "x",
                                                                    span: Span {
                                                                        start: 301,
                                                                        end: 302,
                                                                    },
                                                                },
                                                            ),
                                                            value: MessageSend {
                                                                receiver: Identifier(
                                                                    Identifier {
                                                                        name: "x",
                                                                        span: Span {
                                                                            start: 306,
                                                                            end: 307,
                                                                        },
                                                                    },
                                                                ),
                                                                selector: Binary(
                                                                    "+",
                                                                ),
                                                                arguments: [
                                                                    Literal(
                                                                        Integer(
                                                                            1,
                                                                        ),
                                                                        Span {
                                                                            start: 310,
                                                                            end: 311,
                                                                        },
                                                                    ),
                                                                ],
                                                                is_cast: false,
                                                                span: Span {
                                                                    start: 306,
                                                                    end: 311,
                                                                },
                                                            },
                                                            span: Span {
                                                                start: 301,
                                                                end: 311,
                                                            },
                                                        },
                                                        preceding_blank_line: false,
                                                    },
                                                ],
                                                span: Span {
                                                    start: 300,
                                                    end: 312,
                                                },
                                            },
                                        ),
                                    ],
                                    is_cast: false,
                                    span: Span {
                                        start: 281,
                                        end: 312,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Return {
                                    value: Identifier(
                                        Identifier {
                                            name: "x",
                                            span: Span {
                                                start: 319,
                                                end: 320,
                                            },
                                        },
                                    ),
                                    span: Span {
                                        start: 318,
                                        end: 320,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                        ],
                        span: Span {
                            start: 263,
                            end: 322,
                        },
                    },
                ),
                span: Span {
                    start: 250,
                    end: 322,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test mutating a block parameter (BT-142 PR review fix)",
                        span: Span {
                            start: 383,
                            end: 397,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "testBlockParam",
                        span: Span {
                            start: 383,
                            end: 397,
                        },
                    },
                ),
                value: Block(
                    Block {
                        parameters: [],
                        body: [
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Assignment {
                                    target: Identifier(
                                        Identifier {
                                            name: "result",
                                            span: Span {
                                                start: 407,
                                                end: 413,
                                            },
                                        },
                                    ),
                                    value: MessageSend {
                                        receiver: Block(
                                            Block {
                                                parameters: [
                                                    BlockParameter {
                                                        name: "x",
                                                        span: Span {
                                                            start: 419,
                                                            end: 420,
                                                        },
                                                    },
                                                ],
                                                body: [
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: MessageSend {
                                                            receiver: Block(
                                                                Block {
                                                                    parameters: [],
                                                                    body: [
                                                                        ExpressionStatement {
                                                                            comments: CommentAttachment {
                                                                                leading: [],
                                                                                trailing: None,
                                                                            },
                                                                            expression: MessageSend {
                                                                                receiver: Identifier(
                                                                                    Identifier {
                                                                                        name: "x",
                                                                                        span: Span {
                                                                                            start: 433,
                                                                                            end: 434,
                                                                                        },
                                                                                    },
                                                                                ),
                                                                                selector: Binary(
                                                                                    "<",
                                                                                ),
                                                                                arguments: [
                                                                                    Literal(
                                                                                        Integer(
                                                                                            5,
                                                                                        ),
                                                                                        Span {
                                                                                            start: 437,
                                                                                            end: 438,
                                                                                        },
                                                                                    ),
                                                                                ],
                                                                                is_cast: false,
                                                                                span: Span {
                                                                                    start: 433,
                                                                                    end: 438,
                                                                                },
                                                                            },
                                                                            preceding_blank_line: false,
                                                                        },
                                                                    ],
                                                                    span: Span {
                                                                        start: 432,
                                                                        end: 439,
                                                                    },
                                                                },
                                                            ),
                                                            selector: Keyword(
                                                                [
                                                                    KeywordPart {
                                                                        keyword: "whileTrue:",
                                                                        span: Span {
                                                                            start: 440,
                                                                            end: 450,
                                                                        },
                                                                    },
                                                                ],
                                                            ),
                                                            arguments: [
                                                                Block(
                                                                    Block {
                                                                        parameters: [],
                                                                        body: [
                                                                            ExpressionStatement {
                                                                                comments: CommentAttachment {
                                                                                    leading: [],
                                                                                    trailing: None,
                                                                                },
                                                                                expression: Assignment {
                                                                                    target: Identifier(
                                                                                        Identifier {
                                                                                            name: "x",
                                                                                            span: Span {
                                                                                                start: 452,
                                                                                                end: 453,
                                                                                            },
                                                                                        },
                                                                                    ),
                                                                                    value: MessageSend {
                                                                                        receiver: Identifier(
                                                                                            Identifier {
                                                                                                name: "x",
                                                                                                span: Span {
                                                                                                    start: 457,
                                                                                                    end: 458,
                                                                                                },
                                                                                            },
                                                                                        ),
                                                                                        selector: Binary(
                                                                                            "+",
                                                                                        ),
                                                                                        arguments: [
                                                                                            Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                                Span {
                                                                                                    start: 461,
                                                                                                    end: 462,
                                                                                                },
                                                                                            ),
                                                                                        ],
                                                                                        is_cast: false,
                                                                                        span: Span {
                                                                                            start: 457,
                                                                                            end: 462,
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 452,
                                                                                        end: 462,
                                                                                    },
                                                                                },
                                                                                preceding_blank_line: false,
                                                                            },
                                                                        ],
                                                                        span: Span {
                                                                            start: 451,
                                                                            end: 463,
                                                                        },
                                                                    },
                                                                ),
                                                            ],
                                                            is_cast: false,
                                                            span: Span {
                                                                start: 432,
                                                                end: 463,
                                                            },
                                                        },
                                                        preceding_blank_line: false,
                                                    },
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: Identifier(
                                                            Identifier {
                                                                name: "x",
                                                                span: Span {
                                                                    start: 473,
                                                                    end: 474,
                                                                },
                                                            },
                                                        ),
                                                        preceding_blank_line: false,
                                                    },
                                                ],
                                                span: Span {
                                                    start: 417,
                                                    end: 480,
                                                },
                                            },
                                        ),
                                        selector: Keyword(
                                            [
                                                KeywordPart {
                                                    keyword: "value:",
                                                    span: Span {
                                                        start: 481,
                                                        end: 487,
                                                    },
                                                },
                                            ],
                                        ),
                                        arguments: [
                                            Literal(
                                                Integer(
                                                    0,
                                                ),
                                                Span {
                                                    start: 488,
                                                    end: 489,
                                                },
                                            ),
                                        ],
                                        is_cast: false,
                                        span: Span {
                                            start: 417,
                                            end: 489,
                                        },
                                    },
                                    span: Span {
                                        start: 407,
                                        end: 489,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Return {
                                    value: Identifier(
                                        Identifier {
                                            name: "result",
                                            span: Span {
                                                start: 496,
                                                end: 502,
                                            },
                                        },
                                    ),
                                    span: Span {
                                        start: 495,
                                        end: 502,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                        ],
                        span: Span {
                            start: 401,
                            end: 504,
                        },
                    },
                ),
                span: Span {
                    start: 383,
                    end: 504,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test whileFalse with block parameter mutation (BT-142 PR review fix)",
                        span: Span {
                            start: 579,
                            end: 603,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "testBlockParamWhileFalse",
                        span: Span {
                            start: 579,
                            end: 603,
                        },
                    },
                ),
                value: Block(
                    Block {
                        parameters: [],
                        body: [
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Assignment {
                                    target: Identifier(
                                        Identifier {
                                            name: "result",
                                            span: Span {
                                                start: 613,
                                                end: 619,
                                            },
                                        },
                                    ),
                                    value: MessageSend {
                                        receiver: Block(
                                            Block {
                                                parameters: [
                                                    BlockParameter {
                                                        name: "n",
                                                        span: Span {
                                                            start: 625,
                                                            end: 626,
                                                        },
                                                    },
                                                ],
                                                body: [
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: MessageSend {
                                                            receiver: Block(
                                                                Block {
                                                                    parameters: [],
                                                                    body: [
                                                                        ExpressionStatement {
                                                                            comments: CommentAttachment {
                                                                                leading: [],
                                                                                trailing: None,
                                                                            },
                                                                            expression: MessageSend {
                                                                                receiver: Identifier(
                                                                                    Identifier {
                                                                                        name: "n",
                                                                                        span: Span {
                                                                                            start: 638,
                                                                                            end: 639,
                                                                                        },
                                                                                    },
                                                                                ),
                                                                                selector: Binary(
                                                                                    "=:=",
                                                                                ),
                                                                                arguments: [
                                                                                    Literal(
                                                                                        Integer(
                                                                                            0,
                                                                                        ),
                                                                                        Span {
                                                                                            start: 644,
                                                                                            end: 645,
                                                                                        },
                                                                                    ),
                                                                                ],
                                                                                is_cast: false,
                                                                                span: Span {
                                                                                    start: 638,
                                                                                    end: 645,
                                                                                },
                                                                            },
                                                                            preceding_blank_line: false,
                                                                        },
                                                                    ],
                                                                    span: Span {
                                                                        start: 637,
                                                                        end: 646,
                                                                    },
                                                                },
                                                            ),
                                                            selector: Keyword(
                                                                [
                                                                    KeywordPart {
                                                                        keyword: "whileFalse:",
                                                                        span: Span {
                                                                            start: 647,
                                                                            end: 658,
                                                                        },
                                                                    },
                                                                ],
                                                            ),
                                                            arguments: [
                                                                Block(
                                                                    Block {
                                                                        parameters: [],
                                                                        body: [
                                                                            ExpressionStatement {
                                                                                comments: CommentAttachment {
                                                                                    leading: [],
                                                                                    trailing: None,
                                                                                },
                                                                                expression: Assignment {
                                                                                    target: Identifier(
                                                                                        Identifier {
                                                                                            name: "n",
                                                                                            span: Span {
                                                                                                start: 660,
                                                                                                end: 661,
                                                                                            },
                                                                                        },
                                                                                    ),
                                                                                    value: MessageSend {
                                                                                        receiver: Identifier(
                                                                                            Identifier {
                                                                                                name: "n",
                                                                                                span: Span {
                                                                                                    start: 665,
                                                                                                    end: 666,
                                                                                                },
                                                                                            },
                                                                                        ),
                                                                                        selector: Binary(
                                                                                            "-",
                                                                                        ),
                                                                                        arguments: [
                                                                                            Literal(
                                                                                                Integer(
                                                                                                    1,
                                                                                                ),
                                                                                                Span {
                                                                                                    start: 669,
                                                                                                    end: 670,
                                                                                                },
                                                                                            ),
                                                                                        ],
                                                                                        is_cast: false,
                                                                                        span: Span {
                                                                                            start: 665,
                                                                                            end: 670,
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 660,
                                                                                        end: 670,
                                                                                    },
                                                                                },
                                                                                preceding_blank_line: false,
                                                                            },
                                                                        ],
                                                                        span: Span {
                                                                            start: 659,
                                                                            end: 671,
                                                                        },
                                                                    },
                                                                ),
                                                            ],
                                                            is_cast: false,
                                                            span: Span {
                                                                start: 637,
                                                                end: 671,
                                                            },
                                                        },
                                                        preceding_blank_line: false,
                                                    },
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: Identifier(
                                                            Identifier {
                                                                name: "n",
                                                                span: Span {
                                                                    start: 681,
                                                                    end: 682,
                                                                },
                                                            },
                                                        ),
                                                        preceding_blank_line: false,
                                                    },
                                                ],
                                                span: Span {
                                                    start: 623,
                                                    end: 688,
                                                },
                                            },
                                        ),
                                        selector: Keyword(
                                            [
                                                KeywordPart {
                                                    keyword: "value:",
                                                    span: Span {
                                                        start: 689,
                                                        end: 695,
                                                    },
                                                },
                                            ],
                                        ),
                                        arguments: [
                                            Literal(
                                                Integer(
                                                    5,
                                                ),
                                                Span {
                                                    start: 696,
                                                    end: 697,
                                                },
                                            ),
                                        ],
                                        is_cast: false,
                                        span: Span {
                                            start: 623,
                                            end: 697,
                                        },
                                    },
                                    span: Span {
                                        start: 613,
                                        end: 697,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Return {
                                    value: Identifier(
                                        Identifier {
                                            name: "result",
                                            span: Span {
                                                start: 704,
                                                end: 710,
                                            },
                                        },
                                    ),
                                    span: Span {
                                        start: 703,
                                        end: 710,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                        ],
                        span: Span {
                            start: 607,
                            end: 712,
                        },
                    },
                ),
                span: Span {
                    start: 579,
                    end: 712,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test timesRepeat: with mutation (BT-143)",
                        span: Span {
                            start: 759,
                            end: 774,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "testTimesRepeat",
                        span: Span {
                            start: 759,
                            end: 774,
                        },
                    },
                ),
                value: Block(
                    Block {
                        parameters: [],
                        body: [
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Assignment {
                                    target: Identifier(
                                        Identifier {
                                            name: "counter",
                                            span: Span {
                                                start: 784,
                                                end: 791,
                                            },
                                        },
                                    ),
                                    value: Literal(
                                        Integer(
                                            0,
                                        ),
                                        Span {
                                            start: 795,
                                            end: 796,
                                        },
                                    ),
                                    span: Span {
                                        start: 784,
                                        end: 796,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: MessageSend {
                                    receiver: Literal(
                                        Integer(
                                            5,
                                        ),
                                        Span {
                                            start: 802,
                                            end: 803,
                                        },
                                    ),
                                    selector: Keyword(
                                        [
                                            KeywordPart {
                                                keyword: "timesRepeat:",
                                                span: Span {
                                                    start: 804,
                                                    end: 816,
                                                },
                                            },
                                        ],
                                    ),
                                    arguments: [
                                        Block(
                                            Block {
                                                parameters: [],
                                                body: [
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: Assignment {
                                                            target: Identifier(
                                                                Identifier {
                                                                    name: "counter",
                                                                    span: Span {
                                                                        start: 818,
                                                                        end: 825,
                                                                    },
                                                                },
                                                            ),
                                                            value: MessageSend {
                                                                receiver: Identifier(
                                                                    Identifier {
                                                                        name: "counter",
                                                                        span: Span {
                                                                            start: 829,
                                                                            end: 836,
                                                                        },
                                                                    },
                                                                ),
                                                                selector: Binary(
                                                                    "+",
                                                                ),
                                                                arguments: [
                                                                    Literal(
                                                                        Integer(
                                                                            1,
                                                                        ),
                                                                        Span {
                                                                            start: 839,
                                                                            end: 840,
                                                                        },
                                                                    ),
                                                                ],
                                                                is_cast: false,
                                                                span: Span {
                                                                    start: 829,
                                                                    end: 840,
                                                                },
                                                            },
                                                            span: Span {
                                                                start: 818,
                                                                end: 840,
                                                            },
                                                        },
                                                        preceding_blank_line: false,
                                                    },
                                                ],
                                                span: Span {
                                                    start: 817,
                                                    end: 841,
                                                },
                                            },
                                        ),
                                    ],
                                    is_cast: false,
                                    span: Span {
                                        start: 802,
                                        end: 841,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Return {
                                    value: Identifier(
                                        Identifier {
                                            name: "counter",
                                            span: Span {
                                                start: 848,
                                                end: 855,
                                            },
                                        },
                                    ),
                                    span: Span {
                                        start: 847,
                                        end: 855,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                        ],
                        span: Span {
                            start: 778,
                            end: 857,
                        },
                    },
                ),
                span: Span {
                    start: 759,
                    end: 857,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test timesRepeat: with block parameter mutation (BT-143)",
                        span: Span {
                            start: 920,
                            end: 945,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "testTimesRepeatBlockParam",
                        span: Span {
                            start: 920,
                            end: 945,
                        },
                    },
                ),
                value: Block(
                    Block {
                        parameters: [],
                        body: [
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Assignment {
                                    target: Identifier(
                                        Identifier {
                                            name: "result",
                                            span: Span {
                                                start: 955,
                                                end: 961,
                                            },
                                        },
                                    ),
                                    value: MessageSend {
                                        receiver: Block(
                                            Block {
                                                parameters: [
                                                    BlockParameter {
                                                        name: "n",
                                                        span: Span {
                                                            start: 967,
                                                            end: 968,
                                                        },
                                                    },
                                                ],
                                                body: [
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: MessageSend {
                                                            receiver: Literal(
                                                                Integer(
                                                                    3,
                                                                ),
                                                                Span {
                                                                    start: 979,
                                                                    end: 980,
                                                                },
                                                            ),
                                                            selector: Keyword(
                                                                [
                                                                    KeywordPart {
                                                                        keyword: "timesRepeat:",
                                                                        span: Span {
                                                                            start: 981,
                                                                            end: 993,
                                                                        },
                                                                    },
                                                                ],
                                                            ),
                                                            arguments: [
                                                                Block(
                                                                    Block {
                                                                        parameters: [],
                                                                        body: [
                                                                            ExpressionStatement {
                                                                                comments: CommentAttachment {
                                                                                    leading: [],
                                                                                    trailing: None,
                                                                                },
                                                                                expression: Assignment {
                                                                                    target: Identifier(
                                                                                        Identifier {
                                                                                            name: "n",
                                                                                            span: Span {
                                                                                                start: 995,
                                                                                                end: 996,
                                                                                            },
                                                                                        },
                                                                                    ),
                                                                                    value: MessageSend {
                                                                                        receiver: Identifier(
                                                                                            Identifier {
                                                                                                name: "n",
                                                                                                span: Span {
                                                                                                    start: 1000,
                                                                                                    end: 1001,
                                                                                                },
                                                                                            },
                                                                                        ),
                                                                                        selector: Binary(
                                                                                            "+",
                                                                                        ),
                                                                                        arguments: [
                                                                                            Literal(
                                                                                                Integer(
                                                                                                    10,
                                                                                                ),
                                                                                                Span {
                                                                                                    start: 1004,
                                                                                                    end: 1006,
                                                                                                },
                                                                                            ),
                                                                                        ],
                                                                                        is_cast: false,
                                                                                        span: Span {
                                                                                            start: 1000,
                                                                                            end: 1006,
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 995,
                                                                                        end: 1006,
                                                                                    },
                                                                                },
                                                                                preceding_blank_line: false,
                                                                            },
                                                                        ],
                                                                        span: Span {
                                                                            start: 994,
                                                                            end: 1007,
                                                                        },
                                                                    },
                                                                ),
                                                            ],
                                                            is_cast: false,
                                                            span: Span {
                                                                start: 979,
                                                                end: 1007,
                                                            },
                                                        },
                                                        preceding_blank_line: false,
                                                    },
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: Identifier(
                                                            Identifier {
                                                                name: "n",
                                                                span: Span {
                                                                    start: 1017,
                                                                    end: 1018,
                                                                },
                                                            },
                                                        ),
                                                        preceding_blank_line: false,
                                                    },
                                                ],
                                                span: Span {
                                                    start: 965,
                                                    end: 1024,
                                                },
                                            },
                                        ),
                                        selector: Keyword(
                                            [
                                                KeywordPart {
                                                    keyword: "value:",
                                                    span: Span {
                                                        start: 1025,
                                                        end: 1031,
                                                    },
                                                },
                                            ],
                                        ),
                                        arguments: [
                                            Literal(
                                                Integer(
                                                    5,
                                                ),
                                                Span {
                                                    start: 1032,
                                                    end: 1033,
                                                },
                                            ),
                                        ],
                                        is_cast: false,
                                        span: Span {
                                            start: 965,
                                            end: 1033,
                                        },
                                    },
                                    span: Span {
                                        start: 955,
                                        end: 1033,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Return {
                                    value: Identifier(
                                        Identifier {
                                            name: "result",
                                            span: Span {
                                                start: 1040,
                                                end: 1046,
                                            },
                                        },
                                    ),
                                    span: Span {
                                        start: 1039,
                                        end: 1046,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                        ],
                        span: Span {
                            start: 949,
                            end: 1048,
                        },
                    },
                ),
                span: Span {
                    start: 920,
                    end: 1048,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test to:do: with mutation (BT-143)",
                        span: Span {
                            start: 1089,
                            end: 1097,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "testToDo",
                        span: Span {
                            start: 1089,
                            end: 1097,
                        },
                    },
                ),
                value: Block(
                    Block {
                        parameters: [],
                        body: [
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Assignment {
                                    target: Identifier(
                                        Identifier {
                                            name: "total",
                                            span: Span {
                                                start: 1107,
                                                end: 1112,
                                            },
                                        },
                                    ),
                                    value: Literal(
                                        Integer(
                                            0,
                                        ),
                                        Span {
                                            start: 1116,
                                            end: 1117,
                                        },
                                    ),
                                    span: Span {
                                        start: 1107,
                                        end: 1117,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: MessageSend {
                                    receiver: Literal(
                                        Integer(
                                            1,
                                        ),
                                        Span {
                                            start: 1123,
                                            end: 1124,
                                        },
                                    ),
                                    selector: Keyword(
                                        [
                                            KeywordPart {
                                                keyword: "to:",
                                                span: Span {
                                                    start: 1125,
                                                    end: 1128,
                                                },
                                            },
                                            KeywordPart {
                                                keyword: "do:",
                                                span: Span {
                                                    start: 1132,
                                                    end: 1135,
                                                },
                                            },
                                        ],
                                    ),
                                    arguments: [
                                        Literal(
                                            Integer(
                                                10,
                                            ),
                                            Span {
                                                start: 1129,
                                                end: 1131,
                                            },
                                        ),
                                        Block(
                                            Block {
                                                parameters: [
                                                    BlockParameter {
                                                        name: "n",
                                                        span: Span {
                                                            start: 1138,
                                                            end: 1139,
                                                        },
                                                    },
                                                ],
                                                body: [
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: Assignment {
                                                            target: Identifier(
                                                                Identifier {
                                                                    name: "total",
                                                                    span: Span {
                                                                        start: 1142,
                                                                        end: 1147,
                                                                    },
                                                                },
                                                            ),
                                                            value: MessageSend {
                                                                receiver: Identifier(
                                                                    Identifier {
                                                                        name: "total",
                                                                        span: Span {
                                                                            start: 1151,
                                                                            end: 1156,
                                                                        },
                                                                    },
                                                                ),
                                                                selector: Binary(
                                                                    "+",
                                                                ),
                                                                arguments: [
                                                                    Identifier(
                                                                        Identifier {
                                                                            name: "n",
                                                                            span: Span {
                                                                                start: 1159,
                                                                                end: 1160,
                                                                            },
                                                                        },
                                                                    ),
                                                                ],
                                                                is_cast: false,
                                                                span: Span {
                                                                    start: 1151,
                                                                    end: 1160,
                                                                },
                                                            },
                                                            span: Span {
                                                                start: 1142,
                                                                end: 1160,
                                                            },
                                                        },
                                                        preceding_blank_line: false,
                                                    },
                                                ],
                                                span: Span {
                                                    start: 1136,
                                                    end: 1161,
                                                },
                                            },
                                        ),
                                    ],
                                    is_cast: false,
                                    span: Span {
                                        start: 1123,
                                        end: 1161,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Return {
                                    value: Identifier(
                                        Identifier {
                                            name: "total",
                                            span: Span {
                                                start: 1168,
                                                end: 1173,
                                            },
                                        },
                                    ),
                                    span: Span {
                                        start: 1167,
                                        end: 1173,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                        ],
                        span: Span {
                            start: 1101,
                            end: 1175,
                        },
                    },
                ),
                span: Span {
                    start: 1089,
                    end: 1175,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test to:do: with block parameter mutation (BT-143)",
                        span: Span {
                            start: 1232,
                            end: 1250,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "testToDoBlockParam",
                        span: Span {
                            start: 1232,
                            end: 1250,
                        },
                    },
                ),
                value: Block(
                    Block {
                        parameters: [],
                        body: [
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Assignment {
                                    target: Identifier(
                                        Identifier {
                                            name: "result",
                                            span: Span {
                                                start: 1260,
                                                end: 1266,
                                            },
                                        },
                                    ),
                                    value: MessageSend {
                                        receiver: Block(
                                            Block {
                                                parameters: [
                                                    BlockParameter {
                                                        name: "x",
                                                        span: Span {
                                                            start: 1272,
                                                            end: 1273,
                                                        },
                                                    },
                                                ],
                                                body: [
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: Assignment {
                                                            target: Identifier(
                                                                Identifier {
                                                                    name: "sum",
                                                                    span: Span {
                                                                        start: 1284,
                                                                        end: 1287,
                                                                    },
                                                                },
                                                            ),
                                                            value: Literal(
                                                                Integer(
                                                                    0,
                                                                ),
                                                                Span {
                                                                    start: 1291,
                                                                    end: 1292,
                                                                },
                                                            ),
                                                            span: Span {
                                                                start: 1284,
                                                                end: 1292,
                                                            },
                                                        },
                                                        preceding_blank_line: false,
                                                    },
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: MessageSend {
                                                            receiver: Identifier(
                                                                Identifier {
                                                                    name: "x",
                                                                    span: Span {
                                                                        start: 1302,
                                                                        end: 1303,
                                                                    },
                                                                },
                                                            ),
                                                            selector: Keyword(
                                                                [
                                                                    KeywordPart {
                                                                        keyword: "to:",
                                                                        span: Span {
                                                                            start: 1304,
                                                                            end: 1307,
                                                                        },
                                                                    },
                                                                    KeywordPart {
                                                                        keyword: "do:",
                                                                        span: Span {
                                                                            start: 1310,
                                                                            end: 1313,
                                                                        },
                                                                    },
                                                                ],
                                                            ),
                                                            arguments: [
                                                                Literal(
                                                                    Integer(
                                                                        5,
                                                                    ),
                                                                    Span {
                                                                        start: 1308,
                                                                        end: 1309,
                                                                    },
                                                                ),
                                                                Block(
                                                                    Block {
                                                                        parameters: [
                                                                            BlockParameter {
                                                                                name: "i",
                                                                                span: Span {
                                                                                    start: 1316,
                                                                                    end: 1317,
                                                                                },
                                                                            },
                                                                        ],
                                                                        body: [
                                                                            ExpressionStatement {
                                                                                comments: CommentAttachment {
                                                                                    leading: [],
                                                                                    trailing: None,
                                                                                },
                                                                                expression: Assignment {
                                                                                    target: Identifier(
                                                                                        Identifier {
                                                                                            name: "sum",
                                                                                            span: Span {
                                                                                                start: 1320,
                                                                                                end: 1323,
                                                                                            },
                                                                                        },
                                                                                    ),
                                                                                    value: MessageSend {
                                                                                        receiver: Identifier(
                                                                                            Identifier {
                                                                                                name: "sum",
                                                                                                span: Span {
                                                                                                    start: 1327,
                                                                                                    end: 1330,
                                                                                                },
                                                                                            },
                                                                                        ),
                                                                                        selector: Binary(
                                                                                            "+",
                                                                                        ),
                                                                                        arguments: [
                                                                                            Identifier(
                                                                                                Identifier {
                                                                                                    name: "i",
                                                                                                    span: Span {
                                                                                                        start: 1333,
                                                                                                        end: 1334,
                                                                                                    },
                                                                                                },
                                                                                            ),
                                                                                        ],
                                                                                        is_cast: false,
                                                                                        span: Span {
                                                                                            start: 1327,
                                                                                            end: 1334,
                                                                                        },
                                                                                    },
                                                                                    span: Span {
                                                                                        start: 1320,
                                                                                        end: 1334,
                                                                                    },
                                                                                },
                                                                                preceding_blank_line: false,
                                                                            },
                                                                        ],
                                                                        span: Span {
                                                                            start: 1314,
                                                                            end: 1335,
                                                                        },
                                                                    },
                                                                ),
                                                            ],
                                                            is_cast: false,
                                                            span: Span {
                                                                start: 1302,
                                                                end: 1335,
                                                            },
                                                        },
                                                        preceding_blank_line: false,
                                                    },
                                                    ExpressionStatement {
                                                        comments: CommentAttachment {
                                                            leading: [],
                                                            trailing: None,
                                                        },
                                                        expression: Identifier(
                                                            Identifier {
                                                                name: "sum",
                                                                span: Span {
                                                                    start: 1345,
                                                                    end: 1348,
                                                                },
                                                            },
                                                        ),
                                                        preceding_blank_line: false,
                                                    },
                                                ],
                                                span: Span {
                                                    start: 1270,
                                                    end: 1354,
                                                },
                                            },
                                        ),
                                        selector: Keyword(
                                            [
                                                KeywordPart {
                                                    keyword: "value:",
                                                    span: Span {
                                                        start: 1355,
                                                        end: 1361,
                                                    },
                                                },
                                            ],
                                        ),
                                        arguments: [
                                            Literal(
                                                Integer(
                                                    1,
                                                ),
                                                Span {
                                                    start: 1362,
                                                    end: 1363,
                                                },
                                            ),
                                        ],
                                        is_cast: false,
                                        span: Span {
                                            start: 1270,
                                            end: 1363,
                                        },
                                    },
                                    span: Span {
                                        start: 1260,
                                        end: 1363,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: Return {
                                    value: Identifier(
                                        Identifier {
                                            name: "result",
                                            span: Span {
                                                start: 1370,
                                                end: 1376,
                                            },
                                        },
                                    ),
                                    span: Span {
                                        start: 1369,
                                        end: 1376,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                        ],
                        span: Span {
                            start: 1254,
                            end: 1378,
                        },
                    },
                ),
                span: Span {
                    start: 1232,
                    end: 1378,
                },
            },
            preceding_blank_line: true,
        },
    ],
    span: Span {
        start: 125,
        end: 1379,
    },
    file_leading_comments: [],
    file_trailing_comments: [],
}

Diagnostics:
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 149, end: 150 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 198, end: 199 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 275, end: 276 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 312, end: 313 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 463, end: 464 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 489, end: 490 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 671, end: 672 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 697, end: 698 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 796, end: 797 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 841, end: 842 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 1007, end: 1008 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 1033, end: 1034 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 1117, end: 1118 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 1161, end: 1162 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 1292, end: 1293 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 1335, end: 1336 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
Diagnostic { severity: Lint, message: "unnecessary `.`  the following newline already separates statements", span: Span { start: 1363, end: 1364 }, hint: Some("Remove the `.` and rely on the newline"), category: Some(Lint) }
