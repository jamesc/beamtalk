---
source: test-package-compiler/tests/compiler_tests.rs
expression: output
---
Token { kind: Identifier("sealed"), span: Span { start: 247, end: 253 }, leading_trivia: [LineComment("// Copyright 2026 James Casey"), Whitespace("\n"), LineComment("// SPDX-License-Identifier: Apache-2.0"), Whitespace("\n\n"), LineComment("// Test Dictionary class compilation as a value type (not gen_server)."), Whitespace("\n"), LineComment("// Dictionary is a sealed Object subclass backed by Erlang maps."), Whitespace("\n"), LineComment("// new/0 should return #{} (empty map)."), Whitespace("\n\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("Object"), span: Span { start: 254, end: 260 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("subclass:"), span: Span { start: 261, end: 270 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("Dictionary"), span: Span { start: 271, end: 281 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("size"), span: Span { start: 297, end: 301 }, leading_trivia: [Whitespace("\n\n  "), LineComment("// Access"), Whitespace("\n  ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 302, end: 304 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: AtPrimitive, span: Span { start: 305, end: 315 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("size"), span: Span { start: 316, end: 322 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("keys"), span: Span { start: 325, end: 329 }, leading_trivia: [Whitespace("\n  ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 330, end: 332 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: AtPrimitive, span: Span { start: 333, end: 343 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("keys"), span: Span { start: 344, end: 350 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("values"), span: Span { start: 353, end: 359 }, leading_trivia: [Whitespace("\n  ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 360, end: 362 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: AtPrimitive, span: Span { start: 363, end: 373 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("values"), span: Span { start: 374, end: 382 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("at:"), span: Span { start: 385, end: 388 }, leading_trivia: [Whitespace("\n  ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("key"), span: Span { start: 389, end: 392 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 393, end: 395 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: AtPrimitive, span: Span { start: 396, end: 406 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("at:"), span: Span { start: 407, end: 412 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("at:"), span: Span { start: 415, end: 418 }, leading_trivia: [Whitespace("\n  ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("key"), span: Span { start: 419, end: 422 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifAbsent:"), span: Span { start: 423, end: 432 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("block"), span: Span { start: 433, end: 438 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 439, end: 441 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: AtPrimitive, span: Span { start: 442, end: 452 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("at:ifAbsent:"), span: Span { start: 453, end: 467 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("at:"), span: Span { start: 470, end: 473 }, leading_trivia: [Whitespace("\n  ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("key"), span: Span { start: 474, end: 477 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("put:"), span: Span { start: 478, end: 482 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("value"), span: Span { start: 483, end: 488 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 489, end: 491 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: AtPrimitive, span: Span { start: 492, end: 502 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("at:put:"), span: Span { start: 503, end: 512 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("includesKey:"), span: Span { start: 515, end: 527 }, leading_trivia: [Whitespace("\n  ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("key"), span: Span { start: 528, end: 531 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 532, end: 534 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: AtPrimitive, span: Span { start: 535, end: 545 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("includesKey:"), span: Span { start: 546, end: 560 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("removeKey:"), span: Span { start: 603, end: 613 }, leading_trivia: [Whitespace("\n\n  "), LineComment("// Mutation (returns new dictionary)"), Whitespace("\n  ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("key"), span: Span { start: 614, end: 617 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 618, end: 620 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: AtPrimitive, span: Span { start: 621, end: 631 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("removeKey:"), span: Span { start: 632, end: 644 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("merge:"), span: Span { start: 647, end: 653 }, leading_trivia: [Whitespace("\n  ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("other"), span: Span { start: 654, end: 659 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 660, end: 662 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: AtPrimitive, span: Span { start: 663, end: 673 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("merge:"), span: Span { start: 674, end: 682 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("keysAndValuesDo:"), span: Span { start: 701, end: 717 }, leading_trivia: [Whitespace("\n\n  "), LineComment("// Iteration"), Whitespace("\n  ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("block"), span: Span { start: 718, end: 723 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 724, end: 726 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: AtPrimitive, span: Span { start: 727, end: 737 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("keysAndValuesDo:"), span: Span { start: 738, end: 756 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Eof, span: Span { start: 758, end: 758 }, leading_trivia: [Whitespace("\n\n")], trailing_trivia: [] }
