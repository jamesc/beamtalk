---
source: test-package-compiler/tests/compiler_tests.rs
expression: output
---
Token { kind: Identifier("count"), span: Span { start: 376, end: 381 }, leading_trivia: [LineComment("// Copyright 2026 James Casey"), Whitespace("\n"), LineComment("// SPDX-License-Identifier: Apache-2.0"), Whitespace("\n\n"), LineComment("// Test control flow constructs with variable and field mutations"), Whitespace("\n"), LineComment("// Per BT-90 design: literal blocks in control flow positions can mutate"), Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// Local Variable Mutations"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n"), LineComment("// Simple whileTrue with local variable mutation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 382, end: 384 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 385, end: 386 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 386, end: 387 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 388, end: 389 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Identifier("count"), span: Span { start: 389, end: 394 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<"), span: Span { start: 395, end: 396 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("3"), span: Span { start: 397, end: 398 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 398, end: 399 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 400, end: 410 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 411, end: 412 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("count"), span: Span { start: 412, end: 417 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 418, end: 420 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("count"), span: Span { start: 421, end: 426 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 427, end: 428 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 429, end: 430 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 430, end: 431 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 431, end: 432 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("count2"), span: Span { start: 485, end: 491 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: count = 3"), Whitespace("\n\n"), LineComment("// whileFalse with mutation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 492, end: 494 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("10"), span: Span { start: 495, end: 497 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 497, end: 498 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 499, end: 500 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Identifier("count2"), span: Span { start: 500, end: 506 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("="), span: Span { start: 507, end: 508 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 509, end: 510 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 510, end: 511 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileFalse:"), span: Span { start: 512, end: 523 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 524, end: 525 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("count2"), span: Span { start: 525, end: 531 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 532, end: 534 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("count2"), span: Span { start: 535, end: 541 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("-"), span: Span { start: 542, end: 543 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 544, end: 545 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 545, end: 546 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 546, end: 547 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("sum"), span: Span { start: 615, end: 618 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: count2 = 0"), Whitespace("\n\n"), LineComment("// Multiple variables mutated in one loop"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 619, end: 621 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 622, end: 623 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 623, end: 624 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("product"), span: Span { start: 625, end: 632 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 633, end: 635 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 636, end: 637 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 637, end: 638 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("i"), span: Span { start: 639, end: 640 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 641, end: 643 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 644, end: 645 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 645, end: 646 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 647, end: 648 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Identifier("i"), span: Span { start: 648, end: 649 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<="), span: Span { start: 650, end: 652 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("3"), span: Span { start: 653, end: 654 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 654, end: 655 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 656, end: 666 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 667, end: 668 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("sum"), span: Span { start: 673, end: 676 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 677, end: 679 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("sum"), span: Span { start: 680, end: 683 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 684, end: 685 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("i"), span: Span { start: 686, end: 687 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 687, end: 688 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("product"), span: Span { start: 693, end: 700 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 701, end: 703 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("product"), span: Span { start: 704, end: 711 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("*"), span: Span { start: 712, end: 713 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("i"), span: Span { start: 714, end: 715 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 715, end: 716 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("i"), span: Span { start: 721, end: 722 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 723, end: 725 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("i"), span: Span { start: 726, end: 727 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 728, end: 729 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 730, end: 731 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 732, end: 733 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 733, end: 734 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("counter"), span: Span { start: 948, end: 955 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: sum = 6 (1+2+3), product = 6 (1*2*3), i = 4"), Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// Control Flow with Index Variables"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n"), LineComment("// timesRepeat with mutation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 956, end: 958 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 959, end: 960 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 960, end: 961 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("5"), span: Span { start: 962, end: 963 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("timesRepeat:"), span: Span { start: 964, end: 976 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 977, end: 978 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("counter"), span: Span { start: 978, end: 985 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 986, end: 988 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("counter"), span: Span { start: 989, end: 996 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 997, end: 998 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 999, end: 1000 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1000, end: 1001 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1001, end: 1002 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("total"), span: Span { start: 1066, end: 1071 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: counter = 5"), Whitespace("\n\n"), LineComment("// to:do: with index and accumulator"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1072, end: 1074 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1075, end: 1076 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1076, end: 1077 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("1"), span: Span { start: 1078, end: 1079 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("to:"), span: Span { start: 1080, end: 1083 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("10"), span: Span { start: 1084, end: 1086 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("do:"), span: Span { start: 1087, end: 1090 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1091, end: 1092 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1092, end: 1093 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1093, end: 1094 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1095, end: 1096 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("total"), span: Span { start: 1097, end: 1102 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1103, end: 1105 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("total"), span: Span { start: 1106, end: 1111 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 1112, end: 1113 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("n"), span: Span { start: 1114, end: 1115 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1115, end: 1116 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1116, end: 1117 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("numbers"), span: Span { start: 1314, end: 1321 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: total = 55 (sum 1..10)"), Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// Collection Iteration with Mutations"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n"), LineComment("// Array do: with accumulation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1322, end: 1324 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Hash, span: Span { start: 1325, end: 1326 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 1326, end: 1327 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("1"), span: Span { start: 1327, end: 1328 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: BinarySelector(","), span: Span { start: 1328, end: 1329 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 1330, end: 1331 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: BinarySelector(","), span: Span { start: 1331, end: 1332 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("3"), span: Span { start: 1333, end: 1334 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: BinarySelector(","), span: Span { start: 1334, end: 1335 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("4"), span: Span { start: 1336, end: 1337 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: BinarySelector(","), span: Span { start: 1337, end: 1338 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("5"), span: Span { start: 1339, end: 1340 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1340, end: 1341 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1341, end: 1342 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("arraySum"), span: Span { start: 1343, end: 1351 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1352, end: 1354 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1355, end: 1356 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1356, end: 1357 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("numbers"), span: Span { start: 1358, end: 1365 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("do:"), span: Span { start: 1366, end: 1369 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1370, end: 1371 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1371, end: 1372 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1372, end: 1373 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1374, end: 1375 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("arraySum"), span: Span { start: 1376, end: 1384 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1385, end: 1387 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("arraySum"), span: Span { start: 1388, end: 1396 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 1397, end: 1398 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("n"), span: Span { start: 1399, end: 1400 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1400, end: 1401 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1401, end: 1402 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("evenCount"), span: Span { start: 1491, end: 1500 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: arraySum = 15"), Whitespace("\n\n"), LineComment("// collect: (returns new collection, but can mutate locals)"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1501, end: 1503 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1504, end: 1505 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1505, end: 1506 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("doubled"), span: Span { start: 1507, end: 1514 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1515, end: 1517 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("numbers"), span: Span { start: 1518, end: 1525 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("collect:"), span: Span { start: 1526, end: 1534 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1535, end: 1536 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1536, end: 1537 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1537, end: 1538 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1539, end: 1540 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("evenCount"), span: Span { start: 1545, end: 1554 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1555, end: 1557 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("evenCount"), span: Span { start: 1558, end: 1567 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 1568, end: 1569 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftParen, span: Span { start: 1570, end: 1571 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1571, end: 1572 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("%"), span: Span { start: 1573, end: 1574 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 1575, end: 1576 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("="), span: Span { start: 1577, end: 1578 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1579, end: 1580 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifTrue:"), span: Span { start: 1581, end: 1588 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1589, end: 1590 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("1"), span: Span { start: 1590, end: 1591 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1591, end: 1592 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifFalse:"), span: Span { start: 1593, end: 1601 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1602, end: 1603 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("0"), span: Span { start: 1603, end: 1604 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1604, end: 1605 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightParen, span: Span { start: 1605, end: 1606 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1606, end: 1607 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1612, end: 1613 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("*"), span: Span { start: 1614, end: 1615 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 1616, end: 1617 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1618, end: 1619 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1619, end: 1620 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("matchCount"), span: Span { start: 1703, end: 1713 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: evenCount = 2, doubled = #[2,4,6,8,10]"), Whitespace("\n\n"), LineComment("// select: with side effects"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1714, end: 1716 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1717, end: 1718 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1718, end: 1719 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("evens"), span: Span { start: 1720, end: 1725 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1726, end: 1728 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("numbers"), span: Span { start: 1729, end: 1736 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("select:"), span: Span { start: 1737, end: 1744 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1745, end: 1746 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1746, end: 1747 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1747, end: 1748 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1749, end: 1750 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("matchCount"), span: Span { start: 1755, end: 1765 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1766, end: 1768 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("matchCount"), span: Span { start: 1769, end: 1779 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 1780, end: 1781 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 1782, end: 1783 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1783, end: 1784 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1789, end: 1790 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("%"), span: Span { start: 1791, end: 1792 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 1793, end: 1794 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("=:="), span: Span { start: 1795, end: 1798 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1799, end: 1800 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1801, end: 1802 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1802, end: 1803 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("maxSeen"), span: Span { start: 1888, end: 1895 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: matchCount = 5, evens = #[2,4]"), Whitespace("\n\n"), LineComment("// inject:into: with external mutation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1896, end: 1898 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1899, end: 1900 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1900, end: 1901 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("finalSum"), span: Span { start: 1902, end: 1910 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1911, end: 1913 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("numbers"), span: Span { start: 1914, end: 1921 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("inject:"), span: Span { start: 1922, end: 1929 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1930, end: 1931 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("into:"), span: Span { start: 1932, end: 1937 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1938, end: 1939 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1939, end: 1940 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("acc"), span: Span { start: 1940, end: 1943 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Colon, span: Span { start: 1944, end: 1945 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1945, end: 1946 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1947, end: 1948 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1953, end: 1954 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector(">"), span: Span { start: 1955, end: 1956 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("maxSeen"), span: Span { start: 1957, end: 1964 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifTrue:"), span: Span { start: 1965, end: 1972 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1973, end: 1974 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("maxSeen"), span: Span { start: 1974, end: 1981 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1982, end: 1984 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("n"), span: Span { start: 1985, end: 1986 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1986, end: 1987 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1987, end: 1988 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("acc"), span: Span { start: 1993, end: 1996 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 1997, end: 1998 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("n"), span: Span { start: 1999, end: 2000 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2001, end: 2002 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2002, end: 2003 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("outerSum"), span: Span { start: 2197, end: 2205 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: maxSeen = 5, finalSum = 15"), Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// Nested Control Flow"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n"), LineComment("// Nested loops with multiple mutations"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2206, end: 2208 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 2209, end: 2210 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2210, end: 2211 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("innerSum"), span: Span { start: 2212, end: 2220 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2221, end: 2223 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 2224, end: 2225 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2225, end: 2226 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("x"), span: Span { start: 2227, end: 2228 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2229, end: 2231 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2232, end: 2233 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2233, end: 2234 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 2235, end: 2236 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Identifier("x"), span: Span { start: 2236, end: 2237 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<="), span: Span { start: 2238, end: 2240 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("3"), span: Span { start: 2241, end: 2242 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2242, end: 2243 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 2244, end: 2254 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2255, end: 2256 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("y"), span: Span { start: 2261, end: 2262 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2263, end: 2265 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2266, end: 2267 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2267, end: 2268 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 2273, end: 2274 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [] }
Token { kind: Identifier("y"), span: Span { start: 2274, end: 2275 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<="), span: Span { start: 2276, end: 2278 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 2279, end: 2280 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2280, end: 2281 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 2282, end: 2292 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2293, end: 2294 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("innerSum"), span: Span { start: 2303, end: 2311 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2312, end: 2314 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("innerSum"), span: Span { start: 2315, end: 2323 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2324, end: 2325 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2326, end: 2327 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2327, end: 2328 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("y"), span: Span { start: 2337, end: 2338 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2339, end: 2341 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("y"), span: Span { start: 2342, end: 2343 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2344, end: 2345 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2346, end: 2347 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2352, end: 2353 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2353, end: 2354 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("outerSum"), span: Span { start: 2359, end: 2367 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2368, end: 2370 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("outerSum"), span: Span { start: 2371, end: 2379 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2380, end: 2381 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("innerSum"), span: Span { start: 2382, end: 2390 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2390, end: 2391 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("x"), span: Span { start: 2396, end: 2397 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2398, end: 2400 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("x"), span: Span { start: 2401, end: 2402 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2403, end: 2404 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2405, end: 2406 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2407, end: 2408 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2408, end: 2409 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("Counter"), span: Span { start: 2588, end: 2595 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: innerSum = 6, outerSum = (2 + 4 + 6) = 12"), Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// Field Mutations (Actor State)"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2596, end: 2598 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("class"), span: Span { start: 2599, end: 2604 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2605, end: 2606 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("state:"), span: Span { start: 2611, end: 2617 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("value:"), span: Span { start: 2618, end: 2624 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("Integer"), span: Span { start: 2625, end: 2632 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("="), span: Span { start: 2633, end: 2634 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 2635, end: 2636 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2636, end: 2637 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("increment"), span: Span { start: 2647, end: 2656 }, leading_trivia: [Whitespace("\n    \n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 2657, end: 2659 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 2668, end: 2669 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2669, end: 2673 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2673, end: 2674 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2674, end: 2679 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<"), span: Span { start: 2680, end: 2681 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("10"), span: Span { start: 2682, end: 2684 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2684, end: 2685 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 2686, end: 2696 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2697, end: 2698 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2711, end: 2715 }, leading_trivia: [Whitespace("\n            ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2715, end: 2716 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2716, end: 2721 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2722, end: 2724 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("self"), span: Span { start: 2725, end: 2729 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2729, end: 2730 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2730, end: 2735 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2736, end: 2737 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2738, end: 2739 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2748, end: 2749 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2749, end: 2750 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Caret, span: Span { start: 2759, end: 2760 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2760, end: 2764 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2764, end: 2765 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2765, end: 2770 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2770, end: 2771 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("incrementBy:"), span: Span { start: 2781, end: 2793 }, leading_trivia: [Whitespace("\n    \n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("amount"), span: Span { start: 2794, end: 2800 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 2801, end: 2803 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("amount"), span: Span { start: 2812, end: 2818 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("timesRepeat:"), span: Span { start: 2819, end: 2831 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2832, end: 2833 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2846, end: 2850 }, leading_trivia: [Whitespace("\n            ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2850, end: 2851 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2851, end: 2856 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2857, end: 2859 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("self"), span: Span { start: 2860, end: 2864 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2864, end: 2865 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2865, end: 2870 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2871, end: 2872 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2873, end: 2874 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2883, end: 2884 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2884, end: 2885 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Caret, span: Span { start: 2894, end: 2895 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2895, end: 2899 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2899, end: 2900 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2900, end: 2905 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2905, end: 2906 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("multiplyFieldWithLoop"), span: Span { start: 2916, end: 2937 }, leading_trivia: [Whitespace("\n    \n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 2938, end: 2940 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result"), span: Span { start: 2949, end: 2955 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2956, end: 2958 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2959, end: 2960 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2960, end: 2961 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2970, end: 2974 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2974, end: 2975 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2975, end: 2980 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("timesRepeat:"), span: Span { start: 2981, end: 2993 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2994, end: 2995 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result"), span: Span { start: 3008, end: 3014 }, leading_trivia: [Whitespace("\n            ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3015, end: 3017 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("result"), span: Span { start: 3018, end: 3024 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("*"), span: Span { start: 3025, end: 3026 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 3027, end: 3028 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3037, end: 3038 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3038, end: 3039 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 3048, end: 3052 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3052, end: 3053 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result"), span: Span { start: 3053, end: 3059 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3060, end: 3062 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("result"), span: Span { start: 3063, end: 3069 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3069, end: 3070 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Caret, span: Span { start: 3079, end: 3080 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("result"), span: Span { start: 3080, end: 3086 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3086, end: 3087 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("complexMutation"), span: Span { start: 3097, end: 3112 }, leading_trivia: [Whitespace("\n    \n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 3113, end: 3115 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("temp"), span: Span { start: 3168, end: 3172 }, leading_trivia: [Whitespace("\n        "), LineComment("// Mix of field and local mutations"), Whitespace("\n        ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3173, end: 3175 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 3176, end: 3177 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3177, end: 3178 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 3187, end: 3188 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 3188, end: 3192 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3192, end: 3193 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 3193, end: 3198 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<"), span: Span { start: 3199, end: 3200 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("5"), span: Span { start: 3201, end: 3202 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3202, end: 3203 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 3204, end: 3214 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 3215, end: 3216 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 3229, end: 3233 }, leading_trivia: [Whitespace("\n            ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3233, end: 3234 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 3234, end: 3239 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3240, end: 3242 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("self"), span: Span { start: 3243, end: 3247 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3247, end: 3248 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 3248, end: 3253 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 3254, end: 3255 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 3256, end: 3257 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3257, end: 3258 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("temp"), span: Span { start: 3271, end: 3275 }, leading_trivia: [Whitespace("\n            ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3276, end: 3278 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("temp"), span: Span { start: 3279, end: 3283 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 3284, end: 3285 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("self"), span: Span { start: 3286, end: 3290 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3290, end: 3291 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 3291, end: 3296 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3305, end: 3306 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3306, end: 3307 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Caret, span: Span { start: 3316, end: 3317 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("temp"), span: Span { start: 3317, end: 3321 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3321, end: 3322 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("state:"), span: Span { start: 3332, end: 3338 }, leading_trivia: [Whitespace("\n    \n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("result:"), span: Span { start: 3339, end: 3346 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("Integer"), span: Span { start: 3347, end: 3354 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("="), span: Span { start: 3355, end: 3356 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 3357, end: 3358 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3358, end: 3359 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3360, end: 3361 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3361, end: 3362 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("replCount"), span: Span { start: 3533, end: 3542 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// REPL Binding Updates"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n"), LineComment("// After control flow, REPL should see updated bindings"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3543, end: 3545 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 3546, end: 3547 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3547, end: 3548 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("3"), span: Span { start: 3549, end: 3550 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("timesRepeat:"), span: Span { start: 3551, end: 3563 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 3564, end: 3565 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("replCount"), span: Span { start: 3565, end: 3574 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3575, end: 3577 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("replCount"), span: Span { start: 3578, end: 3587 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 3588, end: 3589 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 3590, end: 3591 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3591, end: 3592 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3592, end: 3593 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("a"), span: Span { start: 3672, end: 3673 }, leading_trivia: [Whitespace("\n"), LineComment("// REPL should now show: replCount = 3"), Whitespace("\n\n"), LineComment("// Multiple mutations visible in REPL"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3674, end: 3676 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 3677, end: 3678 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3678, end: 3679 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("b"), span: Span { start: 3680, end: 3681 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3682, end: 3684 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 3685, end: 3686 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3686, end: 3687 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 3688, end: 3689 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Identifier("a"), span: Span { start: 3689, end: 3690 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<"), span: Span { start: 3691, end: 3692 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("5"), span: Span { start: 3693, end: 3694 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3694, end: 3695 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 3696, end: 3706 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 3707, end: 3708 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("a"), span: Span { start: 3713, end: 3714 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3715, end: 3717 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("a"), span: Span { start: 3718, end: 3719 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 3720, end: 3721 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 3722, end: 3723 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3723, end: 3724 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("b"), span: Span { start: 3729, end: 3730 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3731, end: 3733 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("b"), span: Span { start: 3734, end: 3735 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("*"), span: Span { start: 3736, end: 3737 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 3738, end: 3739 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3740, end: 3741 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3741, end: 3742 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Eof, span: Span { start: 3778, end: 3778 }, leading_trivia: [Whitespace("\n"), LineComment("// REPL should show: a = 5, b = 32"), Whitespace("\n")], trailing_trivia: [] }
