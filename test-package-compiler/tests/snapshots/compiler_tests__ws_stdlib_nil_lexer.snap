---
source: test-package-compiler/tests/compiler_tests.rs
expression: output
---
Token { kind: Identifier("result1"), span: Span { start: 600, end: 607 }, leading_trivia: [LineComment("// Copyright 2026 James Casey"), Whitespace("\n"), LineComment("// SPDX-License-Identifier: Apache-2.0"), Whitespace("\n\n"), LineComment("// Test Nil control flow and testing messages"), Whitespace("\n\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n"), LineComment("// Basic Testing Methods"), Whitespace("\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n\n"), LineComment("// Test isNil / notNil"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 608, end: 610 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 611, end: 614 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("isNil"), span: Span { start: 615, end: 620 }, leading_trivia: [], trailing_trivia: [Whitespace("       "), LineComment("// => true")] }
Token { kind: Identifier("result2"), span: Span { start: 638, end: 645 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 646, end: 648 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 649, end: 652 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("notNil"), span: Span { start: 653, end: 659 }, leading_trivia: [], trailing_trivia: [Whitespace("      "), LineComment("// => false")] }
Token { kind: Identifier("result3"), span: Span { start: 1172, end: 1179 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n"), LineComment("// Control Flow Methods"), Whitespace("\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n\n"), LineComment("// Test ifNil: evaluates the block"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1180, end: 1182 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 1183, end: 1186 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNil:"), span: Span { start: 1187, end: 1193 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1194, end: 1195 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: String("default"), span: Span { start: 1195, end: 1204 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1204, end: 1205 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result4"), span: Span { start: 1259, end: 1266 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Test ifNotNil: returns nil (block not evaluated)"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1267, end: 1269 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 1270, end: 1273 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNotNil:"), span: Span { start: 1274, end: 1283 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1284, end: 1285 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1285, end: 1286 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("val"), span: Span { start: 1286, end: 1289 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1290, end: 1291 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("val"), span: Span { start: 1292, end: 1295 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 1296, end: 1297 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 1298, end: 1299 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1299, end: 1300 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result5"), span: Span { start: 1345, end: 1352 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Test ifNil:ifNotNil: evaluates nilBlock"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1353, end: 1355 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 1356, end: 1359 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNil:"), span: Span { start: 1360, end: 1366 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1367, end: 1368 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: String("was nil"), span: Span { start: 1368, end: 1377 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1377, end: 1378 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNotNil:"), span: Span { start: 1379, end: 1388 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1389, end: 1390 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1390, end: 1391 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("val"), span: Span { start: 1391, end: 1394 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1395, end: 1396 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("was not nil"), span: Span { start: 1397, end: 1410 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1410, end: 1411 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result6"), span: Span { start: 1473, end: 1480 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Test ifNotNil:ifNil: (reversed order) evaluates nilBlock"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1481, end: 1483 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 1484, end: 1487 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNotNil:"), span: Span { start: 1488, end: 1497 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1498, end: 1499 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1499, end: 1500 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("val"), span: Span { start: 1500, end: 1503 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1504, end: 1505 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("was not nil"), span: Span { start: 1506, end: 1519 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1519, end: 1520 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNil:"), span: Span { start: 1521, end: 1527 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1528, end: 1529 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: String("was nil"), span: Span { start: 1529, end: 1538 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1538, end: 1539 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result7"), span: Span { start: 2055, end: 2062 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n"), LineComment("// Copy Operations (Singleton)"), Whitespace("\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n\n"), LineComment("// Test copy operations return self (singleton)"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2063, end: 2065 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 2066, end: 2069 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("copy"), span: Span { start: 2070, end: 2074 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result8"), span: Span { start: 2075, end: 2082 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2083, end: 2085 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 2086, end: 2089 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("deepCopy"), span: Span { start: 2090, end: 2098 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result9"), span: Span { start: 2099, end: 2106 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2107, end: 2109 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 2110, end: 2113 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("shallowCopy"), span: Span { start: 2114, end: 2125 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result10"), span: Span { start: 2144, end: 2152 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Test describe"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2153, end: 2155 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 2156, end: 2159 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("describe"), span: Span { start: 2160, end: 2168 }, leading_trivia: [], trailing_trivia: [Whitespace("   "), LineComment("// => \"nil\"")] }
Token { kind: Identifier("result11"), span: Span { start: 2713, end: 2721 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n"), LineComment("// Edge Cases: Chaining and Composition"), Whitespace("\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n\n"), LineComment("// Chaining: use ifNil: result in further computation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2722, end: 2724 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftParen, span: Span { start: 2725, end: 2726 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("nil"), span: Span { start: 2726, end: 2729 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNil:"), span: Span { start: 2730, end: 2736 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2737, end: 2738 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("10"), span: Span { start: 2738, end: 2740 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2740, end: 2741 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightParen, span: Span { start: 2741, end: 2742 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2743, end: 2744 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("5"), span: Span { start: 2745, end: 2746 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => 15")] }
Token { kind: Identifier("result12"), span: Span { start: 2806, end: 2814 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Chaining: ifNil: with message send on result"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2815, end: 2817 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftParen, span: Span { start: 2818, end: 2819 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("nil"), span: Span { start: 2819, end: 2822 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNil:"), span: Span { start: 2823, end: 2829 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2830, end: 2831 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: String("hello"), span: Span { start: 2831, end: 2838 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2838, end: 2839 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightParen, span: Span { start: 2839, end: 2840 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("uppercase"), span: Span { start: 2841, end: 2850 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => \"HELLO\"")] }
Token { kind: Identifier("result13"), span: Span { start: 2928, end: 2936 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Nested ifNil: - outer nil, inner returns value from block"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2937, end: 2939 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 2940, end: 2943 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNil:"), span: Span { start: 2944, end: 2950 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2951, end: 2952 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("nil"), span: Span { start: 2952, end: 2955 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNil:"), span: Span { start: 2956, end: 2962 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2963, end: 2964 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: String("nested default"), span: Span { start: 2964, end: 2980 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2980, end: 2981 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2981, end: 2982 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => \"nested default\"")] }
Token { kind: Identifier("result14"), span: Span { start: 3041, end: 3049 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Block that itself returns nil"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3050, end: 3052 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 3053, end: 3056 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNil:"), span: Span { start: 3057, end: 3063 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 3064, end: 3065 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("nil"), span: Span { start: 3065, end: 3068 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3068, end: 3069 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => nil")] }
Token { kind: Identifier("result15"), span: Span { start: 3582, end: 3590 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n"), LineComment("// Edge Cases: Equality and Identity"), Whitespace("\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n\n"), LineComment("// nil equality with itself"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3591, end: 3593 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 3594, end: 3597 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("=:="), span: Span { start: 3598, end: 3601 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 3602, end: 3605 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => true")] }
Token { kind: Identifier("result16"), span: Span { start: 3655, end: 3663 }, leading_trivia: [Whitespace("\n\n"), LineComment("// nil inequality with other values"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3664, end: 3666 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 3667, end: 3670 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("=:="), span: Span { start: 3671, end: 3674 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 3675, end: 3676 }, leading_trivia: [], trailing_trivia: [Whitespace("    "), LineComment("// => false")] }
Token { kind: Identifier("result17"), span: Span { start: 3692, end: 3700 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3701, end: 3703 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 3704, end: 3707 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("=:="), span: Span { start: 3708, end: 3711 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String(""), span: Span { start: 3712, end: 3714 }, leading_trivia: [], trailing_trivia: [Whitespace("   "), LineComment("// => false")] }
Token { kind: Identifier("result18"), span: Span { start: 3729, end: 3737 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3738, end: 3740 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 3741, end: 3744 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("=:="), span: Span { start: 3745, end: 3748 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("false"), span: Span { start: 3749, end: 3754 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => false (nil is not false!)")] }
Token { kind: Identifier("result19"), span: Span { start: 4303, end: 4311 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n"), LineComment("// Edge Cases: Boolean Logic Integration"), Whitespace("\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n\n"), LineComment("// Combining isNil with boolean logic"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 4312, end: 4314 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 4315, end: 4318 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("isNil"), span: Span { start: 4319, end: 4324 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("and:"), span: Span { start: 4325, end: 4329 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 4330, end: 4331 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("true"), span: Span { start: 4331, end: 4335 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 4335, end: 4336 }, leading_trivia: [], trailing_trivia: [Whitespace("   "), LineComment("// => true")] }
Token { kind: Identifier("result20"), span: Span { start: 4350, end: 4358 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 4359, end: 4361 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 4362, end: 4365 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("isNil"), span: Span { start: 4366, end: 4371 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("or:"), span: Span { start: 4372, end: 4375 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 4376, end: 4377 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("false"), span: Span { start: 4377, end: 4382 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 4382, end: 4383 }, leading_trivia: [], trailing_trivia: [Whitespace("   "), LineComment("// => true (short-circuits)")] }
Token { kind: Identifier("result21"), span: Span { start: 4414, end: 4422 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 4423, end: 4425 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 4426, end: 4429 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("notNil"), span: Span { start: 4430, end: 4436 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("and:"), span: Span { start: 4437, end: 4441 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 4442, end: 4443 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("true"), span: Span { start: 4443, end: 4447 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 4447, end: 4448 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => false (short-circuits)")] }
Token { kind: Identifier("result22"), span: Span { start: 4479, end: 4487 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 4488, end: 4490 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 4491, end: 4494 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("notNil"), span: Span { start: 4495, end: 4501 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("or:"), span: Span { start: 4502, end: 4505 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 4506, end: 4507 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("true"), span: Span { start: 4507, end: 4511 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 4511, end: 4512 }, leading_trivia: [], trailing_trivia: [Whitespace("   "), LineComment("// => true")] }
Token { kind: Identifier("result23"), span: Span { start: 4568, end: 4576 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Using isNil result in ifTrue:ifFalse:"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 4577, end: 4579 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 4580, end: 4583 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("isNil"), span: Span { start: 4584, end: 4589 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifTrue:"), span: Span { start: 4590, end: 4597 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 4598, end: 4599 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: String("is nil"), span: Span { start: 4599, end: 4607 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 4607, end: 4608 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifFalse:"), span: Span { start: 4609, end: 4617 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 4618, end: 4619 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: String("not nil"), span: Span { start: 4619, end: 4628 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 4628, end: 4629 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => \"is nil\"")] }
Token { kind: Identifier("result24"), span: Span { start: 5150, end: 5158 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n"), LineComment("// Edge Cases: Block Expressions"), Whitespace("\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n\n"), LineComment("// ifNil: with arithmetic in block"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 5159, end: 5161 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 5162, end: 5165 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNil:"), span: Span { start: 5166, end: 5172 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 5173, end: 5174 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("1"), span: Span { start: 5174, end: 5175 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 5176, end: 5177 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 5178, end: 5179 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("*"), span: Span { start: 5180, end: 5181 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("3"), span: Span { start: 5182, end: 5183 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 5183, end: 5184 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => 7")] }
Token { kind: Identifier("result25"), span: Span { start: 5238, end: 5246 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ifNotNil: block should NOT be evaluated"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 5247, end: 5249 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 5250, end: 5253 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNotNil:"), span: Span { start: 5254, end: 5263 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 5264, end: 5265 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 5265, end: 5266 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("val"), span: Span { start: 5266, end: 5269 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 5270, end: 5271 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("val"), span: Span { start: 5272, end: 5275 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 5276, end: 5277 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("100"), span: Span { start: 5278, end: 5281 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("*"), span: Span { start: 5282, end: 5283 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 5284, end: 5285 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 5285, end: 5286 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => nil (block not evaluated)")] }
Token { kind: Identifier("check1"), span: Span { start: 5865, end: 5871 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n"), LineComment("// Edge Cases: Multiple Consecutive Checks  "), Whitespace("\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n\n"), LineComment("// Multiple isNil checks in sequence (should all be consistent)"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 5872, end: 5874 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 5875, end: 5878 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("isNil"), span: Span { start: 5879, end: 5884 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("check2"), span: Span { start: 5885, end: 5891 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 5892, end: 5894 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 5895, end: 5898 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("isNil"), span: Span { start: 5899, end: 5904 }, leading_trivia: [], trailing_trivia: [Whitespace("  ")] }
Token { kind: Identifier("check3"), span: Span { start: 5907, end: 5913 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 5914, end: 5916 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 5917, end: 5920 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("isNil"), span: Span { start: 5921, end: 5926 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result26"), span: Span { start: 5927, end: 5935 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 5936, end: 5938 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("check1"), span: Span { start: 5939, end: 5945 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("and:"), span: Span { start: 5946, end: 5950 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 5951, end: 5952 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("check2"), span: Span { start: 5952, end: 5958 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("and:"), span: Span { start: 5959, end: 5963 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 5964, end: 5965 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("check3"), span: Span { start: 5965, end: 5971 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 5971, end: 5972 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 5972, end: 5973 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => true")] }
Token { kind: Identifier("maybeValue"), span: Span { start: 6022, end: 6032 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Assigning nil and then checking"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 6033, end: 6035 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 6036, end: 6039 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result27"), span: Span { start: 6040, end: 6048 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 6049, end: 6051 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("maybeValue"), span: Span { start: 6052, end: 6062 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("isNil"), span: Span { start: 6063, end: 6068 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => true")] }
Token { kind: Identifier("result28"), span: Span { start: 6606, end: 6614 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n"), LineComment("// Edge Cases: ifNil: vs ifNotNil: Return Values"), Whitespace("\n"), LineComment("// ═══════════════════════════════════════════════════════════════════════"), Whitespace("\n\n"), LineComment("// ifNil: returns block result, not nil"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 6615, end: 6617 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 6618, end: 6621 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNil:"), span: Span { start: 6622, end: 6628 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 6629, end: 6630 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("42"), span: Span { start: 6630, end: 6632 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 6632, end: 6633 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => 42 (not nil)")] }
Token { kind: Identifier("result29"), span: Span { start: 6694, end: 6702 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ifNotNil: on nil returns nil itself"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 6703, end: 6705 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("nil"), span: Span { start: 6706, end: 6709 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNotNil:"), span: Span { start: 6710, end: 6719 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 6720, end: 6721 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("42"), span: Span { start: 6721, end: 6723 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 6723, end: 6724 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => nil (block not evaluated)")] }
Token { kind: Identifier("result30"), span: Span { start: 6828, end: 6836 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Verify ifNotNil: truly doesn't evaluate by checking return is nil"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 6837, end: 6839 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftParen, span: Span { start: 6840, end: 6841 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("nil"), span: Span { start: 6841, end: 6844 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifNotNil:"), span: Span { start: 6845, end: 6854 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 6855, end: 6856 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("9999"), span: Span { start: 6856, end: 6860 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 6860, end: 6861 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightParen, span: Span { start: 6861, end: 6862 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("isNil"), span: Span { start: 6863, end: 6868 }, leading_trivia: [], trailing_trivia: [Whitespace("  "), LineComment("// => true")] }
Token { kind: Eof, span: Span { start: 6881, end: 6881 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
