---
source: test-package-compiler/tests/compiler_tests.rs
expression: output
---
AST:
Module {
    classes: [],
    method_definitions: [],
    expressions: [
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Copyright 2026 James Casey",
                        span: Span {
                            start: 268,
                            end: 278,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "SPDX-License-Identifier: Apache-2.0",
                        span: Span {
                            start: 268,
                            end: 278,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Test all unary operators/messages for compilation verification",
                        span: Span {
                            start: 268,
                            end: 278,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Comprehensive coverage of unary operations supported in Core Erlang codegen",
                        span: Span {
                            start: 268,
                            end: 278,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "===== Integer Unary Operations =====",
                        span: Span {
                            start: 268,
                            end: 278,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Negation",
                        span: Span {
                            start: 268,
                            end: 278,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "Should generate: call \"erlang\":\"-\"(0, 5)",
                        span: Span {
                            start: 284,
                            end: 291,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "negatedNum",
                        span: Span {
                            start: 268,
                            end: 278,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            5,
                        ),
                        Span {
                            start: 282,
                            end: 283,
                        },
                    ),
                    selector: Unary(
                        "negated",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 282,
                        end: 291,
                    },
                },
                span: Span {
                    start: 268,
                    end: 291,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Absolute value",
                        span: Span {
                            start: 356,
                            end: 364,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "Should generate case expression for abs",
                        span: Span {
                            start: 374,
                            end: 377,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "absValue",
                        span: Span {
                            start: 356,
                            end: 364,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Parenthesized {
                        expression: Literal(
                            Integer(
                                -10,
                            ),
                            Span {
                                start: 369,
                                end: 372,
                            },
                        ),
                        span: Span {
                            start: 368,
                            end: 373,
                        },
                    },
                    selector: Unary(
                        "abs",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 368,
                        end: 377,
                    },
                },
                span: Span {
                    start: 356,
                    end: 377,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Zero test",
                        span: Span {
                            start: 436,
                            end: 443,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "isZero1",
                        span: Span {
                            start: 436,
                            end: 443,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            0,
                        ),
                        Span {
                            start: 447,
                            end: 448,
                        },
                    ),
                    selector: Unary(
                        "isZero",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 447,
                        end: 455,
                    },
                },
                span: Span {
                    start: 436,
                    end: 455,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "isZero2",
                        span: Span {
                            start: 456,
                            end: 463,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            42,
                        ),
                        Span {
                            start: 467,
                            end: 469,
                        },
                    ),
                    selector: Unary(
                        "isZero",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 467,
                        end: 476,
                    },
                },
                span: Span {
                    start: 456,
                    end: 476,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Even/Odd tests",
                        span: Span {
                            start: 496,
                            end: 505,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "evenCheck",
                        span: Span {
                            start: 496,
                            end: 505,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            4,
                        ),
                        Span {
                            start: 509,
                            end: 510,
                        },
                    ),
                    selector: Unary(
                        "isEven",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 509,
                        end: 517,
                    },
                },
                span: Span {
                    start: 496,
                    end: 517,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "oddCheck",
                        span: Span {
                            start: 518,
                            end: 526,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            7,
                        ),
                        Span {
                            start: 530,
                            end: 531,
                        },
                    ),
                    selector: Unary(
                        "isOdd",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 530,
                        end: 537,
                    },
                },
                span: Span {
                    start: 518,
                    end: 537,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== Boolean Unary Operations =====",
                        span: Span {
                            start: 594,
                            end: 601,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Logical NOT",
                        span: Span {
                            start: 594,
                            end: 601,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "notTrue",
                        span: Span {
                            start: 594,
                            end: 601,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "true",
                            span: Span {
                                start: 605,
                                end: 609,
                            },
                        },
                    ),
                    selector: Unary(
                        "not",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 605,
                        end: 613,
                    },
                },
                span: Span {
                    start: 594,
                    end: 613,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "notFalse",
                        span: Span {
                            start: 614,
                            end: 622,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "false",
                            span: Span {
                                start: 626,
                                end: 631,
                            },
                        },
                    ),
                    selector: Unary(
                        "not",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 626,
                        end: 635,
                    },
                },
                span: Span {
                    start: 614,
                    end: 635,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== Complex Unary Expressions =====",
                        span: Span {
                            start: 704,
                            end: 711,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Chained unary messages",
                        span: Span {
                            start: 704,
                            end: 711,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "chained",
                        span: Span {
                            start: 704,
                            end: 711,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: MessageSend {
                        receiver: Literal(
                            Integer(
                                5,
                            ),
                            Span {
                                start: 715,
                                end: 716,
                            },
                        ),
                        selector: Unary(
                            "negated",
                        ),
                        arguments: [],
                        is_cast: false,
                        span: Span {
                            start: 715,
                            end: 724,
                        },
                    },
                    selector: Unary(
                        "abs",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 715,
                        end: 728,
                    },
                },
                span: Span {
                    start: 704,
                    end: 728,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Unary in conditional with defined variable",
                        span: Span {
                            start: 776,
                            end: 783,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "counter",
                        span: Span {
                            start: 776,
                            end: 783,
                        },
                    },
                ),
                value: Literal(
                    Integer(
                        0,
                    ),
                    Span {
                        start: 787,
                        end: 788,
                    },
                ),
                span: Span {
                    start: 776,
                    end: 788,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result",
                        span: Span {
                            start: 789,
                            end: 795,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Parenthesized {
                        expression: MessageSend {
                            receiver: Identifier(
                                Identifier {
                                    name: "counter",
                                    span: Span {
                                        start: 800,
                                        end: 807,
                                    },
                                },
                            ),
                            selector: Unary(
                                "isZero",
                            ),
                            arguments: [],
                            is_cast: false,
                            span: Span {
                                start: 800,
                                end: 814,
                            },
                        },
                        span: Span {
                            start: 799,
                            end: 815,
                        },
                    },
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifTrue:",
                                span: Span {
                                    start: 816,
                                    end: 823,
                                },
                            },
                            KeywordPart {
                                keyword: "ifFalse:",
                                span: Span {
                                    start: 828,
                                    end: 836,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            Integer(
                                                0,
                                            ),
                                            Span {
                                                start: 825,
                                                end: 826,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 824,
                                    end: 827,
                                },
                            },
                        ),
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Identifier(
                                            Identifier {
                                                name: "counter",
                                                span: Span {
                                                    start: 838,
                                                    end: 845,
                                                },
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 837,
                                    end: 846,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 799,
                        end: 846,
                    },
                },
                span: Span {
                    start: 789,
                    end: 846,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Unary with block parameter",
                        span: Span {
                            start: 878,
                            end: 888,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "blockUnary",
                        span: Span {
                            start: 878,
                            end: 888,
                        },
                    },
                ),
                value: Block(
                    Block {
                        parameters: [
                            BlockParameter {
                                name: "x",
                                span: Span {
                                    start: 894,
                                    end: 895,
                                },
                            },
                        ],
                        body: [
                            ExpressionStatement {
                                comments: CommentAttachment {
                                    leading: [],
                                    trailing: None,
                                },
                                expression: MessageSend {
                                    receiver: Identifier(
                                        Identifier {
                                            name: "x",
                                            span: Span {
                                                start: 898,
                                                end: 899,
                                            },
                                        },
                                    ),
                                    selector: Unary(
                                        "negated",
                                    ),
                                    arguments: [],
                                    is_cast: false,
                                    span: Span {
                                        start: 898,
                                        end: 907,
                                    },
                                },
                                preceding_blank_line: false,
                            },
                        ],
                        span: Span {
                            start: 892,
                            end: 908,
                        },
                    },
                ),
                span: Span {
                    start: 878,
                    end: 908,
                },
            },
            preceding_blank_line: true,
        },
    ],
    span: Span {
        start: 268,
        end: 908,
    },
    file_leading_comments: [],
    file_trailing_comments: [],
}
