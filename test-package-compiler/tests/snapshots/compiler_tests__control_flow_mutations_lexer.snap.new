---
source: test-package-compiler/tests/compiler_tests.rs
assertion_line: 50
expression: output
---
Token { kind: Identifier("count"), span: Span { start: 376, end: 381 }, leading_trivia: [LineComment("// Copyright 2026 James Casey"), Whitespace("\n"), LineComment("// SPDX-License-Identifier: Apache-2.0"), Whitespace("\n\n"), LineComment("// Test control flow constructs with variable and field mutations"), Whitespace("\n"), LineComment("// Per BT-90 design: literal blocks in control flow positions can mutate"), Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// Local Variable Mutations"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n"), LineComment("// Simple whileTrue with local variable mutation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 382, end: 384 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 385, end: 386 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 386, end: 387 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 388, end: 389 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Identifier("count"), span: Span { start: 389, end: 394 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<"), span: Span { start: 395, end: 396 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("3"), span: Span { start: 397, end: 398 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 398, end: 399 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 400, end: 410 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 411, end: 412 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("count"), span: Span { start: 412, end: 417 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 418, end: 420 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("count"), span: Span { start: 421, end: 426 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 427, end: 428 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 429, end: 430 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 430, end: 431 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 431, end: 432 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("count2"), span: Span { start: 485, end: 491 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: count = 3"), Whitespace("\n\n"), LineComment("// whileFalse with mutation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 492, end: 494 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("10"), span: Span { start: 495, end: 497 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 497, end: 498 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 499, end: 500 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Identifier("count2"), span: Span { start: 500, end: 506 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("="), span: Span { start: 507, end: 508 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 509, end: 510 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 510, end: 511 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileFalse:"), span: Span { start: 512, end: 523 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 524, end: 525 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("count2"), span: Span { start: 525, end: 531 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 532, end: 534 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("count2"), span: Span { start: 535, end: 541 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("-"), span: Span { start: 542, end: 543 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 544, end: 545 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 545, end: 546 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 546, end: 547 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("sum"), span: Span { start: 615, end: 618 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: count2 = 0"), Whitespace("\n\n"), LineComment("// Multiple variables mutated in one loop"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 619, end: 621 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 622, end: 623 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 623, end: 624 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("product"), span: Span { start: 625, end: 632 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 633, end: 635 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 636, end: 637 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 637, end: 638 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("i"), span: Span { start: 639, end: 640 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 641, end: 643 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 644, end: 645 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 645, end: 646 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 647, end: 648 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Identifier("i"), span: Span { start: 648, end: 649 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<="), span: Span { start: 650, end: 652 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("3"), span: Span { start: 653, end: 654 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 654, end: 655 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 656, end: 666 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 667, end: 668 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("sum"), span: Span { start: 673, end: 676 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 677, end: 679 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("sum"), span: Span { start: 680, end: 683 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 684, end: 685 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("i"), span: Span { start: 686, end: 687 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 687, end: 688 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("product"), span: Span { start: 693, end: 700 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 701, end: 703 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("product"), span: Span { start: 704, end: 711 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("*"), span: Span { start: 712, end: 713 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("i"), span: Span { start: 714, end: 715 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 715, end: 716 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("i"), span: Span { start: 721, end: 722 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 723, end: 725 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("i"), span: Span { start: 726, end: 727 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 728, end: 729 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 730, end: 731 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 732, end: 733 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 733, end: 734 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("counter"), span: Span { start: 948, end: 955 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: sum = 6 (1+2+3), product = 6 (1*2*3), i = 4"), Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// Control Flow with Index Variables"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n"), LineComment("// timesRepeat with mutation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 956, end: 958 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 959, end: 960 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 960, end: 961 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("5"), span: Span { start: 962, end: 963 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("timesRepeat:"), span: Span { start: 964, end: 976 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 977, end: 978 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("counter"), span: Span { start: 978, end: 985 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 986, end: 988 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("counter"), span: Span { start: 989, end: 996 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 997, end: 998 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 999, end: 1000 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1000, end: 1001 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1001, end: 1002 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("total"), span: Span { start: 1066, end: 1071 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: counter = 5"), Whitespace("\n\n"), LineComment("// to:do: with index and accumulator"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1072, end: 1074 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1075, end: 1076 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1076, end: 1077 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("1"), span: Span { start: 1078, end: 1079 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("to:"), span: Span { start: 1080, end: 1083 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("10"), span: Span { start: 1084, end: 1086 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("do:"), span: Span { start: 1087, end: 1090 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1091, end: 1092 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1092, end: 1093 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1093, end: 1094 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1095, end: 1096 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("total"), span: Span { start: 1097, end: 1102 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1103, end: 1105 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("total"), span: Span { start: 1106, end: 1111 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 1112, end: 1113 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("n"), span: Span { start: 1114, end: 1115 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1115, end: 1116 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1116, end: 1117 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("numbers"), span: Span { start: 1314, end: 1321 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: total = 55 (sum 1..10)"), Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// Collection Iteration with Mutations"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n"), LineComment("// Array do: with accumulation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1322, end: 1324 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Hash, span: Span { start: 1325, end: 1326 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 1326, end: 1327 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("1"), span: Span { start: 1327, end: 1328 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: BinarySelector(","), span: Span { start: 1328, end: 1329 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 1330, end: 1331 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: BinarySelector(","), span: Span { start: 1331, end: 1332 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("3"), span: Span { start: 1333, end: 1334 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: BinarySelector(","), span: Span { start: 1334, end: 1335 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("4"), span: Span { start: 1336, end: 1337 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: BinarySelector(","), span: Span { start: 1337, end: 1338 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("5"), span: Span { start: 1339, end: 1340 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1340, end: 1341 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1341, end: 1342 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("arraySum"), span: Span { start: 1343, end: 1351 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1352, end: 1354 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1355, end: 1356 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1356, end: 1357 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("numbers"), span: Span { start: 1358, end: 1365 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("do:"), span: Span { start: 1366, end: 1369 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1370, end: 1371 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1371, end: 1372 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1372, end: 1373 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1374, end: 1375 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("arraySum"), span: Span { start: 1376, end: 1384 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1385, end: 1387 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("arraySum"), span: Span { start: 1388, end: 1396 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 1397, end: 1398 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("n"), span: Span { start: 1399, end: 1400 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1400, end: 1401 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1401, end: 1402 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("evenCount"), span: Span { start: 1491, end: 1500 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: arraySum = 15"), Whitespace("\n\n"), LineComment("// collect: (returns new collection, but can mutate locals)"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1501, end: 1503 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1504, end: 1505 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1505, end: 1506 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("doubled"), span: Span { start: 1507, end: 1514 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1515, end: 1517 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("numbers"), span: Span { start: 1518, end: 1525 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("collect:"), span: Span { start: 1526, end: 1534 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1535, end: 1536 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1536, end: 1537 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1537, end: 1538 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1539, end: 1540 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("evenCount"), span: Span { start: 1545, end: 1554 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1555, end: 1557 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("evenCount"), span: Span { start: 1558, end: 1567 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 1568, end: 1569 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftParen, span: Span { start: 1570, end: 1571 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1571, end: 1572 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("%"), span: Span { start: 1573, end: 1574 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 1575, end: 1576 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("="), span: Span { start: 1577, end: 1578 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1579, end: 1580 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifTrue:"), span: Span { start: 1581, end: 1588 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1589, end: 1590 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("1"), span: Span { start: 1590, end: 1591 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1591, end: 1592 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifFalse:"), span: Span { start: 1593, end: 1601 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1602, end: 1603 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("0"), span: Span { start: 1603, end: 1604 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1604, end: 1605 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightParen, span: Span { start: 1605, end: 1606 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1606, end: 1607 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1612, end: 1613 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("*"), span: Span { start: 1614, end: 1615 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 1616, end: 1617 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1618, end: 1619 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1619, end: 1620 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("matchCount"), span: Span { start: 1703, end: 1713 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: evenCount = 2, doubled = #[2,4,6,8,10]"), Whitespace("\n\n"), LineComment("// select: with side effects"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1714, end: 1716 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1717, end: 1718 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1718, end: 1719 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("evens"), span: Span { start: 1720, end: 1725 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1726, end: 1728 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("numbers"), span: Span { start: 1729, end: 1736 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("select:"), span: Span { start: 1737, end: 1744 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1745, end: 1746 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1746, end: 1747 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1747, end: 1748 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1749, end: 1750 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("matchCount"), span: Span { start: 1755, end: 1765 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1766, end: 1768 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("matchCount"), span: Span { start: 1769, end: 1779 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 1780, end: 1781 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 1782, end: 1783 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1783, end: 1784 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1789, end: 1790 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("%"), span: Span { start: 1791, end: 1792 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 1793, end: 1794 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("="), span: Span { start: 1795, end: 1796 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1797, end: 1798 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1799, end: 1800 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1800, end: 1801 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("maxSeen"), span: Span { start: 1886, end: 1893 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: matchCount = 5, evens = #[2,4]"), Whitespace("\n\n"), LineComment("// inject:into: with external mutation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1894, end: 1896 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1897, end: 1898 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1898, end: 1899 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("finalSum"), span: Span { start: 1900, end: 1908 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1909, end: 1911 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("numbers"), span: Span { start: 1912, end: 1919 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("inject:"), span: Span { start: 1920, end: 1927 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 1928, end: 1929 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("into:"), span: Span { start: 1930, end: 1935 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1936, end: 1937 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Colon, span: Span { start: 1937, end: 1938 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("acc"), span: Span { start: 1938, end: 1941 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Colon, span: Span { start: 1942, end: 1943 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1943, end: 1944 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Pipe, span: Span { start: 1945, end: 1946 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("n"), span: Span { start: 1951, end: 1952 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector(">"), span: Span { start: 1953, end: 1954 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("maxSeen"), span: Span { start: 1955, end: 1962 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("ifTrue:"), span: Span { start: 1963, end: 1970 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 1971, end: 1972 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("maxSeen"), span: Span { start: 1972, end: 1979 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 1980, end: 1982 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("n"), span: Span { start: 1983, end: 1984 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1984, end: 1985 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 1985, end: 1986 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("acc"), span: Span { start: 1991, end: 1994 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 1995, end: 1996 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("n"), span: Span { start: 1997, end: 1998 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 1999, end: 2000 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2000, end: 2001 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("outerSum"), span: Span { start: 2195, end: 2203 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: maxSeen = 5, finalSum = 15"), Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// Nested Control Flow"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n"), LineComment("// Nested loops with multiple mutations"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2204, end: 2206 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 2207, end: 2208 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2208, end: 2209 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("innerSum"), span: Span { start: 2210, end: 2218 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2219, end: 2221 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 2222, end: 2223 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2223, end: 2224 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("x"), span: Span { start: 2225, end: 2226 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2227, end: 2229 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2230, end: 2231 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2231, end: 2232 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 2233, end: 2234 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Identifier("x"), span: Span { start: 2234, end: 2235 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<="), span: Span { start: 2236, end: 2238 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("3"), span: Span { start: 2239, end: 2240 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2240, end: 2241 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 2242, end: 2252 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2253, end: 2254 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("y"), span: Span { start: 2259, end: 2260 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2261, end: 2263 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2264, end: 2265 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2265, end: 2266 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 2271, end: 2272 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [] }
Token { kind: Identifier("y"), span: Span { start: 2272, end: 2273 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<="), span: Span { start: 2274, end: 2276 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 2277, end: 2278 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2278, end: 2279 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 2280, end: 2290 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2291, end: 2292 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("innerSum"), span: Span { start: 2301, end: 2309 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2310, end: 2312 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("innerSum"), span: Span { start: 2313, end: 2321 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2322, end: 2323 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2324, end: 2325 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2325, end: 2326 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("y"), span: Span { start: 2335, end: 2336 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2337, end: 2339 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("y"), span: Span { start: 2340, end: 2341 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2342, end: 2343 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2344, end: 2345 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2350, end: 2351 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2351, end: 2352 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("outerSum"), span: Span { start: 2357, end: 2365 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2366, end: 2368 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("outerSum"), span: Span { start: 2369, end: 2377 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2378, end: 2379 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("innerSum"), span: Span { start: 2380, end: 2388 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2388, end: 2389 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("x"), span: Span { start: 2394, end: 2395 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2396, end: 2398 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("x"), span: Span { start: 2399, end: 2400 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2401, end: 2402 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2403, end: 2404 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2405, end: 2406 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2406, end: 2407 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("Counter"), span: Span { start: 2586, end: 2593 }, leading_trivia: [Whitespace("\n"), LineComment("// Expected: innerSum = 6, outerSum = (2 + 4 + 6) = 12"), Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// Field Mutations (Actor State)"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2594, end: 2596 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("class"), span: Span { start: 2597, end: 2602 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2603, end: 2604 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("state:"), span: Span { start: 2609, end: 2615 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("value:"), span: Span { start: 2616, end: 2622 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("Integer"), span: Span { start: 2623, end: 2630 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("="), span: Span { start: 2631, end: 2632 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 2633, end: 2634 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2634, end: 2635 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("increment"), span: Span { start: 2645, end: 2654 }, leading_trivia: [Whitespace("\n    \n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 2655, end: 2657 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 2666, end: 2667 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2667, end: 2671 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2671, end: 2672 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2672, end: 2677 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<"), span: Span { start: 2678, end: 2679 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("10"), span: Span { start: 2680, end: 2682 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2682, end: 2683 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 2684, end: 2694 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2695, end: 2696 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2709, end: 2713 }, leading_trivia: [Whitespace("\n            ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2713, end: 2714 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2714, end: 2719 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2720, end: 2722 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("self"), span: Span { start: 2723, end: 2727 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2727, end: 2728 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2728, end: 2733 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2734, end: 2735 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2736, end: 2737 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2746, end: 2747 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2747, end: 2748 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Caret, span: Span { start: 2757, end: 2758 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2758, end: 2762 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2762, end: 2763 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2763, end: 2768 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2768, end: 2769 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("incrementBy:"), span: Span { start: 2779, end: 2791 }, leading_trivia: [Whitespace("\n    \n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("amount"), span: Span { start: 2792, end: 2798 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 2799, end: 2801 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("amount"), span: Span { start: 2810, end: 2816 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("timesRepeat:"), span: Span { start: 2817, end: 2829 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2830, end: 2831 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2844, end: 2848 }, leading_trivia: [Whitespace("\n            ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2848, end: 2849 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2849, end: 2854 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2855, end: 2857 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("self"), span: Span { start: 2858, end: 2862 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2862, end: 2863 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2863, end: 2868 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 2869, end: 2870 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2871, end: 2872 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 2881, end: 2882 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2882, end: 2883 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Caret, span: Span { start: 2892, end: 2893 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2893, end: 2897 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2897, end: 2898 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2898, end: 2903 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2903, end: 2904 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("multiplyFieldWithLoop"), span: Span { start: 2914, end: 2935 }, leading_trivia: [Whitespace("\n    \n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 2936, end: 2938 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result"), span: Span { start: 2947, end: 2953 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 2954, end: 2956 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 2957, end: 2958 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2958, end: 2959 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 2968, end: 2972 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 2972, end: 2973 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 2973, end: 2978 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("timesRepeat:"), span: Span { start: 2979, end: 2991 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 2992, end: 2993 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result"), span: Span { start: 3006, end: 3012 }, leading_trivia: [Whitespace("\n            ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3013, end: 3015 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("result"), span: Span { start: 3016, end: 3022 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("*"), span: Span { start: 3023, end: 3024 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 3025, end: 3026 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3035, end: 3036 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3036, end: 3037 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 3046, end: 3050 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3050, end: 3051 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("result"), span: Span { start: 3051, end: 3057 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3058, end: 3060 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("result"), span: Span { start: 3061, end: 3067 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3067, end: 3068 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Caret, span: Span { start: 3077, end: 3078 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("result"), span: Span { start: 3078, end: 3084 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3084, end: 3085 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("complexMutation"), span: Span { start: 3095, end: 3110 }, leading_trivia: [Whitespace("\n    \n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: FatArrow, span: Span { start: 3111, end: 3113 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("temp"), span: Span { start: 3166, end: 3170 }, leading_trivia: [Whitespace("\n        "), LineComment("// Mix of field and local mutations"), Whitespace("\n        ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3171, end: 3173 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 3174, end: 3175 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3175, end: 3176 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 3185, end: 3186 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 3186, end: 3190 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3190, end: 3191 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 3191, end: 3196 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<"), span: Span { start: 3197, end: 3198 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("5"), span: Span { start: 3199, end: 3200 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3200, end: 3201 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 3202, end: 3212 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 3213, end: 3214 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("self"), span: Span { start: 3227, end: 3231 }, leading_trivia: [Whitespace("\n            ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3231, end: 3232 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 3232, end: 3237 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3238, end: 3240 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("self"), span: Span { start: 3241, end: 3245 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3245, end: 3246 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 3246, end: 3251 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 3252, end: 3253 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 3254, end: 3255 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3255, end: 3256 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("temp"), span: Span { start: 3269, end: 3273 }, leading_trivia: [Whitespace("\n            ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3274, end: 3276 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("temp"), span: Span { start: 3277, end: 3281 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 3282, end: 3283 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("self"), span: Span { start: 3284, end: 3288 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3288, end: 3289 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("value"), span: Span { start: 3289, end: 3294 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3303, end: 3304 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3304, end: 3305 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Caret, span: Span { start: 3314, end: 3315 }, leading_trivia: [Whitespace("\n        ")], trailing_trivia: [] }
Token { kind: Identifier("temp"), span: Span { start: 3315, end: 3319 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3319, end: 3320 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Keyword("state:"), span: Span { start: 3330, end: 3336 }, leading_trivia: [Whitespace("\n    \n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("result:"), span: Span { start: 3337, end: 3344 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("Integer"), span: Span { start: 3345, end: 3352 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("="), span: Span { start: 3353, end: 3354 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 3355, end: 3356 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3356, end: 3357 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3358, end: 3359 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3359, end: 3360 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("replCount"), span: Span { start: 3531, end: 3540 }, leading_trivia: [Whitespace("\n\n"), LineComment("// ========================================"), Whitespace("\n"), LineComment("// REPL Binding Updates"), Whitespace("\n"), LineComment("// ========================================"), Whitespace("\n\n"), LineComment("// After control flow, REPL should see updated bindings"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3541, end: 3543 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("0"), span: Span { start: 3544, end: 3545 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3545, end: 3546 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Integer("3"), span: Span { start: 3547, end: 3548 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("timesRepeat:"), span: Span { start: 3549, end: 3561 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 3562, end: 3563 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("replCount"), span: Span { start: 3563, end: 3572 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3573, end: 3575 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("replCount"), span: Span { start: 3576, end: 3585 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 3586, end: 3587 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 3588, end: 3589 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3589, end: 3590 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3590, end: 3591 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("a"), span: Span { start: 3670, end: 3671 }, leading_trivia: [Whitespace("\n"), LineComment("// REPL should now show: replCount = 3"), Whitespace("\n\n"), LineComment("// Multiple mutations visible in REPL"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3672, end: 3674 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 3675, end: 3676 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3676, end: 3677 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("b"), span: Span { start: 3678, end: 3679 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3680, end: 3682 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 3683, end: 3684 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3684, end: 3685 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: LeftBracket, span: Span { start: 3686, end: 3687 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Identifier("a"), span: Span { start: 3687, end: 3688 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("<"), span: Span { start: 3689, end: 3690 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("5"), span: Span { start: 3691, end: 3692 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3692, end: 3693 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Keyword("whileTrue:"), span: Span { start: 3694, end: 3704 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: LeftBracket, span: Span { start: 3705, end: 3706 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("a"), span: Span { start: 3711, end: 3712 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3713, end: 3715 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("a"), span: Span { start: 3716, end: 3717 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 3718, end: 3719 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("1"), span: Span { start: 3720, end: 3721 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3721, end: 3722 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("b"), span: Span { start: 3727, end: 3728 }, leading_trivia: [Whitespace("\n    ")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 3729, end: 3731 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Identifier("b"), span: Span { start: 3732, end: 3733 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("*"), span: Span { start: 3734, end: 3735 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 3736, end: 3737 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: RightBracket, span: Span { start: 3738, end: 3739 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
Token { kind: Period, span: Span { start: 3739, end: 3740 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Eof, span: Span { start: 3776, end: 3776 }, leading_trivia: [Whitespace("\n"), LineComment("// REPL should show: a = 5, b = 32"), Whitespace("\n")], trailing_trivia: [] }
