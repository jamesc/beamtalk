---
source: test-package-compiler/tests/compiler_tests.rs
expression: output
---
AST:
Module {
    classes: [],
    method_definitions: [],
    expressions: [
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Copyright 2026 James Casey",
                        span: Span {
                            start: 653,
                            end: 660,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "SPDX-License-Identifier: Apache-2.0",
                        span: Span {
                            start: 653,
                            end: 660,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Test non-nil objects' nil-testing protocol (inherited from Actor)",
                        span: Span {
                            start: 653,
                            end: 660,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 653,
                            end: 660,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Basic Testing Methods (Non-Nil Objects)",
                        span: Span {
                            start: 653,
                            end: 660,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 653,
                            end: 660,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Test isNil / notNil on integers",
                        span: Span {
                            start: 653,
                            end: 660,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> false",
                        span: Span {
                            start: 667,
                            end: 672,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result1",
                        span: Span {
                            start: 653,
                            end: 660,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            42,
                        ),
                        Span {
                            start: 664,
                            end: 666,
                        },
                    ),
                    selector: Unary(
                        "isNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 664,
                        end: 672,
                    },
                },
                span: Span {
                    start: 653,
                    end: 672,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> true",
                        span: Span {
                            start: 705,
                            end: 711,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result2",
                        span: Span {
                            start: 691,
                            end: 698,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            42,
                        ),
                        Span {
                            start: 702,
                            end: 704,
                        },
                    ),
                    selector: Unary(
                        "notNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 702,
                        end: 711,
                    },
                },
                span: Span {
                    start: 691,
                    end: 711,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> false (zero is not nil!)",
                        span: Span {
                            start: 741,
                            end: 746,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result3",
                        span: Span {
                            start: 728,
                            end: 735,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            0,
                        ),
                        Span {
                            start: 739,
                            end: 740,
                        },
                    ),
                    selector: Unary(
                        "isNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 739,
                        end: 746,
                    },
                },
                span: Span {
                    start: 728,
                    end: 746,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test isNil / notNil on strings",
                        span: Span {
                            start: 820,
                            end: 827,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> false",
                        span: Span {
                            start: 839,
                            end: 844,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result4",
                        span: Span {
                            start: 820,
                            end: 827,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "hello",
                        ),
                        Span {
                            start: 831,
                            end: 838,
                        },
                    ),
                    selector: Unary(
                        "isNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 831,
                        end: 844,
                    },
                },
                span: Span {
                    start: 820,
                    end: 844,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> true",
                        span: Span {
                            start: 878,
                            end: 884,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result5",
                        span: Span {
                            start: 859,
                            end: 866,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "hello",
                        ),
                        Span {
                            start: 870,
                            end: 877,
                        },
                    ),
                    selector: Unary(
                        "notNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 870,
                        end: 884,
                    },
                },
                span: Span {
                    start: 859,
                    end: 884,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> false (empty string is not nil!)",
                        span: Span {
                            start: 911,
                            end: 916,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result6",
                        span: Span {
                            start: 897,
                            end: 904,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "",
                        ),
                        Span {
                            start: 908,
                            end: 910,
                        },
                    ),
                    selector: Unary(
                        "isNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 908,
                        end: 916,
                    },
                },
                span: Span {
                    start: 897,
                    end: 916,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test isNil / notNil on booleans",
                        span: Span {
                            start: 999,
                            end: 1006,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> false",
                        span: Span {
                            start: 1015,
                            end: 1020,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result7",
                        span: Span {
                            start: 999,
                            end: 1006,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "true",
                            span: Span {
                                start: 1010,
                                end: 1014,
                            },
                        },
                    ),
                    selector: Unary(
                        "isNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 1010,
                        end: 1020,
                    },
                },
                span: Span {
                    start: 999,
                    end: 1020,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> true",
                        span: Span {
                            start: 1054,
                            end: 1060,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result8",
                        span: Span {
                            start: 1038,
                            end: 1045,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "true",
                            span: Span {
                                start: 1049,
                                end: 1053,
                            },
                        },
                    ),
                    selector: Unary(
                        "notNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 1049,
                        end: 1060,
                    },
                },
                span: Span {
                    start: 1038,
                    end: 1060,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> false (false is not nil!)",
                        span: Span {
                            start: 1093,
                            end: 1098,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result9",
                        span: Span {
                            start: 1076,
                            end: 1083,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "false",
                            span: Span {
                                start: 1087,
                                end: 1092,
                            },
                        },
                    ),
                    selector: Unary(
                        "isNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 1087,
                        end: 1098,
                    },
                },
                span: Span {
                    start: 1076,
                    end: 1098,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> true",
                        span: Span {
                            start: 1153,
                            end: 1159,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result10",
                        span: Span {
                            start: 1135,
                            end: 1143,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "false",
                            span: Span {
                                start: 1147,
                                end: 1152,
                            },
                        },
                    ),
                    selector: Unary(
                        "notNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 1147,
                        end: 1159,
                    },
                },
                span: Span {
                    start: 1135,
                    end: 1159,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 1704,
                            end: 1712,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Control Flow Methods (Non-Nil Objects)",
                        span: Span {
                            start: 1704,
                            end: 1712,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 1704,
                            end: 1712,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Test ifNil: returns self without evaluating block",
                        span: Span {
                            start: 1704,
                            end: 1712,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> 42",
                        span: Span {
                            start: 1736,
                            end: 1737,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result11",
                        span: Span {
                            start: 1704,
                            end: 1712,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            42,
                        ),
                        Span {
                            start: 1716,
                            end: 1718,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNil:",
                                span: Span {
                                    start: 1719,
                                    end: 1725,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            String(
                                                "default",
                                            ),
                                            Span {
                                                start: 1727,
                                                end: 1736,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 1726,
                                    end: 1737,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 1716,
                        end: 1737,
                    },
                },
                span: Span {
                    start: 1704,
                    end: 1737,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test ifNotNil: evaluates block with receiver as argument",
                        span: Span {
                            start: 1809,
                            end: 1817,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> 43",
                        span: Span {
                            start: 1849,
                            end: 1850,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result12",
                        span: Span {
                            start: 1809,
                            end: 1817,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            42,
                        ),
                        Span {
                            start: 1821,
                            end: 1823,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 1824,
                                    end: 1833,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "val",
                                        span: Span {
                                            start: 1836,
                                            end: 1839,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: MessageSend {
                                            receiver: Identifier(
                                                Identifier {
                                                    name: "val",
                                                    span: Span {
                                                        start: 1842,
                                                        end: 1845,
                                                    },
                                                },
                                            ),
                                            selector: Binary(
                                                "+",
                                            ),
                                            arguments: [
                                                Literal(
                                                    Integer(
                                                        1,
                                                    ),
                                                    Span {
                                                        start: 1848,
                                                        end: 1849,
                                                    },
                                                ),
                                            ],
                                            is_cast: false,
                                            span: Span {
                                                start: 1842,
                                                end: 1849,
                                            },
                                        },
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 1834,
                                    end: 1850,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 1821,
                        end: 1850,
                    },
                },
                span: Span {
                    start: 1809,
                    end: 1850,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test ifNil:ifNotNil: evaluates notNilBlock with receiver",
                        span: Span {
                            start: 1922,
                            end: 1930,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> \"HELLO\"",
                        span: Span {
                            start: 1992,
                            end: 1993,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result13",
                        span: Span {
                            start: 1922,
                            end: 1930,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "hello",
                        ),
                        Span {
                            start: 1934,
                            end: 1941,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNil:",
                                span: Span {
                                    start: 1942,
                                    end: 1948,
                                },
                            },
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 1961,
                                    end: 1970,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            String(
                                                "was nil",
                                            ),
                                            Span {
                                                start: 1950,
                                                end: 1959,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 1949,
                                    end: 1960,
                                },
                            },
                        ),
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "val",
                                        span: Span {
                                            start: 1973,
                                            end: 1976,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: MessageSend {
                                            receiver: Identifier(
                                                Identifier {
                                                    name: "val",
                                                    span: Span {
                                                        start: 1979,
                                                        end: 1982,
                                                    },
                                                },
                                            ),
                                            selector: Unary(
                                                "uppercase",
                                            ),
                                            arguments: [],
                                            is_cast: false,
                                            span: Span {
                                                start: 1979,
                                                end: 1992,
                                            },
                                        },
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 1971,
                                    end: 1993,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 1934,
                        end: 1993,
                    },
                },
                span: Span {
                    start: 1922,
                    end: 1993,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Test ifNotNil:ifNil: (reversed order) evaluates notNilBlock with receiver",
                        span: Span {
                            start: 2087,
                            end: 2095,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> 20",
                        span: Span {
                            start: 2138,
                            end: 2139,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result14",
                        span: Span {
                            start: 2087,
                            end: 2095,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            10,
                        ),
                        Span {
                            start: 2099,
                            end: 2101,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 2102,
                                    end: 2111,
                                },
                            },
                            KeywordPart {
                                keyword: "ifNil:",
                                span: Span {
                                    start: 2129,
                                    end: 2135,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "val",
                                        span: Span {
                                            start: 2114,
                                            end: 2117,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: MessageSend {
                                            receiver: Identifier(
                                                Identifier {
                                                    name: "val",
                                                    span: Span {
                                                        start: 2120,
                                                        end: 2123,
                                                    },
                                                },
                                            ),
                                            selector: Binary(
                                                "*",
                                            ),
                                            arguments: [
                                                Literal(
                                                    Integer(
                                                        2,
                                                    ),
                                                    Span {
                                                        start: 2126,
                                                        end: 2127,
                                                    },
                                                ),
                                            ],
                                            is_cast: false,
                                            span: Span {
                                                start: 2120,
                                                end: 2127,
                                            },
                                        },
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 2112,
                                    end: 2128,
                                },
                            },
                        ),
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            Integer(
                                                0,
                                            ),
                                            Span {
                                                start: 2137,
                                                end: 2138,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 2136,
                                    end: 2139,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 2099,
                        end: 2139,
                    },
                },
                span: Span {
                    start: 2087,
                    end: 2139,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 2675,
                            end: 2683,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Edge Cases: Block Receives Receiver",
                        span: Span {
                            start: 2675,
                            end: 2683,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 2675,
                            end: 2683,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Verify block receives the receiver as argument",
                        span: Span {
                            start: 2675,
                            end: 2683,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> 150",
                        span: Span {
                            start: 2713,
                            end: 2714,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result15",
                        span: Span {
                            start: 2675,
                            end: 2683,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            100,
                        ),
                        Span {
                            start: 2687,
                            end: 2690,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 2691,
                                    end: 2700,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "x",
                                        span: Span {
                                            start: 2703,
                                            end: 2704,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: MessageSend {
                                            receiver: Identifier(
                                                Identifier {
                                                    name: "x",
                                                    span: Span {
                                                        start: 2707,
                                                        end: 2708,
                                                    },
                                                },
                                            ),
                                            selector: Binary(
                                                "+",
                                            ),
                                            arguments: [
                                                Literal(
                                                    Integer(
                                                        50,
                                                    ),
                                                    Span {
                                                        start: 2711,
                                                        end: 2713,
                                                    },
                                                ),
                                            ],
                                            is_cast: false,
                                            span: Span {
                                                start: 2707,
                                                end: 2713,
                                            },
                                        },
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 2701,
                                    end: 2714,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 2687,
                        end: 2714,
                    },
                },
                span: Span {
                    start: 2675,
                    end: 2714,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> 4",
                        span: Span {
                            start: 2771,
                            end: 2772,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result16",
                        span: Span {
                            start: 2726,
                            end: 2734,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "test",
                        ),
                        Span {
                            start: 2738,
                            end: 2744,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 2745,
                                    end: 2754,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "str",
                                        span: Span {
                                            start: 2757,
                                            end: 2760,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: MessageSend {
                                            receiver: Identifier(
                                                Identifier {
                                                    name: "str",
                                                    span: Span {
                                                        start: 2763,
                                                        end: 2766,
                                                    },
                                                },
                                            ),
                                            selector: Unary(
                                                "size",
                                            ),
                                            arguments: [],
                                            is_cast: false,
                                            span: Span {
                                                start: 2763,
                                                end: 2771,
                                            },
                                        },
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 2755,
                                    end: 2772,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 2738,
                        end: 2772,
                    },
                },
                span: Span {
                    start: 2726,
                    end: 2772,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Multiple operations on the passed value",
                        span: Span {
                            start: 2826,
                            end: 2834,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> 13",
                        span: Span {
                            start: 2867,
                            end: 2868,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result17",
                        span: Span {
                            start: 2826,
                            end: 2834,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            5,
                        ),
                        Span {
                            start: 2838,
                            end: 2839,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 2840,
                                    end: 2849,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "n",
                                        span: Span {
                                            start: 2852,
                                            end: 2853,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: MessageSend {
                                            receiver: Parenthesized {
                                                expression: MessageSend {
                                                    receiver: Identifier(
                                                        Identifier {
                                                            name: "n",
                                                            span: Span {
                                                                start: 2857,
                                                                end: 2858,
                                                            },
                                                        },
                                                    ),
                                                    selector: Binary(
                                                        "*",
                                                    ),
                                                    arguments: [
                                                        Literal(
                                                            Integer(
                                                                2,
                                                            ),
                                                            Span {
                                                                start: 2861,
                                                                end: 2862,
                                                            },
                                                        ),
                                                    ],
                                                    is_cast: false,
                                                    span: Span {
                                                        start: 2857,
                                                        end: 2862,
                                                    },
                                                },
                                                span: Span {
                                                    start: 2856,
                                                    end: 2863,
                                                },
                                            },
                                            selector: Binary(
                                                "+",
                                            ),
                                            arguments: [
                                                Literal(
                                                    Integer(
                                                        3,
                                                    ),
                                                    Span {
                                                        start: 2866,
                                                        end: 2867,
                                                    },
                                                ),
                                            ],
                                            is_cast: false,
                                            span: Span {
                                                start: 2856,
                                                end: 2867,
                                            },
                                        },
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 2850,
                                    end: 2868,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 2838,
                        end: 2868,
                    },
                },
                span: Span {
                    start: 2826,
                    end: 2868,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 3408,
                            end: 3416,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Edge Cases: Chaining and Composition",
                        span: Span {
                            start: 3408,
                            end: 3416,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 3408,
                            end: 3416,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Chaining: ifNotNil: result in further computation",
                        span: Span {
                            start: 3408,
                            end: 3416,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> 94",
                        span: Span {
                            start: 3450,
                            end: 3452,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result18",
                        span: Span {
                            start: 3408,
                            end: 3416,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Parenthesized {
                        expression: MessageSend {
                            receiver: Literal(
                                Integer(
                                    42,
                                ),
                                Span {
                                    start: 3421,
                                    end: 3423,
                                },
                            ),
                            selector: Keyword(
                                [
                                    KeywordPart {
                                        keyword: "ifNotNil:",
                                        span: Span {
                                            start: 3424,
                                            end: 3433,
                                        },
                                    },
                                ],
                            ),
                            arguments: [
                                Block(
                                    Block {
                                        parameters: [
                                            BlockParameter {
                                                name: "v",
                                                span: Span {
                                                    start: 3436,
                                                    end: 3437,
                                                },
                                            },
                                        ],
                                        body: [
                                            ExpressionStatement {
                                                comments: CommentAttachment {
                                                    leading: [],
                                                    trailing: None,
                                                },
                                                expression: MessageSend {
                                                    receiver: Identifier(
                                                        Identifier {
                                                            name: "v",
                                                            span: Span {
                                                                start: 3440,
                                                                end: 3441,
                                                            },
                                                        },
                                                    ),
                                                    selector: Binary(
                                                        "*",
                                                    ),
                                                    arguments: [
                                                        Literal(
                                                            Integer(
                                                                2,
                                                            ),
                                                            Span {
                                                                start: 3444,
                                                                end: 3445,
                                                            },
                                                        ),
                                                    ],
                                                    is_cast: false,
                                                    span: Span {
                                                        start: 3440,
                                                        end: 3445,
                                                    },
                                                },
                                                preceding_blank_line: false,
                                            },
                                        ],
                                        span: Span {
                                            start: 3434,
                                            end: 3446,
                                        },
                                    },
                                ),
                            ],
                            is_cast: false,
                            span: Span {
                                start: 3421,
                                end: 3446,
                            },
                        },
                        span: Span {
                            start: 3420,
                            end: 3447,
                        },
                    },
                    selector: Binary(
                        "+",
                    ),
                    arguments: [
                        Literal(
                            Integer(
                                10,
                            ),
                            Span {
                                start: 3450,
                                end: 3452,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 3420,
                        end: 3452,
                    },
                },
                span: Span {
                    start: 3408,
                    end: 3452,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Nested ifNotNil: - both evaluate",
                        span: Span {
                            start: 3500,
                            end: 3508,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> 15",
                        span: Span {
                            start: 3571,
                            end: 3572,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result19",
                        span: Span {
                            start: 3500,
                            end: 3508,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            10,
                        ),
                        Span {
                            start: 3512,
                            end: 3514,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 3515,
                                    end: 3524,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "outer",
                                        span: Span {
                                            start: 3527,
                                            end: 3532,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: MessageSend {
                                            receiver: Identifier(
                                                Identifier {
                                                    name: "outer",
                                                    span: Span {
                                                        start: 3535,
                                                        end: 3540,
                                                    },
                                                },
                                            ),
                                            selector: Keyword(
                                                [
                                                    KeywordPart {
                                                        keyword: "ifNotNil:",
                                                        span: Span {
                                                            start: 3541,
                                                            end: 3550,
                                                        },
                                                    },
                                                ],
                                            ),
                                            arguments: [
                                                Block(
                                                    Block {
                                                        parameters: [
                                                            BlockParameter {
                                                                name: "inner",
                                                                span: Span {
                                                                    start: 3553,
                                                                    end: 3558,
                                                                },
                                                            },
                                                        ],
                                                        body: [
                                                            ExpressionStatement {
                                                                comments: CommentAttachment {
                                                                    leading: [],
                                                                    trailing: None,
                                                                },
                                                                expression: MessageSend {
                                                                    receiver: Identifier(
                                                                        Identifier {
                                                                            name: "inner",
                                                                            span: Span {
                                                                                start: 3561,
                                                                                end: 3566,
                                                                            },
                                                                        },
                                                                    ),
                                                                    selector: Binary(
                                                                        "+",
                                                                    ),
                                                                    arguments: [
                                                                        Literal(
                                                                            Integer(
                                                                                5,
                                                                            ),
                                                                            Span {
                                                                                start: 3569,
                                                                                end: 3570,
                                                                            },
                                                                        ),
                                                                    ],
                                                                    is_cast: false,
                                                                    span: Span {
                                                                        start: 3561,
                                                                        end: 3570,
                                                                    },
                                                                },
                                                                preceding_blank_line: false,
                                                            },
                                                        ],
                                                        span: Span {
                                                            start: 3551,
                                                            end: 3571,
                                                        },
                                                    },
                                                ),
                                            ],
                                            is_cast: false,
                                            span: Span {
                                                start: 3535,
                                                end: 3571,
                                            },
                                        },
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 3525,
                                    end: 3572,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 3512,
                        end: 3572,
                    },
                },
                span: Span {
                    start: 3500,
                    end: 3572,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "ifNil: on non-nil returns self, can chain",
                        span: Span {
                            start: 3629,
                            end: 3637,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> 150",
                        span: Span {
                            start: 3660,
                            end: 3662,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result20",
                        span: Span {
                            start: 3629,
                            end: 3637,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Parenthesized {
                        expression: MessageSend {
                            receiver: Literal(
                                Integer(
                                    100,
                                ),
                                Span {
                                    start: 3642,
                                    end: 3645,
                                },
                            ),
                            selector: Keyword(
                                [
                                    KeywordPart {
                                        keyword: "ifNil:",
                                        span: Span {
                                            start: 3646,
                                            end: 3652,
                                        },
                                    },
                                ],
                            ),
                            arguments: [
                                Block(
                                    Block {
                                        parameters: [],
                                        body: [
                                            ExpressionStatement {
                                                comments: CommentAttachment {
                                                    leading: [],
                                                    trailing: None,
                                                },
                                                expression: Literal(
                                                    Integer(
                                                        0,
                                                    ),
                                                    Span {
                                                        start: 3654,
                                                        end: 3655,
                                                    },
                                                ),
                                                preceding_blank_line: false,
                                            },
                                        ],
                                        span: Span {
                                            start: 3653,
                                            end: 3656,
                                        },
                                    },
                                ),
                            ],
                            is_cast: false,
                            span: Span {
                                start: 3642,
                                end: 3656,
                            },
                        },
                        span: Span {
                            start: 3641,
                            end: 3657,
                        },
                    },
                    selector: Binary(
                        "+",
                    ),
                    arguments: [
                        Literal(
                            Integer(
                                50,
                            ),
                            Span {
                                start: 3660,
                                end: 3662,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 3641,
                        end: 3662,
                    },
                },
                span: Span {
                    start: 3629,
                    end: 3662,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 4190,
                            end: 4198,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Edge Cases: Boolean Logic Integration",
                        span: Span {
                            start: 4190,
                            end: 4198,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 4190,
                            end: 4198,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Combining notNil with boolean logic",
                        span: Span {
                            start: 4190,
                            end: 4198,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> true",
                        span: Span {
                            start: 4222,
                            end: 4223,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result21",
                        span: Span {
                            start: 4190,
                            end: 4198,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: MessageSend {
                        receiver: Literal(
                            Integer(
                                42,
                            ),
                            Span {
                                start: 4202,
                                end: 4204,
                            },
                        ),
                        selector: Unary(
                            "notNil",
                        ),
                        arguments: [],
                        is_cast: false,
                        span: Span {
                            start: 4202,
                            end: 4211,
                        },
                    },
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "and:",
                                span: Span {
                                    start: 4212,
                                    end: 4216,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Identifier(
                                            Identifier {
                                                name: "true",
                                                span: Span {
                                                    start: 4218,
                                                    end: 4222,
                                                },
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 4217,
                                    end: 4223,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 4202,
                        end: 4223,
                    },
                },
                span: Span {
                    start: 4190,
                    end: 4223,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> false",
                        span: Span {
                            start: 4272,
                            end: 4273,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result22",
                        span: Span {
                            start: 4237,
                            end: 4245,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: MessageSend {
                        receiver: Literal(
                            String(
                                "test",
                            ),
                            Span {
                                start: 4249,
                                end: 4255,
                            },
                        ),
                        selector: Unary(
                            "isNil",
                        ),
                        arguments: [],
                        is_cast: false,
                        span: Span {
                            start: 4249,
                            end: 4261,
                        },
                    },
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "or:",
                                span: Span {
                                    start: 4262,
                                    end: 4265,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Identifier(
                                            Identifier {
                                                name: "false",
                                                span: Span {
                                                    start: 4267,
                                                    end: 4272,
                                                },
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 4266,
                                    end: 4273,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 4249,
                        end: 4273,
                    },
                },
                span: Span {
                    start: 4237,
                    end: 4273,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Using notNil result in ifTrue:ifFalse:",
                        span: Span {
                            start: 4330,
                            end: 4338,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> \"is not nil\"",
                        span: Span {
                            start: 4394,
                            end: 4395,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result23",
                        span: Span {
                            start: 4330,
                            end: 4338,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: MessageSend {
                        receiver: Literal(
                            Integer(
                                100,
                            ),
                            Span {
                                start: 4342,
                                end: 4345,
                            },
                        ),
                        selector: Unary(
                            "notNil",
                        ),
                        arguments: [],
                        is_cast: false,
                        span: Span {
                            start: 4342,
                            end: 4352,
                        },
                    },
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifTrue:",
                                span: Span {
                                    start: 4353,
                                    end: 4360,
                                },
                            },
                            KeywordPart {
                                keyword: "ifFalse:",
                                span: Span {
                                    start: 4376,
                                    end: 4384,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            String(
                                                "is not nil",
                                            ),
                                            Span {
                                                start: 4362,
                                                end: 4374,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 4361,
                                    end: 4375,
                                },
                            },
                        ),
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            String(
                                                "is nil",
                                            ),
                                            Span {
                                                start: 4386,
                                                end: 4394,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 4385,
                                    end: 4395,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 4342,
                        end: 4395,
                    },
                },
                span: Span {
                    start: 4330,
                    end: 4395,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 4912,
                            end: 4920,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Edge Cases: Different Object Types",
                        span: Span {
                            start: 4912,
                            end: 4920,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 4912,
                            end: 4920,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Blocks are not nil",
                        span: Span {
                            start: 4912,
                            end: 4920,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> false",
                        span: Span {
                            start: 4929,
                            end: 4934,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result24",
                        span: Span {
                            start: 4912,
                            end: 4920,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Block(
                        Block {
                            parameters: [],
                            body: [
                                ExpressionStatement {
                                    comments: CommentAttachment {
                                        leading: [],
                                        trailing: None,
                                    },
                                    expression: Literal(
                                        Integer(
                                            42,
                                        ),
                                        Span {
                                            start: 4925,
                                            end: 4927,
                                        },
                                    ),
                                    preceding_blank_line: false,
                                },
                            ],
                            span: Span {
                                start: 4924,
                                end: 4928,
                            },
                        },
                    ),
                    selector: Unary(
                        "isNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 4924,
                        end: 4934,
                    },
                },
                span: Span {
                    start: 4912,
                    end: 4934,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> false",
                        span: Span {
                            start: 4974,
                            end: 4979,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result25",
                        span: Span {
                            start: 4953,
                            end: 4961,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Block(
                        Block {
                            parameters: [
                                BlockParameter {
                                    name: "x",
                                    span: Span {
                                        start: 4967,
                                        end: 4968,
                                    },
                                },
                            ],
                            body: [
                                ExpressionStatement {
                                    comments: CommentAttachment {
                                        leading: [],
                                        trailing: None,
                                    },
                                    expression: Identifier(
                                        Identifier {
                                            name: "x",
                                            span: Span {
                                                start: 4971,
                                                end: 4972,
                                            },
                                        },
                                    ),
                                    preceding_blank_line: false,
                                },
                            ],
                            span: Span {
                                start: 4965,
                                end: 4973,
                            },
                        },
                    ),
                    selector: Unary(
                        "isNil",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 4965,
                        end: 4979,
                    },
                },
                span: Span {
                    start: 4953,
                    end: 4979,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 5547,
                            end: 5555,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Edge Cases: ifNil: Should NOT Evaluate Block",
                        span: Span {
                            start: 5547,
                            end: 5555,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 5547,
                            end: 5555,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Verify ifNil: doesn't evaluate by checking return equals receiver",
                        span: Span {
                            start: 5547,
                            end: 5555,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> true",
                        span: Span {
                            start: 5582,
                            end: 5584,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result26",
                        span: Span {
                            start: 5547,
                            end: 5555,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Parenthesized {
                        expression: MessageSend {
                            receiver: Literal(
                                Integer(
                                    42,
                                ),
                                Span {
                                    start: 5560,
                                    end: 5562,
                                },
                            ),
                            selector: Keyword(
                                [
                                    KeywordPart {
                                        keyword: "ifNil:",
                                        span: Span {
                                            start: 5563,
                                            end: 5569,
                                        },
                                    },
                                ],
                            ),
                            arguments: [
                                Block(
                                    Block {
                                        parameters: [],
                                        body: [
                                            ExpressionStatement {
                                                comments: CommentAttachment {
                                                    leading: [],
                                                    trailing: None,
                                                },
                                                expression: Literal(
                                                    Integer(
                                                        9999,
                                                    ),
                                                    Span {
                                                        start: 5571,
                                                        end: 5575,
                                                    },
                                                ),
                                                preceding_blank_line: false,
                                            },
                                        ],
                                        span: Span {
                                            start: 5570,
                                            end: 5576,
                                        },
                                    },
                                ),
                            ],
                            is_cast: false,
                            span: Span {
                                start: 5560,
                                end: 5576,
                            },
                        },
                        span: Span {
                            start: 5559,
                            end: 5577,
                        },
                    },
                    selector: Binary(
                        "=:=",
                    ),
                    arguments: [
                        Literal(
                            Integer(
                                42,
                            ),
                            Span {
                                start: 5582,
                                end: 5584,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 5559,
                        end: 5584,
                    },
                },
                span: Span {
                    start: 5547,
                    end: 5584,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "ifNil: with complex block expression (should not evaluate)",
                        span: Span {
                            start: 5660,
                            end: 5668,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> 10 (not 7)",
                        span: Span {
                            start: 5692,
                            end: 5693,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result27",
                        span: Span {
                            start: 5660,
                            end: 5668,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            10,
                        ),
                        Span {
                            start: 5672,
                            end: 5674,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNil:",
                                span: Span {
                                    start: 5675,
                                    end: 5681,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: MessageSend {
                                            receiver: Literal(
                                                Integer(
                                                    1,
                                                ),
                                                Span {
                                                    start: 5683,
                                                    end: 5684,
                                                },
                                            ),
                                            selector: Binary(
                                                "+",
                                            ),
                                            arguments: [
                                                MessageSend {
                                                    receiver: Literal(
                                                        Integer(
                                                            2,
                                                        ),
                                                        Span {
                                                            start: 5687,
                                                            end: 5688,
                                                        },
                                                    ),
                                                    selector: Binary(
                                                        "*",
                                                    ),
                                                    arguments: [
                                                        Literal(
                                                            Integer(
                                                                3,
                                                            ),
                                                            Span {
                                                                start: 5691,
                                                                end: 5692,
                                                            },
                                                        ),
                                                    ],
                                                    is_cast: false,
                                                    span: Span {
                                                        start: 5687,
                                                        end: 5692,
                                                    },
                                                },
                                            ],
                                            is_cast: false,
                                            span: Span {
                                                start: 5683,
                                                end: 5692,
                                            },
                                        },
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 5682,
                                    end: 5693,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 5672,
                        end: 5693,
                    },
                },
                span: Span {
                    start: 5660,
                    end: 5693,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 6236,
                            end: 6241,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Edge Cases: Mixed nil and non-nil in Expressions",
                        span: Span {
                            start: 6236,
                            end: 6241,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 6236,
                            end: 6241,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Assign value based on isNil test",
                        span: Span {
                            start: 6236,
                            end: 6241,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "value",
                        span: Span {
                            start: 6236,
                            end: 6241,
                        },
                    },
                ),
                value: Literal(
                    Integer(
                        42,
                    ),
                    Span {
                        start: 6245,
                        end: 6247,
                    },
                ),
                span: Span {
                    start: 6236,
                    end: 6247,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> 42",
                        span: Span {
                            start: 6299,
                            end: 6300,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result28",
                        span: Span {
                            start: 6248,
                            end: 6256,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: MessageSend {
                        receiver: Identifier(
                            Identifier {
                                name: "value",
                                span: Span {
                                    start: 6260,
                                    end: 6265,
                                },
                            },
                        ),
                        selector: Unary(
                            "isNil",
                        ),
                        arguments: [],
                        is_cast: false,
                        span: Span {
                            start: 6260,
                            end: 6271,
                        },
                    },
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifTrue:",
                                span: Span {
                                    start: 6272,
                                    end: 6279,
                                },
                            },
                            KeywordPart {
                                keyword: "ifFalse:",
                                span: Span {
                                    start: 6284,
                                    end: 6292,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            Integer(
                                                0,
                                            ),
                                            Span {
                                                start: 6281,
                                                end: 6282,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 6280,
                                    end: 6283,
                                },
                            },
                        ),
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Identifier(
                                            Identifier {
                                                name: "value",
                                                span: Span {
                                                    start: 6294,
                                                    end: 6299,
                                                },
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 6293,
                                    end: 6300,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 6260,
                        end: 6300,
                    },
                },
                span: Span {
                    start: 6248,
                    end: 6300,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Use ifNotNil: to safely transform",
                        span: Span {
                            start: 6349,
                            end: 6355,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "value2",
                        span: Span {
                            start: 6349,
                            end: 6355,
                        },
                    },
                ),
                value: Literal(
                    Integer(
                        10,
                    ),
                    Span {
                        start: 6359,
                        end: 6361,
                    },
                ),
                span: Span {
                    start: 6349,
                    end: 6361,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> 30",
                        span: Span {
                            start: 6402,
                            end: 6403,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result29",
                        span: Span {
                            start: 6362,
                            end: 6370,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "value2",
                            span: Span {
                                start: 6374,
                                end: 6380,
                            },
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 6381,
                                    end: 6390,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "v",
                                        span: Span {
                                            start: 6393,
                                            end: 6394,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: MessageSend {
                                            receiver: Identifier(
                                                Identifier {
                                                    name: "v",
                                                    span: Span {
                                                        start: 6397,
                                                        end: 6398,
                                                    },
                                                },
                                            ),
                                            selector: Binary(
                                                "*",
                                            ),
                                            arguments: [
                                                Literal(
                                                    Integer(
                                                        3,
                                                    ),
                                                    Span {
                                                        start: 6401,
                                                        end: 6402,
                                                    },
                                                ),
                                            ],
                                            is_cast: false,
                                            span: Span {
                                                start: 6397,
                                                end: 6402,
                                            },
                                        },
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 6391,
                                    end: 6403,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 6374,
                        end: 6403,
                    },
                },
                span: Span {
                    start: 6362,
                    end: 6403,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Compare with nil's behavior (for contrast)",
                        span: Span {
                            start: 6461,
                            end: 6469,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> \"nil case\"",
                        span: Span {
                            start: 6527,
                            end: 6528,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result30",
                        span: Span {
                            start: 6461,
                            end: 6469,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "nil",
                            span: Span {
                                start: 6473,
                                end: 6476,
                            },
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNil:",
                                span: Span {
                                    start: 6477,
                                    end: 6483,
                                },
                            },
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 6497,
                                    end: 6506,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            String(
                                                "nil case",
                                            ),
                                            Span {
                                                start: 6485,
                                                end: 6495,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 6484,
                                    end: 6496,
                                },
                            },
                        ),
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "v",
                                        span: Span {
                                            start: 6509,
                                            end: 6510,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            String(
                                                "not nil case",
                                            ),
                                            Span {
                                                start: 6513,
                                                end: 6527,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 6507,
                                    end: 6528,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 6473,
                        end: 6528,
                    },
                },
                span: Span {
                    start: 6461,
                    end: 6528,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> \"not nil case\"",
                        span: Span {
                            start: 6612,
                            end: 6613,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result31",
                        span: Span {
                            start: 6547,
                            end: 6555,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        Integer(
                            42,
                        ),
                        Span {
                            start: 6559,
                            end: 6561,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNil:",
                                span: Span {
                                    start: 6562,
                                    end: 6568,
                                },
                            },
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 6582,
                                    end: 6591,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            String(
                                                "nil case",
                                            ),
                                            Span {
                                                start: 6570,
                                                end: 6580,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 6569,
                                    end: 6581,
                                },
                            },
                        ),
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "v",
                                        span: Span {
                                            start: 6594,
                                            end: 6595,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            String(
                                                "not nil case",
                                            ),
                                            Span {
                                                start: 6598,
                                                end: 6612,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 6592,
                                    end: 6613,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 6559,
                        end: 6613,
                    },
                },
                span: Span {
                    start: 6547,
                    end: 6613,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 7148,
                            end: 7156,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Edge Cases: Return Value Verification",
                        span: Span {
                            start: 7148,
                            end: 7156,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 7148,
                            end: 7156,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "ifNotNil: returns block result",
                        span: Span {
                            start: 7148,
                            end: 7156,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> true",
                        span: Span {
                            start: 7192,
                            end: 7194,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result32",
                        span: Span {
                            start: 7148,
                            end: 7156,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Parenthesized {
                        expression: MessageSend {
                            receiver: Literal(
                                Integer(
                                    5,
                                ),
                                Span {
                                    start: 7161,
                                    end: 7162,
                                },
                            ),
                            selector: Keyword(
                                [
                                    KeywordPart {
                                        keyword: "ifNotNil:",
                                        span: Span {
                                            start: 7163,
                                            end: 7172,
                                        },
                                    },
                                ],
                            ),
                            arguments: [
                                Block(
                                    Block {
                                        parameters: [
                                            BlockParameter {
                                                name: "x",
                                                span: Span {
                                                    start: 7175,
                                                    end: 7176,
                                                },
                                            },
                                        ],
                                        body: [
                                            ExpressionStatement {
                                                comments: CommentAttachment {
                                                    leading: [],
                                                    trailing: None,
                                                },
                                                expression: MessageSend {
                                                    receiver: Identifier(
                                                        Identifier {
                                                            name: "x",
                                                            span: Span {
                                                                start: 7179,
                                                                end: 7180,
                                                            },
                                                        },
                                                    ),
                                                    selector: Binary(
                                                        "*",
                                                    ),
                                                    arguments: [
                                                        Literal(
                                                            Integer(
                                                                10,
                                                            ),
                                                            Span {
                                                                start: 7183,
                                                                end: 7185,
                                                            },
                                                        ),
                                                    ],
                                                    is_cast: false,
                                                    span: Span {
                                                        start: 7179,
                                                        end: 7185,
                                                    },
                                                },
                                                preceding_blank_line: false,
                                            },
                                        ],
                                        span: Span {
                                            start: 7173,
                                            end: 7186,
                                        },
                                    },
                                ),
                            ],
                            is_cast: false,
                            span: Span {
                                start: 7161,
                                end: 7186,
                            },
                        },
                        span: Span {
                            start: 7160,
                            end: 7187,
                        },
                    },
                    selector: Binary(
                        "=:=",
                    ),
                    arguments: [
                        Literal(
                            Integer(
                                50,
                            ),
                            Span {
                                start: 7192,
                                end: 7194,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 7160,
                        end: 7194,
                    },
                },
                span: Span {
                    start: 7148,
                    end: 7194,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "ifNil: returns self unchanged",
                        span: Span {
                            start: 7241,
                            end: 7249,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: Some(
                    Comment {
                        content: "=> true",
                        span: Span {
                            start: 7274,
                            end: 7277,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "result33",
                        span: Span {
                            start: 7241,
                            end: 7249,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Parenthesized {
                        expression: MessageSend {
                            receiver: Literal(
                                Integer(
                                    100,
                                ),
                                Span {
                                    start: 7254,
                                    end: 7257,
                                },
                            ),
                            selector: Keyword(
                                [
                                    KeywordPart {
                                        keyword: "ifNil:",
                                        span: Span {
                                            start: 7258,
                                            end: 7264,
                                        },
                                    },
                                ],
                            ),
                            arguments: [
                                Block(
                                    Block {
                                        parameters: [],
                                        body: [
                                            ExpressionStatement {
                                                comments: CommentAttachment {
                                                    leading: [],
                                                    trailing: None,
                                                },
                                                expression: Literal(
                                                    Integer(
                                                        0,
                                                    ),
                                                    Span {
                                                        start: 7266,
                                                        end: 7267,
                                                    },
                                                ),
                                                preceding_blank_line: false,
                                            },
                                        ],
                                        span: Span {
                                            start: 7265,
                                            end: 7268,
                                        },
                                    },
                                ),
                            ],
                            is_cast: false,
                            span: Span {
                                start: 7254,
                                end: 7268,
                            },
                        },
                        span: Span {
                            start: 7253,
                            end: 7269,
                        },
                    },
                    selector: Binary(
                        "=:=",
                    ),
                    arguments: [
                        Literal(
                            Integer(
                                100,
                            ),
                            Span {
                                start: 7274,
                                end: 7277,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 7253,
                        end: 7277,
                    },
                },
                span: Span {
                    start: 7241,
                    end: 7277,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 7793,
                            end: 7801,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Real-World Usage Patterns",
                        span: Span {
                            start: 7793,
                            end: 7801,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "═══════════════════════════════════════════════════════════════════════",
                        span: Span {
                            start: 7793,
                            end: 7801,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Safe access pattern with ifNotNil:",
                        span: Span {
                            start: 7793,
                            end: 7801,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "userName",
                        span: Span {
                            start: 7793,
                            end: 7801,
                        },
                    },
                ),
                value: Literal(
                    String(
                        "Alice",
                    ),
                    Span {
                        start: 7805,
                        end: 7812,
                    },
                ),
                span: Span {
                    start: 7793,
                    end: 7812,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> \"Hello, Alice!\"",
                        span: Span {
                            start: 7875,
                            end: 7876,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "greeting",
                        span: Span {
                            start: 7813,
                            end: 7821,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "userName",
                            span: Span {
                                start: 7825,
                                end: 7833,
                            },
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 7834,
                                    end: 7843,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "name",
                                        span: Span {
                                            start: 7846,
                                            end: 7850,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: MessageSend {
                                            receiver: MessageSend {
                                                receiver: Literal(
                                                    String(
                                                        "Hello, ",
                                                    ),
                                                    Span {
                                                        start: 7853,
                                                        end: 7862,
                                                    },
                                                ),
                                                selector: Binary(
                                                    "+",
                                                ),
                                                arguments: [
                                                    Identifier(
                                                        Identifier {
                                                            name: "name",
                                                            span: Span {
                                                                start: 7865,
                                                                end: 7869,
                                                            },
                                                        },
                                                    ),
                                                ],
                                                is_cast: false,
                                                span: Span {
                                                    start: 7853,
                                                    end: 7869,
                                                },
                                            },
                                            selector: Binary(
                                                "+",
                                            ),
                                            arguments: [
                                                Literal(
                                                    String(
                                                        "!",
                                                    ),
                                                    Span {
                                                        start: 7872,
                                                        end: 7875,
                                                    },
                                                ),
                                            ],
                                            is_cast: false,
                                            span: Span {
                                                start: 7853,
                                                end: 7875,
                                            },
                                        },
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 7844,
                                    end: 7876,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 7825,
                        end: 7876,
                    },
                },
                span: Span {
                    start: 7813,
                    end: 7876,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Default value pattern with ifNil:",
                        span: Span {
                            start: 7938,
                            end: 7947,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "userInput",
                        span: Span {
                            start: 7938,
                            end: 7947,
                        },
                    },
                ),
                value: Literal(
                    Integer(
                        42,
                    ),
                    Span {
                        start: 7951,
                        end: 7953,
                    },
                ),
                span: Span {
                    start: 7938,
                    end: 7953,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> 42",
                        span: Span {
                            start: 7991,
                            end: 7992,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "processedValue",
                        span: Span {
                            start: 7954,
                            end: 7968,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "userInput",
                            span: Span {
                                start: 7972,
                                end: 7981,
                            },
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNil:",
                                span: Span {
                                    start: 7982,
                                    end: 7988,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            Integer(
                                                0,
                                            ),
                                            Span {
                                                start: 7990,
                                                end: 7991,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 7989,
                                    end: 7992,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 7972,
                        end: 7992,
                    },
                },
                span: Span {
                    start: 7954,
                    end: 7992,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Transformation with default pattern",
                        span: Span {
                            start: 8043,
                            end: 8054,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "maybeNumber",
                        span: Span {
                            start: 8043,
                            end: 8054,
                        },
                    },
                ),
                value: Literal(
                    Integer(
                        7,
                    ),
                    Span {
                        start: 8058,
                        end: 8059,
                    },
                ),
                span: Span {
                    start: 8043,
                    end: 8059,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: Some(
                    Comment {
                        content: "=> 14",
                        span: Span {
                            start: 8115,
                            end: 8116,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                ),
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "doubled",
                        span: Span {
                            start: 8060,
                            end: 8067,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "maybeNumber",
                            span: Span {
                                start: 8071,
                                end: 8082,
                            },
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "ifNil:",
                                span: Span {
                                    start: 8083,
                                    end: 8089,
                                },
                            },
                            KeywordPart {
                                keyword: "ifNotNil:",
                                span: Span {
                                    start: 8094,
                                    end: 8103,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Block(
                            Block {
                                parameters: [],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: Literal(
                                            Integer(
                                                0,
                                            ),
                                            Span {
                                                start: 8091,
                                                end: 8092,
                                            },
                                        ),
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 8090,
                                    end: 8093,
                                },
                            },
                        ),
                        Block(
                            Block {
                                parameters: [
                                    BlockParameter {
                                        name: "n",
                                        span: Span {
                                            start: 8106,
                                            end: 8107,
                                        },
                                    },
                                ],
                                body: [
                                    ExpressionStatement {
                                        comments: CommentAttachment {
                                            leading: [],
                                            trailing: None,
                                        },
                                        expression: MessageSend {
                                            receiver: Identifier(
                                                Identifier {
                                                    name: "n",
                                                    span: Span {
                                                        start: 8110,
                                                        end: 8111,
                                                    },
                                                },
                                            ),
                                            selector: Binary(
                                                "*",
                                            ),
                                            arguments: [
                                                Literal(
                                                    Integer(
                                                        2,
                                                    ),
                                                    Span {
                                                        start: 8114,
                                                        end: 8115,
                                                    },
                                                ),
                                            ],
                                            is_cast: false,
                                            span: Span {
                                                start: 8110,
                                                end: 8115,
                                            },
                                        },
                                        preceding_blank_line: false,
                                    },
                                ],
                                span: Span {
                                    start: 8104,
                                    end: 8116,
                                },
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 8071,
                        end: 8116,
                    },
                },
                span: Span {
                    start: 8060,
                    end: 8116,
                },
            },
            preceding_blank_line: false,
        },
    ],
    span: Span {
        start: 653,
        end: 8116,
    },
    file_leading_comments: [],
    file_trailing_comments: [],
}
