---
source: test-package-compiler/tests/compiler_tests.rs
expression: output
---
AST:
Module {
    classes: [],
    method_definitions: [],
    expressions: [
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Copyright 2026 James Casey",
                        span: Span {
                            start: 177,
                            end: 185,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "SPDX-License-Identifier: Apache-2.0",
                        span: Span {
                            start: 177,
                            end: 185,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Test string operations - comprehensive coverage of string messages",
                        span: Span {
                            start: 177,
                            end: 185,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "===== String Concatenation =====",
                        span: Span {
                            start: 177,
                            end: 185,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "greeting",
                        span: Span {
                            start: 177,
                            end: 185,
                        },
                    },
                ),
                value: Literal(
                    String(
                        "Hello",
                    ),
                    Span {
                        start: 189,
                        end: 196,
                    },
                ),
                span: Span {
                    start: 177,
                    end: 196,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "name",
                        span: Span {
                            start: 197,
                            end: 201,
                        },
                    },
                ),
                value: Literal(
                    String(
                        "World",
                    ),
                    Span {
                        start: 205,
                        end: 212,
                    },
                ),
                span: Span {
                    start: 197,
                    end: 212,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "message",
                        span: Span {
                            start: 213,
                            end: 220,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: MessageSend {
                        receiver: MessageSend {
                            receiver: Identifier(
                                Identifier {
                                    name: "greeting",
                                    span: Span {
                                        start: 224,
                                        end: 232,
                                    },
                                },
                            ),
                            selector: Binary(
                                "++",
                            ),
                            arguments: [
                                Literal(
                                    String(
                                        ", ",
                                    ),
                                    Span {
                                        start: 236,
                                        end: 240,
                                    },
                                ),
                            ],
                            is_cast: false,
                            span: Span {
                                start: 224,
                                end: 240,
                            },
                        },
                        selector: Binary(
                            "++",
                        ),
                        arguments: [
                            Identifier(
                                Identifier {
                                    name: "name",
                                    span: Span {
                                        start: 244,
                                        end: 248,
                                    },
                                },
                            ),
                        ],
                        is_cast: false,
                        span: Span {
                            start: 224,
                            end: 248,
                        },
                    },
                    selector: Binary(
                        "++",
                    ),
                    arguments: [
                        Literal(
                            String(
                                "!",
                            ),
                            Span {
                                start: 252,
                                end: 255,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 224,
                        end: 255,
                    },
                },
                span: Span {
                    start: 213,
                    end: 255,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== String Length =====",
                        span: Span {
                            start: 286,
                            end: 289,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "len",
                        span: Span {
                            start: 286,
                            end: 289,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "greeting",
                            span: Span {
                                start: 293,
                                end: 301,
                            },
                        },
                    ),
                    selector: Unary(
                        "length",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 293,
                        end: 308,
                    },
                },
                span: Span {
                    start: 286,
                    end: 308,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== String Comparison =====",
                        span: Span {
                            start: 343,
                            end: 350,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "isEqual",
                        span: Span {
                            start: 343,
                            end: 350,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "hello",
                        ),
                        Span {
                            start: 354,
                            end: 361,
                        },
                    ),
                    selector: Binary(
                        "=:=",
                    ),
                    arguments: [
                        Literal(
                            String(
                                "hello",
                            ),
                            Span {
                                start: 366,
                                end: 373,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 354,
                        end: 373,
                    },
                },
                span: Span {
                    start: 343,
                    end: 373,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "notEqual",
                        span: Span {
                            start: 374,
                            end: 382,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "hello",
                        ),
                        Span {
                            start: 386,
                            end: 393,
                        },
                    ),
                    selector: Binary(
                        "/=",
                    ),
                    arguments: [
                        Literal(
                            String(
                                "world",
                            ),
                            Span {
                                start: 397,
                                end: 404,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 386,
                        end: 404,
                    },
                },
                span: Span {
                    start: 374,
                    end: 404,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "isLess",
                        span: Span {
                            start: 405,
                            end: 411,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "apple",
                        ),
                        Span {
                            start: 415,
                            end: 422,
                        },
                    ),
                    selector: Binary(
                        "<",
                    ),
                    arguments: [
                        Literal(
                            String(
                                "banana",
                            ),
                            Span {
                                start: 425,
                                end: 433,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 415,
                        end: 433,
                    },
                },
                span: Span {
                    start: 405,
                    end: 433,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "isGreater",
                        span: Span {
                            start: 434,
                            end: 443,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "zebra",
                        ),
                        Span {
                            start: 447,
                            end: 454,
                        },
                    ),
                    selector: Binary(
                        ">",
                    ),
                    arguments: [
                        Literal(
                            String(
                                "apple",
                            ),
                            Span {
                                start: 457,
                                end: 464,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 447,
                        end: 464,
                    },
                },
                span: Span {
                    start: 434,
                    end: 464,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== String Case Transformation =====",
                        span: Span {
                            start: 508,
                            end: 513,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "upper",
                        span: Span {
                            start: 508,
                            end: 513,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "greeting",
                            span: Span {
                                start: 517,
                                end: 525,
                            },
                        },
                    ),
                    selector: Unary(
                        "uppercase",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 517,
                        end: 535,
                    },
                },
                span: Span {
                    start: 508,
                    end: 535,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "lower",
                        span: Span {
                            start: 536,
                            end: 541,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "upper",
                            span: Span {
                                start: 545,
                                end: 550,
                            },
                        },
                    ),
                    selector: Unary(
                        "lowercase",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 545,
                        end: 560,
                    },
                },
                span: Span {
                    start: 536,
                    end: 560,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== String Trimming =====",
                        span: Span {
                            start: 593,
                            end: 599,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "padded",
                        span: Span {
                            start: 593,
                            end: 599,
                        },
                    },
                ),
                value: Literal(
                    String(
                        "  hello  ",
                    ),
                    Span {
                        start: 603,
                        end: 614,
                    },
                ),
                span: Span {
                    start: 593,
                    end: 614,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "trimmed",
                        span: Span {
                            start: 615,
                            end: 622,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "padded",
                            span: Span {
                                start: 626,
                                end: 632,
                            },
                        },
                    ),
                    selector: Unary(
                        "trim",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 626,
                        end: 637,
                    },
                },
                span: Span {
                    start: 615,
                    end: 637,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== String Empty/Non-Empty Checks =====",
                        span: Span {
                            start: 684,
                            end: 689,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "empty",
                        span: Span {
                            start: 684,
                            end: 689,
                        },
                    },
                ),
                value: Literal(
                    String(
                        "",
                    ),
                    Span {
                        start: 693,
                        end: 695,
                    },
                ),
                span: Span {
                    start: 684,
                    end: 695,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "isEmpty",
                        span: Span {
                            start: 696,
                            end: 703,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "empty",
                            span: Span {
                                start: 707,
                                end: 712,
                            },
                        },
                    ),
                    selector: Unary(
                        "isEmpty",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 707,
                        end: 720,
                    },
                },
                span: Span {
                    start: 696,
                    end: 720,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "isNotEmpty",
                        span: Span {
                            start: 721,
                            end: 731,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "message",
                            span: Span {
                                start: 735,
                                end: 742,
                            },
                        },
                    ),
                    selector: Unary(
                        "isNotEmpty",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 735,
                        end: 753,
                    },
                },
                span: Span {
                    start: 721,
                    end: 753,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== String Character Access (1-based indexing) =====",
                        span: Span {
                            start: 813,
                            end: 822,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "firstChar",
                        span: Span {
                            start: 813,
                            end: 822,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "hello",
                        ),
                        Span {
                            start: 826,
                            end: 833,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "at:",
                                span: Span {
                                    start: 834,
                                    end: 837,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Literal(
                            Integer(
                                1,
                            ),
                            Span {
                                start: 838,
                                end: 839,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 826,
                        end: 839,
                    },
                },
                span: Span {
                    start: 813,
                    end: 839,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "thirdChar",
                        span: Span {
                            start: 840,
                            end: 849,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "hello",
                        ),
                        Span {
                            start: 853,
                            end: 860,
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "at:",
                                span: Span {
                                    start: 861,
                                    end: 864,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Literal(
                            Integer(
                                3,
                            ),
                            Span {
                                start: 865,
                                end: 866,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 853,
                        end: 866,
                    },
                },
                span: Span {
                    start: 840,
                    end: 866,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== String Search Operations =====",
                        span: Span {
                            start: 908,
                            end: 913,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "found",
                        span: Span {
                            start: 908,
                            end: 913,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "message",
                            span: Span {
                                start: 917,
                                end: 924,
                            },
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "includesSubstring:",
                                span: Span {
                                    start: 925,
                                    end: 943,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Literal(
                            String(
                                "World",
                            ),
                            Span {
                                start: 944,
                                end: 951,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 917,
                        end: 951,
                    },
                },
                span: Span {
                    start: 908,
                    end: 951,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "notFound",
                        span: Span {
                            start: 952,
                            end: 960,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "message",
                            span: Span {
                                start: 964,
                                end: 971,
                            },
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "includesSubstring:",
                                span: Span {
                                    start: 972,
                                    end: 990,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Literal(
                            String(
                                "xyz",
                            ),
                            Span {
                                start: 991,
                                end: 996,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 964,
                        end: 996,
                    },
                },
                span: Span {
                    start: 952,
                    end: 996,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== String Prefix/Suffix Checks =====",
                        span: Span {
                            start: 1041,
                            end: 1047,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "starts",
                        span: Span {
                            start: 1041,
                            end: 1047,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "message",
                            span: Span {
                                start: 1051,
                                end: 1058,
                            },
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "startsWith:",
                                span: Span {
                                    start: 1059,
                                    end: 1070,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Literal(
                            String(
                                "Hello",
                            ),
                            Span {
                                start: 1071,
                                end: 1078,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 1051,
                        end: 1078,
                    },
                },
                span: Span {
                    start: 1041,
                    end: 1078,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "ends",
                        span: Span {
                            start: 1079,
                            end: 1083,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "message",
                            span: Span {
                                start: 1087,
                                end: 1094,
                            },
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "endsWith:",
                                span: Span {
                                    start: 1095,
                                    end: 1104,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Literal(
                            String(
                                "!",
                            ),
                            Span {
                                start: 1105,
                                end: 1108,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 1087,
                        end: 1108,
                    },
                },
                span: Span {
                    start: 1079,
                    end: 1108,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== String Splitting =====",
                        span: Span {
                            start: 1142,
                            end: 1145,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "csv",
                        span: Span {
                            start: 1142,
                            end: 1145,
                        },
                    },
                ),
                value: Literal(
                    String(
                        "a,b,c,d",
                    ),
                    Span {
                        start: 1149,
                        end: 1158,
                    },
                ),
                span: Span {
                    start: 1142,
                    end: 1158,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "parts",
                        span: Span {
                            start: 1159,
                            end: 1164,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Identifier(
                        Identifier {
                            name: "csv",
                            span: Span {
                                start: 1168,
                                end: 1171,
                            },
                        },
                    ),
                    selector: Keyword(
                        [
                            KeywordPart {
                                keyword: "split:",
                                span: Span {
                                    start: 1172,
                                    end: 1178,
                                },
                            },
                        ],
                    ),
                    arguments: [
                        Literal(
                            String(
                                ",",
                            ),
                            Span {
                                start: 1179,
                                end: 1182,
                            },
                        ),
                    ],
                    is_cast: false,
                    span: Span {
                        start: 1168,
                        end: 1182,
                    },
                },
                span: Span {
                    start: 1159,
                    end: 1182,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "===== String Reverse =====",
                        span: Span {
                            start: 1214,
                            end: 1222,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "reversed",
                        span: Span {
                            start: 1214,
                            end: 1222,
                        },
                    },
                ),
                value: MessageSend {
                    receiver: Literal(
                        String(
                            "hello",
                        ),
                        Span {
                            start: 1226,
                            end: 1233,
                        },
                    ),
                    selector: Unary(
                        "reverse",
                    ),
                    arguments: [],
                    is_cast: false,
                    span: Span {
                        start: 1226,
                        end: 1241,
                    },
                },
                span: Span {
                    start: 1214,
                    end: 1241,
                },
            },
            preceding_blank_line: true,
        },
    ],
    span: Span {
        start: 177,
        end: 1241,
    },
    file_leading_comments: [],
    file_trailing_comments: [],
}
