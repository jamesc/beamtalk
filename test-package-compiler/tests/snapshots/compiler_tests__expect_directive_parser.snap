---
source: test-package-compiler/tests/compiler_tests.rs
expression: output
---
AST:
Module {
    classes: [],
    method_definitions: [],
    expressions: [
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Copyright 2026 James Casey",
                        span: Span {
                            start: 243,
                            end: 250,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "SPDX-License-Identifier: Apache-2.0",
                        span: Span {
                            start: 243,
                            end: 250,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "Test @expect directive parsing — BT-782",
                        span: Span {
                            start: 243,
                            end: 250,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                    Comment {
                        content: "Verifies that @expect produces ExpectDirective AST nodes",
                        span: Span {
                            start: 243,
                            end: 250,
                        },
                        kind: Line,
                        preceding_blank_line: false,
                    },
                    Comment {
                        content: "@expect dnu — suppress a DNU hint on the following expression",
                        span: Span {
                            start: 243,
                            end: 250,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: ExpectDirective {
                category: Dnu,
                span: Span {
                    start: 243,
                    end: 254,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: MessageSend {
                receiver: Literal(
                    Integer(
                        42,
                    ),
                    Span {
                        start: 255,
                        end: 257,
                    },
                ),
                selector: Unary(
                    "unknownMessage",
                ),
                arguments: [],
                is_cast: false,
                span: Span {
                    start: 255,
                    end: 272,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "@expect type — suppress type mismatch warnings",
                        span: Span {
                            start: 326,
                            end: 333,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: ExpectDirective {
                category: Type,
                span: Span {
                    start: 326,
                    end: 338,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: MessageSend {
                receiver: Literal(
                    Integer(
                        42,
                    ),
                    Span {
                        start: 339,
                        end: 341,
                    },
                ),
                selector: Binary(
                    "+",
                ),
                arguments: [
                    Literal(
                        String(
                            "hello",
                        ),
                        Span {
                            start: 344,
                            end: 351,
                        },
                    ),
                ],
                is_cast: false,
                span: Span {
                    start: 339,
                    end: 351,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "@expect unused — suppress unused variable warnings",
                        span: Span {
                            start: 409,
                            end: 416,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: ExpectDirective {
                category: Unused,
                span: Span {
                    start: 409,
                    end: 423,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Assignment {
                target: Identifier(
                    Identifier {
                        name: "tempVar",
                        span: Span {
                            start: 424,
                            end: 431,
                        },
                    },
                ),
                value: Literal(
                    Integer(
                        99,
                    ),
                    Span {
                        start: 435,
                        end: 437,
                    },
                ),
                span: Span {
                    start: 424,
                    end: 437,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "@expect all — suppress any diagnostic",
                        span: Span {
                            start: 482,
                            end: 489,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: ExpectDirective {
                category: All,
                span: Span {
                    start: 482,
                    end: 493,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: Identifier(
                Identifier {
                    name: "someUndefinedMethod",
                    span: Span {
                        start: 494,
                        end: 513,
                    },
                },
            ),
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [
                    Comment {
                        content: "Multiple consecutive @expect directives stack on the same expression",
                        span: Span {
                            start: 587,
                            end: 594,
                        },
                        kind: Line,
                        preceding_blank_line: true,
                    },
                ],
                trailing: None,
            },
            expression: ExpectDirective {
                category: Dnu,
                span: Span {
                    start: 587,
                    end: 598,
                },
            },
            preceding_blank_line: true,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: ExpectDirective {
                category: Type,
                span: Span {
                    start: 599,
                    end: 611,
                },
            },
            preceding_blank_line: false,
        },
        ExpressionStatement {
            comments: CommentAttachment {
                leading: [],
                trailing: None,
            },
            expression: MessageSend {
                receiver: Literal(
                    Integer(
                        42,
                    ),
                    Span {
                        start: 612,
                        end: 614,
                    },
                ),
                selector: Unary(
                    "unknownMessage",
                ),
                arguments: [],
                is_cast: false,
                span: Span {
                    start: 612,
                    end: 629,
                },
            },
            preceding_blank_line: false,
        },
    ],
    span: Span {
        start: 243,
        end: 629,
    },
    file_leading_comments: [],
    file_trailing_comments: [],
}
