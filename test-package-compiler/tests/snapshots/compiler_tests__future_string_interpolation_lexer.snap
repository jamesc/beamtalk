---
source: test-package-compiler/tests/compiler_tests.rs
expression: output
---
Token { kind: Identifier("name"), span: Span { start: 164, end: 168 }, leading_trivia: [LineComment("// Copyright 2026 James Casey"), Whitespace("\n"), LineComment("// SPDX-License-Identifier: Apache-2.0"), Whitespace("\n\n"), LineComment("// Test string interpolation compilation (ADR 0023 Phase 3)"), Whitespace("\n\n"), LineComment("// Simple variable interpolation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 169, end: 171 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("Alice"), span: Span { start: 172, end: 179 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("greeting"), span: Span { start: 180, end: 188 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 189, end: 191 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: StringStart("Hello, "), span: Span { start: 192, end: 200 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("name"), span: Span { start: 201, end: 205 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: StringEnd("!"), span: Span { start: 206, end: 208 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("age"), span: Span { start: 238, end: 241 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Expression interpolation"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 242, end: 244 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("25"), span: Span { start: 245, end: 247 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("message"), span: Span { start: 248, end: 255 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 256, end: 258 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: StringStart("You are "), span: Span { start: 259, end: 268 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("age"), span: Span { start: 269, end: 272 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("+"), span: Span { start: 273, end: 274 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("5"), span: Span { start: 275, end: 276 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: StringEnd(" years old in 5 years"), span: Span { start: 277, end: 299 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("firstName"), span: Span { start: 342, end: 351 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Multiple interpolations in one string"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 352, end: 354 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("Bob"), span: Span { start: 355, end: 360 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("lastName"), span: Span { start: 361, end: 369 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 370, end: 372 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("Smith"), span: Span { start: 373, end: 380 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("fullName"), span: Span { start: 381, end: 389 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 390, end: 392 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: StringStart("Name: "), span: Span { start: 393, end: 400 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("firstName"), span: Span { start: 401, end: 410 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: StringSegment(" "), span: Span { start: 411, end: 412 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("lastName"), span: Span { start: 413, end: 421 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: StringEnd(""), span: Span { start: 422, end: 423 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("escaped"), span: Span { start: 469, end: 476 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Escape sequences in interpolated strings"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 477, end: 479 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: StringStart("Literal braces: \\{ and \\}, variable: "), span: Span { start: 480, end: 518 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("name"), span: Span { start: 519, end: 523 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: StringEnd(""), span: Span { start: 524, end: 525 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("emojiVar"), span: Span { start: 562, end: 570 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Unicode in interpolated strings"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 571, end: 573 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("ðŸŽ‰"), span: Span { start: 574, end: 580 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("withEmoji"), span: Span { start: 581, end: 590 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 591, end: 593 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: StringStart("Celebration: "), span: Span { start: 594, end: 608 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("emojiVar"), span: Span { start: 609, end: 617 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: StringSegment(" "), span: Span { start: 618, end: 619 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("name"), span: Span { start: 620, end: 624 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: StringEnd("!"), span: Span { start: 625, end: 627 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("count"), span: Span { start: 663, end: 668 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Integer printString conversion"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 669, end: 671 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("10"), span: Span { start: 672, end: 674 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("summary"), span: Span { start: 675, end: 682 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 683, end: 685 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: StringStart("Total: "), span: Span { start: 686, end: 694 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("count"), span: Span { start: 695, end: 700 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: BinarySelector("*"), span: Span { start: 701, end: 702 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: Integer("2"), span: Span { start: 703, end: 704 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: StringEnd(""), span: Span { start: 705, end: 706 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("adjacent"), span: Span { start: 735, end: 743 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Adjacent interpolations"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 744, end: 746 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: StringStart(""), span: Span { start: 747, end: 748 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("firstName"), span: Span { start: 749, end: 758 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: StringSegment(""), span: Span { start: 759, end: 759 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("lastName"), span: Span { start: 760, end: 768 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: StringEnd(""), span: Span { start: 769, end: 770 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("bare"), span: Span { start: 816, end: 820 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Only interpolation (no literal segments)"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 821, end: 823 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: StringStart(""), span: Span { start: 824, end: 825 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("name"), span: Span { start: 826, end: 830 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: StringEnd(""), span: Span { start: 831, end: 832 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Identifier("plain"), span: Span { start: 884, end: 889 }, leading_trivia: [Whitespace("\n\n"), LineComment("// Plain string (no interpolation, zero overhead)"), Whitespace("\n")], trailing_trivia: [Whitespace(" ")] }
Token { kind: Assign, span: Span { start: 890, end: 892 }, leading_trivia: [], trailing_trivia: [Whitespace(" ")] }
Token { kind: String("Hello, World!"), span: Span { start: 893, end: 908 }, leading_trivia: [], trailing_trivia: [] }
Token { kind: Eof, span: Span { start: 909, end: 909 }, leading_trivia: [Whitespace("\n")], trailing_trivia: [] }
