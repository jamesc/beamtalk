// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// Test Dictionary class compilation as a value type (not gen_server).
// Dictionary is a sealed Object subclass backed by Erlang maps.
// new/0 should return #{} (empty map).

sealed Object subclass: Dictionary

  // Access
  size => @primitive "size"
  keys => @primitive "keys"
  values => @primitive "values"
  at: key => @primitive "at:"
  at: key ifAbsent: block => @primitive "at:ifAbsent:"
  at: key put: value => @primitive "at:put:"
  includesKey: key => @primitive "includesKey:"

  // Mutation (returns new dictionary)
  removeKey: key => @primitive "removeKey:"
  merge: other => @primitive "merge:"

  // Iteration
  keysAndValuesDo: block => @primitive "keysAndValuesDo:"

  // Reflection
  describe => "a Dictionary"
