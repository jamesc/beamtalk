// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// BT-478: Nested to:do: with field mutations


TestCase subclass: NestedToDoTest

  testSection1 =>
    nested := FieldMutationNested spawn.
    // Test nested to:do: â€” 3 outer Ã— 2 inner = 6 increments
    self assert: ((nested nestedIncrement: 3 inner: 2) await) equals: 6.
    // Verify state persists
    self assert: ((nested getValue) await) equals: 6
