// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// BT-488, ADR 0019 Phase 1: Tests that singleton classes (SystemDictionary,
// TranscriptStream, WorkspaceEnvironment) expose a current accessor that
// returns nil before initialization.

TestCase subclass: ClassVariablesSingletonTest

  testSingletonCurrentAccessors =>
    self assert: (SystemDictionary current) equals: nil.
    // TranscriptStream has current accessor
    self assert: (TranscriptStream current) equals: nil.
    // WorkspaceEnvironment has current accessor
    self assert: (WorkspaceEnvironment current) equals: nil

  testSetAndGetCurrent =>
    // Set a SystemDictionary instance as current and verify retrieval
    sd := SystemDictionary spawn.
    SystemDictionary current: sd.
    self assert: (SystemDictionary current) equals: sd.
    // Reset to nil to avoid affecting other tests
    SystemDictionary current: nil
