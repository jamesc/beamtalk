// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// BT-412: Class variable tests

// @load stdlib/test/fixtures/class_var_counter.bt

TestCase subclass: ClassVariablesTest

  testSection1 =>
    self assert: (ClassVarCounter getCount) equals: 0.
    // Create an instance via class method that increments counter
    ClassVarCounter create.
    // Class variable was incremented
    self assert: (ClassVarCounter getCount) equals: 1.
    // Create another instance
    ClassVarCounter create.
    // Class variable persists across calls
    self assert: (ClassVarCounter getCount) equals: 2.
    // Class method calling another class method (self-send routing)
    self assert: (ClassVarCounter createAndReport) equals: 3
