// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// BT-898: Fixture actors for actor-to-actor coordination tests.
// EventCollector receives events; EventBus forwards notifications to a collector.

Actor subclass: EventCollector
  state: events = #()

  receive: event =>
    self.events := self.events ++ #(event)

  events => self.events

  eventCount => self.events size


Actor subclass: EventBus
  state: collector = nil

  subscribe: aCollector =>
    self.collector := aCollector

  notify: event =>
    self.collector receive: event

  subscriberCount =>
    self.collector = nil
      ifTrue: [0]
      ifFalse: [1]
