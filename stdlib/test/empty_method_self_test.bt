// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// BT-631: Tests that an empty actor method body returns self (the actor reference)
// rather than nil, and that the returned reference is usable for further messages.


TestCase subclass: EmptyMethodSelfTest

  testEmptyMethodReturnsSelf =>
    a := EmptyMethodActor spawn.
    // Call empty method â€” should return self (the actor), not nil
    ref := a doNothing await.
    // Returned reference should be the same actor
    self assert: (ref =:= a).
    // Verify by reading state through the returned reference
    self assert: (ref getValue await) equals: 42
