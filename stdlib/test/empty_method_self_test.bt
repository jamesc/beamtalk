// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// BT-631/BT-859: Tests that an actor method explicitly returning self
// returns the actor reference and that reference is usable for further messages.


TestCase subclass: EmptyMethodSelfTest

  testDoNothingReturnsSelf =>
    a := EmptyMethodActor spawn.
    // Call method that explicitly returns self
    ref := a doNothing.
    // Returned reference should be the same actor
    self assert: (ref =:= a).
    // Verify by reading state through the returned reference
    self assert: (ref getValue) equals: 42
