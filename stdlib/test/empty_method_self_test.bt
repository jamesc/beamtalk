// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// Tests that empty method bodies return self instead of nil (BT-631)


TestCase subclass: EmptyMethodSelfTest

  testSection1 =>
    a := EmptyMethodActor spawn.
    // Call empty method â€” should return self (the actor), not nil
    ref := a doNothing await.
    // Returned reference should be the same actor
    self assert: (ref =:= a).
    // Verify by reading state through the returned reference
    self assert: (ref getValue await) equals: 42
