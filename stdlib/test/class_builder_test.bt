// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// ClassBuilder validation tests (ADR 0038)
//
// Tests ClassBuilder error cases: validation failures caught before class
// registration. Exercises the validate/2 logic in beamtalk_class_builder.erl

TestCase subclass: ClassBuilderTest
  state: cls = nil

  tearDown =>
    self.cls isNil ifFalse: [self.cls removeFromSystem]

  testSealedClassRejected =>
    self should: [Object classBuilder name: #CBBadSeal; superclass: Float; register] raise: #instantiation_error

  testMissingSuperclassRejected =>
    self should: [Object classBuilder register] raise: #missing_parameter
