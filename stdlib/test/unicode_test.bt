// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// BT-388: Tests that string operations are Unicode-aware (grapheme clusters) â€”
// equality with CJK and emoji, size in graphemes, at: indexing, reverse, and
// includesSubstring: for multi-byte characters

TestCase subclass: UnicodeTest

  testUnicodeStringOperations =>
    self assert: "ä¸–ç•Œ" equals: "ä¸–ç•Œ"
    // Emoji (4-byte UTF-8)
    self assert: "ğŸŒ" equals: "ğŸŒ"
    // Mixed ASCII and Unicode
    self assert: "Hello ä¸–ç•Œ ğŸŒ" equals: "Hello ä¸–ç•Œ ğŸŒ"
    // Japanese
    self assert: "ã“ã‚“ã«ã¡ã¯" equals: "ã“ã‚“ã«ã¡ã¯"
    // Korean
    self assert: "ì•ˆë…•í•˜ì„¸ìš”" equals: "ì•ˆë…•í•˜ì„¸ìš”"
    self assert: "ä¸–ç•Œ" size equals: 2
    self assert: "ğŸŒ" size equals: 1
    self assert: "Hello ä¸–ç•Œ ğŸŒ" size equals: 10
    self assert: "ä¸–ç•Œ" =:= "ä¸–ç•Œ"
    self deny: "ä¸–ç•Œ" =:= "hello"
    self assert: ("Hello ä¸–ç•Œ" at: 7) equals: "ä¸–"
    self assert: ("Hello ä¸–ç•Œ" at: 8) equals: "ç•Œ"
    self assert: "ä¸–ç•Œ" reverse equals: "ç•Œä¸–"
    self assert: ("Hello ä¸–ç•Œ" includesSubstring: "ä¸–")
    self deny: ("Hello ä¸–ç•Œ" includesSubstring: "ğŸŒ")
