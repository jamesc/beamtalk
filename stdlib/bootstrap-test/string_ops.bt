// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// String operations E2E tests (BT-361)

// at: - 1-based grapheme access
"hello" at: 1
// => h

"hello" at: 5
// => o

// capitalize
"hello" capitalize
// => Hello

"HELLO" capitalize
// => HELLO

// reverse
"hello" reverse
// => olleh

// includesSubstring:
"hello world" includesSubstring: "world"
// => true

"hello" includesSubstring: "xyz"
// => false

// startsWith:
"hello" startsWith: "hel"
// => true

"hello" startsWith: "xyz"
// => false

// endsWith:
"hello" endsWith: "llo"
// => true

"hello" endsWith: "xyz"
// => false

// indexOf:
"hello" indexOf: "ell"
// => 2

"hello" indexOf: "xyz"
// => nil

// splitOn:
"a,b,c" splitOn: ","
// => ["a","b","c"]

// repeat:
"ab" repeat: 3
// => ababab

// asList
"hi" asList
// => ["h","i"]

// do: returns nil
"hi" do: [:ch | nil]
// => nil

// BT-416: collect: - map over graphemes (returns list)
"hi" collect: [:ch | ch uppercase]
// => ["H","I"]

"abc" collect: [:ch | ch uppercase]
// => ["A","B","C"]

// BT-416: select: - filter graphemes (returns string)
"hello" select: [:ch | ch /= "l"]
// => heo

"abcd" select: [:ch | ch < "c"]
// => ab

// BT-416: collect:/select: on string variables (not just literals)
s := "hello"
// => hello

s collect: [:ch | ch uppercase]
// => ["H","E","L","L","O"]

s select: [:ch | ch > "h"]
// => llo
