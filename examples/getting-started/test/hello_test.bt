// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// BUnit tests for the Hello value type.
//
// Run in the REPL:
//   > :load src/hello.bt
//   > :load test/hello_test.bt
//   > HelloTest runAll

TestCase subclass: HelloTest

  setUp =>
    self.ts := TranscriptStream spawn
    TranscriptStream current: self.ts
    self

  tearDown =>
    TranscriptStream current ifNotNil: [:t | t stop]
    TranscriptStream resetCurrent
    self

  testGreeting =>
    // greeting outputs "Hello, World!" via traceCr: and returns self
    Hello new greeting
    self assert: (self.ts recent includes: "Hello, World!")

  testTwoInstancesHaveSameGreeting =>
    // Both instances output the same text
    Hello new greeting
    Hello new greeting
    self assert: (self.ts recent includes: "Hello, World!")

  testClassIsHello =>
    // Hello is a value type â€” class name is the symbol #Hello
    self assert: Hello new class name equals: #Hello
