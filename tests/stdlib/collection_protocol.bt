// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// Stdlib tests for Collection abstract superclass (BT-505)
// Tests shared protocol inherited by List, Set, Dictionary, and Tuple.

// ===========================================================================
// LIST — Shared Collection Protocol
// ===========================================================================

// List isEmpty
#() isEmpty
// => true

#(1, 2) isEmpty
// => false

// List isNotEmpty
#(1) isNotEmpty
// => true

#() isNotEmpty
// => false

// List includes:
#(1, 2, 3) includes: 2
// => true

#(1, 2, 3) includes: 9
// => false

// List collect:
#(1, 2, 3) collect: [:x | x * 2]
// => [2,4,6]

// List select:
#(1, 2, 3, 4) select: [:x | x > 2]
// => [3,4]

// List reject:
#(1, 2, 3, 4) reject: [:x | x > 2]
// => [1,2]

// List inject:into:
#(1, 2, 3) inject: 0 into: [:sum :x | sum + x]
// => 6

// List detect:
#(1, 2, 3) detect: [:x | x > 1]
// => 2

// List detect:ifNone:
#(1, 2) detect: [:x | x > 5] ifNone: [0]
// => 0

// List anySatisfy:
#(1, 2, 3) anySatisfy: [:x | x > 2]
// => true

#(1, 2, 3) anySatisfy: [:x | x > 5]
// => false

// List allSatisfy:
#(1, 2, 3) allSatisfy: [:x | x > 0]
// => true

#(1, 2, 3) allSatisfy: [:x | x > 1]
// => false

// ===========================================================================
// SET — Shared Collection Protocol (inherited from Collection)
// ===========================================================================

// Set isEmpty
Set new isEmpty
// => true

(Set new add: 1) isEmpty
// => false

// Set isNotEmpty
(Set new add: 1) isNotEmpty
// => true

Set new isNotEmpty
// => false

// Set includes:
(Set new add: 1) includes: 1
// => true

(Set new add: 1) includes: 2
// => false

// Set collect: (inherited from Collection)
((Set new add: 1) add: 2) collect: [:x | x * 10]
// => _

// Set select: (inherited from Collection)
(((Set new add: 1) add: 2) add: 3) select: [:x | x > 1]
// => _

// Set reject: (inherited from Collection)
(((Set new add: 1) add: 2) add: 3) reject: [:x | x > 2]
// => _

// Set inject:into: (inherited from Collection)
(((Set new add: 1) add: 2) add: 3) inject: 0 into: [:sum :x | sum + x]
// => 6

// Set detect: (inherited from Collection)
(((Set new add: 1) add: 2) add: 3) detect: [:x | x > 1]
// => _

// Set detect:ifNone: (inherited from Collection)
(Set new add: 1) detect: [:x | x > 5] ifNone: [0]
// => 0

// Set anySatisfy: (inherited from Collection)
(((Set new add: 1) add: 2) add: 3) anySatisfy: [:x | x > 2]
// => true

((Set new add: 1) add: 2) anySatisfy: [:x | x > 5]
// => false

// Set allSatisfy: (inherited from Collection)
(((Set new add: 1) add: 2) add: 3) allSatisfy: [:x | x > 0]
// => true

(((Set new add: 1) add: 2) add: 3) allSatisfy: [:x | x > 2]
// => false

// ===========================================================================
// DICTIONARY — Shared Collection Protocol (inherited from Collection)
// ===========================================================================

// Dictionary isEmpty (inherited from Collection via size)
#{} isEmpty
// => true

#{#a => 1} isEmpty
// => false

// Dictionary do: iterates over values
#{#a => 10, #b => 20} do: [:v | v + 1]
// => nil

// Dictionary includes: checks values
#{#a => 1, #b => 2} includes: 1
// => true

#{#a => 1, #b => 2} includes: 99
// => false

// Dictionary collect: (inherited from Collection via do:)
#{#a => 1, #b => 2} collect: [:v | v * 10]
// => _

// Dictionary select: (inherited from Collection via do:)
#{#a => 1, #b => 2, #c => 3} select: [:v | v > 1]
// => _

// Dictionary inject:into: (inherited from Collection via do:)
#{#a => 1, #b => 2, #c => 3} inject: 0 into: [:sum :v | sum + v]
// => 6

// Dictionary detect: (inherited from Collection via do:)
#{#a => 1, #b => 5, #c => 3} detect: [:v | v > 4]
// => 5

// Dictionary detect:ifNone:
#{#a => 1} detect: [:v | v > 10] ifNone: [0]
// => 0

// Dictionary anySatisfy: (inherited from Collection)
#{#a => 1, #b => 5} anySatisfy: [:v | v > 3]
// => true

#{#a => 1, #b => 2} anySatisfy: [:v | v > 5]
// => false

// Dictionary allSatisfy: (inherited from Collection)
#{#a => 2, #b => 4} allSatisfy: [:v | v isEven]
// => true

#{#a => 1, #b => 2} allSatisfy: [:v | v isEven]
// => false

// ===========================================================================
// TUPLE — Tuple has no literal syntax yet; Collection protocol is inherited
// but cannot be tested in pure Beamtalk (BT-417). Tuple do: and other methods
// are tested via Erlang runtime unit tests.
// ===========================================================================

// Tuple empty creation
Tuple new class
// => Tuple

// ===========================================================================
// CLASS HIERARCHY VERIFICATION
// ===========================================================================

// Verify superclass chain
#(1, 2, 3) class
// => List

Set new class
// => Set

#{} class
// => Dictionary
