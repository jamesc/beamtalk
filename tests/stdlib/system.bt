// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// System class tests â€” environment variables, platform, process info.

// --- getEnv: ---

// Reading a well-known env var returns a String
(System getEnv: "PATH") class =:= String
// => true

// Reading a non-existent env var returns nil
System getEnv: "BEAMTALK_TEST_NONEXISTENT_VAR_XYZ"
// => nil

// --- getEnv:default: ---

// Non-existent var returns the default
System getEnv: "BEAMTALK_TEST_NONEXISTENT_VAR_XYZ" default: "fallback"
// => fallback

// Existing var returns the actual value (not the default)
(System getEnv: "PATH" default: "nope") =:= "nope"
// => false

// --- osPlatform ---

// osPlatform returns a string
System osPlatform class =:= String
// => true

// Platform is one of the known values
#("linux", "darwin", "win32") includes: System osPlatform
// => true

// --- osFamily ---

// osFamily returns a string
System osFamily class =:= String
// => true

// Family is one of the known values
#("unix", "win32") includes: System osFamily
// => true

// --- architecture ---

// architecture returns a non-empty string
System architecture class =:= String
// => true

System architecture length > 0
// => true

// --- hostname ---

// hostname returns a non-empty string
System hostname class =:= String
// => true

System hostname length > 0
// => true

// --- erlangVersion ---

// erlangVersion returns a non-empty string
System erlangVersion class =:= String
// => true

System erlangVersion length > 0
// => true

// --- pid ---

// pid returns a positive integer
System pid class =:= Integer
// => true

System pid > 0
// => true

// --- error cases ---

// getEnv: requires String argument
System getEnv: 42
// => ERROR: type_error

// getEnv:default: validates both arguments
System getEnv: 42 default: "fallback"
// => ERROR: type_error

System getEnv: "PATH" default: 42
// => ERROR: type_error
