// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// Tests that empty method bodies return self instead of nil (BT-631)
//
// When a method is declared with `=>` and no body expressions,
// the generated code should return self (the actor reference).

// @load tests/e2e/fixtures/empty_method_actor.bt

// Spawn actor
a := EmptyMethodActor spawn
// => #Actor<EmptyMethodActor,_>

// Call empty method — should return self (the actor), not nil
ref := a doNothing await
// => #Actor<EmptyMethodActor,_>

// Returned reference should be the same actor — verify by reading state
ref getValue await
// => 42
