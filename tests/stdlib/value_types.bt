// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// E2E tests for value types (Object subclasses)
// Value types are plain Erlang terms with no process
// They are created with 'new', not 'spawn'

// @load tests/e2e/fixtures/point.bt

// ===========================================================================
// VALUE TYPE INSTANTIATION
// ===========================================================================

// Create a Point with default values
Point new
// => a Point

// TODO(BT-213): Enable once keyword message with map literal works
// Create a Point with explicit values
// Point new: #{x => 3, y => 4}
// // => #{$beamtalk_class => Point, x => 3, y => 4}

// ===========================================================================
// ACCESSING FIELDS
// ===========================================================================

// Access fields via instance methods (BT-354)
p := Point new
// => a Point

p getX
// => 0

p getY
// => 0

// ===========================================================================
// METHOD CALLS
// ===========================================================================

// Inherited Object base methods work on value types (BT-354)
p class
// => Point

// ===========================================================================
// IMMUTABILITY
// ===========================================================================

// Value types are immutable - methods return new instances
// @load tests/e2e/fixtures/point.bt
// p1 := Point new: #{x => 1, y => 2}
// p2 := p1  // p2 references same map
// p1 == p2
// // => true

// ===========================================================================
// COPYING SEMANTICS
// ===========================================================================

// Value types are copied when sent between processes
// (This is default BEAM behavior for non-process terms)

// ===========================================================================
// ACTOR INSTANTIATION ERRORS
// ===========================================================================

// Actors MUST use 'spawn', not 'new'
// @load tests/e2e/fixtures/counter.bt
// Counter new
// // => Error: Actors must use spawn, not new
