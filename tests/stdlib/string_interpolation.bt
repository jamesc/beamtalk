// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// Stdlib tests for string interpolation (ADR 0023 Phase 3, BT-558)

// ===========================================================================
// BASIC STRING TESTS (no interpolation, zero overhead)
// ===========================================================================

// Plain string (no interpolation) compiles identically to before
"Hello"
// => Hello

// ===========================================================================
// VARIABLE INTERPOLATION
// ===========================================================================

// Simple variable interpolation
name := "World"
// => World

"Hello, {name}!"
// => Hello, World!

// Variable at start
"{name} says hi"
// => World says hi

// Variable at end
"Hi {name}"
// => Hi World

// Only variable (no literal segments)
"{name}"
// => World

// ===========================================================================
// EXPRESSION INTERPOLATION
// ===========================================================================

// Arithmetic expression
"Sum: {2 + 3}"
// => Sum: 5

// ===========================================================================
// printString CONVERSION
// ===========================================================================

// Integer printString
"Age: {30}"
// => Age: 30

// Boolean interpolation
"Flag: {true}"
// => Flag: true

"Flag: {false}"
// => Flag: false

// Nil interpolation
"Value: {nil}"
// => Value: nil

// Symbol interpolation
"Symbol: {#hello}"
// => Symbol: #hello

// ===========================================================================
// NESTED MESSAGE SENDS
// ===========================================================================

// String message in interpolation
"Length: {"hello" length}"
// => Length: 5

// ===========================================================================
// MULTIPLE INTERPOLATIONS
// ===========================================================================

// Two variables
first := "Alice"
// => Alice

last := "Bob"
// => Bob

"Name: {first} {last}"
// => Name: Alice Bob

// Mixed literals and expressions
"a{1}b{2}c"
// => a1b2c

// Adjacent interpolations
"{first}{last}"
// => AliceBob

// ===========================================================================
// ESCAPED BRACES
// ===========================================================================

// Escaped braces produce literal braces (backslash preserved in output)
"Literal: \{not interpolated\}"
// => Literal: \{not interpolated\}

// ===========================================================================
// EMPTY AND EDGE CASES
// ===========================================================================

// Empty string
""
// => 

// String with only literals
"no interpolation here"
// => no interpolation here

// ===========================================================================
// UNICODE CONTENT
// ===========================================================================

// Unicode in literal segments
"Hello ðŸŽ‰"
// => Hello ðŸŽ‰

// Unicode variable
emoji := "ðŸš€"
// => ðŸš€

"Launch: {emoji}"
// => Launch: ðŸš€

// CJK characters
"æ—¥æœ¬èªž: {42}"
// => æ—¥æœ¬èªž: 42

// ===========================================================================
// ACTOR INTERPOLATION (auto-await)
// ===========================================================================

// @load tests/e2e/fixtures/counter.bt

// Actor printString auto-awaits the future
c := Counter spawn
// => #Actor<Counter,_>

"Actor: {c}"
// => Actor: a Counter
