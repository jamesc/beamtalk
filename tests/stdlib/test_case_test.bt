// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// Stdlib tests for TestCase assertions (ADR 0014 Phase 2)
// TestCase provides the foundation for BUnit testing framework

// Test setUp/tearDown exist (no-op by default)
testCase := TestCase new
// => {"$beamtalk_class":"TestCase"}

testCase setUp
// => nil

testCase tearDown
// => nil

// Test assert: with true condition
TestCase new assert: true
// => nil

// Test assert:equals: with matching values
TestCase new assert: 3 equals: 3
// => nil

TestCase new assert: 'hello' equals: 'hello'
// => nil

TestCase new assert: true equals: true
// => nil

TestCase new assert: false equals: false
// => nil

// Test assert:equals: with integers
TestCase new assert: 42 equals: 42
// => nil

TestCase new assert: 0 equals: 0
// => nil

// Test assert:equals: with negative numbers
TestCase new assert: -5 equals: -5
// => nil

// Test deny: with false condition
TestCase new deny: false
// => nil

// Test that TestCase is a proper Object subclass
TestCase superclass
// => Object

testInstance := TestCase new
// => {"$beamtalk_class":"TestCase"}

testInstance class
// => TestCase

// Test that multiple instances can be created
tc2 := TestCase new
// => {"$beamtalk_class":"TestCase"}

tc2 class
// => TestCase

// Test lifecycle methods can be called on different instances
tc3 := TestCase new
// => {"$beamtalk_class":"TestCase"}

tc3 setUp
// => nil

tc3 tearDown
// => nil

// ===========================================================================
// ASSERTION FAILURE TESTS
// ===========================================================================

// Test assert: with false condition — should raise assertion_failed
TestCase new assert: false
// => ERROR: assertion_failed

// Test assert:equals: with unequal values
TestCase new assert: 3 equals: 4
// => ERROR: assertion_failed

// Test assert:equals: with different types
TestCase new assert: 'hello' equals: 42
// => ERROR: assertion_failed

// Test deny: with true condition — should raise assertion_failed
TestCase new deny: true
// => ERROR: assertion_failed

// Test fail: unconditional failure
TestCase new fail: 'this test should fail'
// => ERROR: assertion_failed

// ===========================================================================
// should:raise: TESTS
// ===========================================================================

// Test should:raise: with matching error kind
TestCase new should: [1 / 0] raise: #badarith
// => nil

// Test should:raise: with does_not_understand error
TestCase new should: [42 nonExistentMethod] raise: #does_not_understand
// => nil

// Test should:raise: block completes normally (no error raised)
TestCase new should: [42] raise: #does_not_understand
// => ERROR: assertion_failed

// Test should:raise: with wrong error kind (mismatch)
TestCase new should: [1 / 0] raise: #does_not_understand
// => ERROR: assertion_failed

