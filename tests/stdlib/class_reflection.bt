// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// Stdlib tests for class methods reflection (BT-510 / ADR 0032 Phase 2)
//
// ADR 0032 Phase 2: `methods` returns the full inheritance chain.
// `localMethods` returns only selectors defined directly in the class.

// @load tests/e2e/fixtures/counter.bt

// ---------------------------------------------------------------------------
// Counter localMethods — local-only selectors
// ---------------------------------------------------------------------------

counterLocal := Counter localMethods
// => _

counterLocal isEmpty
// => false

// Counter defines increment, decrement, getValue locally
counterLocal includes: #increment
// => true

counterLocal includes: #decrement
// => true

counterLocal includes: #getValue
// => true

// Inherited methods are NOT in localMethods
counterLocal includes: #isNil
// => false

counterLocal includes: #respondsTo:
// => false

// ---------------------------------------------------------------------------
// Counter methods — full inheritance chain (Phase 2)
// ---------------------------------------------------------------------------

counterMethods := Counter methods
// => _

counterMethods isEmpty
// => false

// Local methods are present
counterMethods includes: #increment
// => true

counterMethods includes: #getValue
// => true

// Inherited methods ARE in methods (full chain)
counterMethods includes: #isNil
// => true

counterMethods includes: #respondsTo:
// => true

// ---------------------------------------------------------------------------
// Primitive class methods still work
// ---------------------------------------------------------------------------

intMethods := Integer methods
// => _

intMethods isEmpty
// => false

// isNil is inherited from Object/ProtoObject — included in full chain
intMethods includes: #isNil
// => true
