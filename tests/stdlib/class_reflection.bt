// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// Stdlib tests for class methods reflection (BT-510 / ADR 0032 Phase 1)
//
// ADR 0032 Phase 1: `methods` returns local-only selectors.
// Phase 2 will add `Behaviour methods` for the full hierarchy walk.
//
// Inherited methods are found via `respondsTo:` (chain walk), not `methods`.

// @load tests/e2e/fixtures/counter.bt

// ---------------------------------------------------------------------------
// Counter local methods (local-only per ADR 0032 Phase 1)
// ---------------------------------------------------------------------------

counterMethods := Counter methods
// => _

counterMethods isEmpty
// => false

// Counter defines increment, decrement, getValue locally
counterMethods includes: #increment
// => true

counterMethods includes: #decrement
// => true

counterMethods includes: #getValue
// => true

// ---------------------------------------------------------------------------
// Inherited methods are NOT in `methods` (local-only in Phase 1)
// They are accessible via respondsTo: (chain walk at dispatch time)
// ---------------------------------------------------------------------------

counterMethods includes: #isNil
// => false

counterMethods includes: #printString
// => false

counterMethods includes: #respondsTo:
// => false

counterMethods includes: #yourself
// => false

// ---------------------------------------------------------------------------
// Primitive class methods still work
// ---------------------------------------------------------------------------

intMethods := Integer methods
// => _

intMethods isEmpty
// => false

// Integer local methods do not include inherited Object methods in Phase 1
intMethods includes: #isNil
// => false
