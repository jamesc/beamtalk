// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// Chat member fixture for E2E tests (BT-431, BT-568)
// Represents a chat participant with name, inbox, and room reference

Actor subclass: ChatMember
  state: name = "Guest"
  state: inbox = #()
  state: room = nil

  // Set the member's display name
  setName: newName =>
    self.name := newName
  
  // Set the chat room reference
  setRoom: newRoom =>
    self.room := newRoom

  // Receive a message (called by ChatRoom)
  receiveMessage: msg =>
    self.inbox := self.inbox ++ #(msg)

  // Send a message via the room, using own name as sender
  say: message =>
    self.room say: message from: self.name

  // Return received messages
  getInbox =>
    ^self.inbox
  
  // Return member's name
  getName =>
    ^self.name
