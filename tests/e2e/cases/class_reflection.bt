// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// E2E tests for Class reflection in the REPL context
//
// This file covers REPL-specific behavior only.
// Class reflection semantics are tested exhaustively in
// stdlib/test/class_reflection_test.bt (BUnit).
//
// BT-374: Beamtalk is a workspace binding (actor) dispatched via
// persistent_term. Sends return the value directly (sync-by-default).

// @load tests/e2e/fixtures/counter.bt

// ===========================================================================
// classNamed: LOOKUP (REPL-specific: dispatch via workspace binding)
// ===========================================================================

// Lookup of existing class
stringClass := (Beamtalk classNamed: #String)
// => String

// Workspace variable persists â€” name is accessible in next turn
stringClass name
// => String

// Async lookup of a loaded actor class
counterClass := (Beamtalk classNamed: #Counter)
// => Counter

counterClass name
// => Counter

// ===========================================================================
// NIL RETURN FOR UNKNOWN CLASS
// ===========================================================================

// Look up a non-existent class â€” returns nil
(Beamtalk classNamed: #NonExistentClass)
// => nil

// ===========================================================================
// WORKSPACE VARIABLE PERSISTENCE ACROSS TURNS
// ===========================================================================

// Class object stored in workspace variable is accessible in later turns
intClass := (Beamtalk classNamed: #Integer)
// => Integer

intClass name
// => Integer
