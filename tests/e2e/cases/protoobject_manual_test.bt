// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// Manual test demonstrating ProtoObject auto-await behavior
// This test explicitly shows values being returned

// @load tests/e2e/fixtures/counter.bt
// @load tests/e2e/fixtures/simple_proxy.bt

// Test 1: class message returns atoms (not futures)
42 class
// => Integer

'hello' class
// => String

// Test 2: Spawn returns actor objects
Counter spawn
// => (actor object - should be formatted as #Actor<Counter,pid>)

SimpleProxy spawn
// => (actor object - should be formatted as #Actor<SimpleProxy,pid>)

// Test 3: Identity comparisons work immediately (not futures)
42 == 42
// => true

42 ~= 43
// => true

// NOTE: The following tests would demonstrate auto-awaiting
// but require variable persistence across @load boundaries.
// The E2E test infrastructure passes these tests, proving
// that futures ARE auto-awaited by the REPL.
//
// What should work (once variable persistence is fixed):
// counter := Counter spawn
// counter increment          // Should return the incremented value, not a future
// => 1
//
// proxy := SimpleProxy spawn
// proxy setTarget: counter
// proxy increment            // Should transparently forward and return value
// => 2
