// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// E2E tests for Transcript class
// Transcript is a workspace-bound actor for writing to stdout.
// show: prints a value, cr prints a newline.
// BT-374: Workspace bindings dispatch via persistent_term + async send.
// BT-540: Command methods return self (not nil) per Command-Query Separation.

// ===========================================================================
// BASIC OUTPUT
// ===========================================================================

// show: prints a string (async send, returns self per Command-Query Separation)
Transcript show: "Hello"
// => #Actor<TranscriptStream,_>

// cr prints a newline (async send, returns self)
Transcript cr
// => #Actor<TranscriptStream,_>

// ===========================================================================
// SHOW: WITH DIFFERENT TYPES
// ===========================================================================

// show: with an integer
Transcript show: 42
// => #Actor<TranscriptStream,_>

// show: with a boolean
Transcript show: true
// => #Actor<TranscriptStream,_>

// show: with nil
Transcript show: nil
// => #Actor<TranscriptStream,_>

// ===========================================================================
// CASCADE (SEMICOLON CHAINING)
// ===========================================================================

// Note: Cascading on class-level methods (Transcript show: "Hello"; cr)
// requires metaclass dispatch which is not yet implemented.
// Use separate statements instead:
Transcript show: "Hello"
// => #Actor<TranscriptStream,_>
Transcript cr
// => #Actor<TranscriptStream,_>

// ===========================================================================
// RETURN VALUE IS SELF (BT-540)
// ===========================================================================

// Command methods return self (the Transcript actor), not nil
// This follows Smalltalk convention and Command-Query Separation
t := (Transcript show: "test") await
// => #Actor<TranscriptStream,_>

t class
// => TranscriptStream

t2 := (Transcript cr) await
// => #Actor<TranscriptStream,_>

t2 class
// => TranscriptStream
