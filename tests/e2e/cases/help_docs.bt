// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// E2E tests for :help command (BT-500)
//
// These tests require E2E because :help is a REPL command processed by the
// REPL session handler before any Beamtalk expression is evaluated.
// BUnit tests execute compiled Beamtalk code and cannot invoke REPL commands.
//
// Tests documentation lookup for classes and methods.

// :help with a known class — should show class header with superclass
:help Integer
// => == Integer < Number ==_

// :help with a known method — should show method signature and doc
:help Integer +
// => == Integer >> + ==_

// :help with an inherited method — should show inheritance info
:help Integer isPositive
// => == Integer >> isPositive ==_(inherited from Number)_

// :help with an unknown class — should show helpful error
:help FakeClassName
// => ERROR: Unknown class: FakeClassName

// :help with an unknown method — should show helpful error
:help Integer nonExistentMethod
// => ERROR: Integer does not understand nonExistentMethod

// :help Metaclass — should show metaclass documentation (BT-618)
:help Metaclass
// => == Metaclass ==_

// :help Metaclass with a known class-side method (BT-618)
:help Metaclass spawn
// => == Metaclass >> spawn ==_

// :help Metaclass with unknown method — should show error (BT-618)
:help Metaclass nonExistentMethod
// => ERROR: Metaclass does not understand nonExistentMethod

// BT-990: Class-side method signatures in :help
// @load tests/e2e/fixtures/class_method_help_fixture.bt
// @load tests/e2e/fixtures/class_method_help_sub_fixture.bt

// :help with a user-defined class method should show typed signature
:help HelpTestWidget create:
// => == HelpTestWidget >> create: ==_create: name: String -> HelpTestWidget_

// :help with an inherited class method should show signature and inheritance
:help HelpTestSubWidget create:
// => == HelpTestSubWidget >> create: ==_(inherited from HelpTestWidget)_create: name: String -> HelpTestWidget_
