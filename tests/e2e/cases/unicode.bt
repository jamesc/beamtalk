// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// E2E tests for Unicode string handling through TCP transport (BT-388)
// Verifies that multi-byte UTF-8 characters survive the REPL protocol

// ===========================================================================
// STRING LITERALS WITH UNICODE
// ===========================================================================

// Basic ASCII (sanity check)
"Hello"
// => Hello

// Chinese characters (3-byte UTF-8)
"ä¸–ç•Œ"
// => ä¸–ç•Œ

// Emoji (4-byte UTF-8)
"ðŸŒ"
// => ðŸŒ

// Mixed ASCII and Unicode
"Hello ä¸–ç•Œ ðŸŒ"
// => Hello ä¸–ç•Œ ðŸŒ

// Japanese
"ã“ã‚“ã«ã¡ã¯"
// => ã“ã‚“ã«ã¡ã¯

// Korean
"ì•ˆë…•í•˜ì„¸ìš”"
// => ì•ˆë…•í•˜ì„¸ìš”

// ===========================================================================
// UNICODE VIA FILE I/O
// ===========================================================================

// Read Unicode content from file
File readAll: "tests/stdlib/fixtures/unicode_test.txt"
// => Hello ä¸–ç•Œ ðŸŒ

// ===========================================================================
// UNICODE STRING OPERATIONS
// ===========================================================================

// String size counts graphemes, not bytes
"Hello ä¸–ç•Œ ðŸŒ" size
// => 10

// String comparison with Unicode
"ä¸–ç•Œ" =:= "ä¸–ç•Œ"
// => true

// Large Unicode string that exceeds the default TCP {packet,line} buffer (1460 bytes).
// This tests the recv_line accumulation path (BT-388).
// The expression + JSON overhead must exceed 1460 bytes when UTF-8 encoded.
// 150 Ã— 3-char "ä¸–ç•ŒðŸŒ" (10 UTF-8 bytes each) = 1500 bytes of content, plus JSON framing > 1460.
"ä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒä¸–ç•ŒðŸŒ" size
// => 450

