// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// E2E tests for collection/Array methods (BT-44)

// ===========================================================================
// TIER 1: ESSENTIAL METHODS
// ===========================================================================

// --- last ---
#(1, 2, 3) last
// => 3

#(42) last
// => 42

// --- at: ---
#(10, 20, 30) at: 1
// => 10

#(10, 20, 30) at: 3
// => 30

// --- includes: ---
#(1, 2, 3) includes: 2
// => true

#(1, 2, 3) includes: 5
// => false

#() includes: 1
// => false

// --- sort ---
#(3, 1, 2) sort
// => [1,2,3]

#() sort
// => []

// --- reversed ---
#(1, 2, 3) reversed
// => [3,2,1]

#() reversed
// => []

// --- detect: ---
#(1, 2, 3, 4) detect: [:x | x > 2]
// => 3

// --- detect:ifNone: ---
#(1, 2, 3) detect: [:x | x > 10] ifNone: [0]
// => 0

#(1, 2, 3) detect: [:x | x > 1] ifNone: [0]
// => 2

// ===========================================================================
// TIER 2: FUNCTIONAL METHODS
// ===========================================================================

// --- take: ---
#(1, 2, 3, 4, 5) take: 3
// => [1,2,3]

#(1, 2) take: 5
// => [1,2]

// --- drop: ---
#(1, 2, 3, 4, 5) drop: 2
// => [3,4,5]

#(1, 2) drop: 5
// => []

// --- flatten ---
#(#(1, 2), #(3, 4)) flatten
// => [1,2,3,4]

// --- flatMap: ---
#(1, 2, 3) flatMap: [:x | #(x, (x * 10))]
// => [1,10,2,20,3,30]

// --- count: ---
#(1, 2, 3, 4, 5) count: [:x | x > 2]
// => 3

// --- anySatisfy: ---
#(1, 2, 3) anySatisfy: [:x | x > 2]
// => true

#(1, 2, 3) anySatisfy: [:x | x > 5]
// => false

// --- allSatisfy: ---
#(1, 2, 3) allSatisfy: [:x | x > 0]
// => true

#(1, 2, 3) allSatisfy: [:x | x > 1]
// => false

// ===========================================================================
// TIER 3: ADVANCED METHODS
// ===========================================================================

// --- unique ---
#(3, 1, 2, 1, 3) unique
// => [1,2,3]

// --- takeWhile: ---
#(1, 2, 3, 4, 5) takeWhile: [:x | x < 4]
// => [1,2,3]

// --- dropWhile: ---
#(1, 2, 3, 4, 5) dropWhile: [:x | x < 3]
// => [3,4,5]

// --- intersperse: ---
#(1, 2, 3) intersperse: 0
// => [1,0,2,0,3]

#() intersperse: 0
// => []

// --- add: ---
#(1, 2, 3) add: 4
// => [1,2,3,4]

#() add: 1
// => [1]

// ===========================================================================
// ITERATION (existing methods, now tested in E2E)
// ===========================================================================

// --- collect: ---
#(1, 2, 3) collect: [:x | x * 2]
// => [2,4,6]

// --- select: ---
#(1, 2, 3, 4) select: [:x | (x % 2) = 0]
// => [2,4]

// --- reject: (BT-408: known issue with reject: on lists in REPL)
// #(1, 2, 3, 4) reject: [:x | x isEven]
// => [1,3]

// --- inject:into: ---
#(1, 2, 3, 4) inject: 0 into: [:sum :x | sum + x]
// => 10
