// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// E2E test for do: with field mutations (BT-98)
//
// Uses tuple syntax {1, 2, 3} since array literal [1, 2, 3] conflicts with
// block syntax. See investigation-field-mutations-e2e.md for details.

// @load tests/e2e/fixtures/field_mutation_counter.bt

counter := FieldMutationCounter spawn

// Sum {1, 2, 3} using do: with field mutations
// Tuples work as arrays in Beamtalk (they're iterable)
counter sumArray: {1, 2, 3} asList

// REPL auto-awaits futures
// => 6
