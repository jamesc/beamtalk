// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// E2E tests for actor lifecycle (BT-172, BT-397)
//
// Tests that:
// - isAlive returns true for running actors
// - isAlive still works after message processing
// - stop gracefully shuts down the actor
// - isAlive returns false after stop
// - sending to a stopped actor returns actor_dead error

// @load tests/e2e/fixtures/counter.bt

// Spawn a counter actor
counter := Counter spawn
// => _

// isAlive returns true for a running actor
counter isAlive
// => true

// Actor still works after isAlive check
counter increment
// => 1

// isAlive still true after message processing
counter isAlive
// => true

// Stop the actor gracefully
counter stop
// => ok

// isAlive returns false after stop
counter isAlive
// => false

// Sending a message to a stopped actor returns actor_dead error
counter increment
// => ERROR: actor process has terminated
