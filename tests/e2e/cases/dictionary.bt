// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// E2E tests for Dictionary (Erlang map) methods (BT-418)

// ===========================================================================
// CLASS
// ===========================================================================

#{#a => 1} class
// => Dictionary

#{} class
// => Dictionary

// ===========================================================================
// SIZE
// ===========================================================================

#{#a => 1, #b => 2, #c => 3} size
// => 3

#{} size
// => 0

// ===========================================================================
// KEYS & VALUES
// ===========================================================================

#{#x => 10} keys
// => _

#{#x => 10} values
// => _

// ===========================================================================
// AT: (lookup)
// ===========================================================================

#{#name => 'Alice', #age => 30} at: #name
// => Alice

#{#x => 42} at: #x
// => 42

// ===========================================================================
// AT:PUT: (insert/update, returns new dictionary)
// ===========================================================================

d := #{#x => 1}
// => _

d at: #y put: 2
// => _

(#{#a => 1} at: #b put: 2) size
// => 2

(#{#a => 1} at: #a put: 99) at: #a
// => 99

// ===========================================================================
// AT:IFABSENT: (lookup with default)
// ===========================================================================

#{#a => 1} at: #a ifAbsent: [42]
// => 1

#{#a => 1} at: #b ifAbsent: [42]
// => 42

// ===========================================================================
// INCLUDESKEY:
// ===========================================================================

#{#a => 1, #b => 2} includesKey: #a
// => true

#{#a => 1, #b => 2} includesKey: #c
// => false

#{} includesKey: #x
// => false

// ===========================================================================
// REMOVEKEY:
// ===========================================================================

(#{#a => 1, #b => 2} removeKey: #a) size
// => 1

(#{#a => 1, #b => 2} removeKey: #a) includesKey: #a
// => false

// ===========================================================================
// MERGE:
// ===========================================================================

d1 := #{#a => 1, #b => 2}
// => _

d2 := #{#b => 20, #c => 3}
// => _

d1 merge: d2
// => _

(#{#a => 1} merge: #{#a => 99}) at: #a
// => 99

// ===========================================================================
// KEYSANDVALUESDO:
// ===========================================================================

#{#a => 1} keysAndValuesDo: [:k :v | nil]
// => nil
