// Copyright 2026 James Casey
// SPDX-License-Identifier: Apache-2.0

// E2E tests for keyword message sends
// Keyword messages have one or more keywords (identifiers ending in :)

// ===========================================================================
// SINGLE KEYWORD MESSAGES
// ===========================================================================

// Block value: with one argument
[:x | x] value: 42
// => 42

// Block with computation
[:x | x + 10] value: 5
// => 15

// Block with multiplication
[:n | n * n] value: 4
// => 16

// ===========================================================================
// MULTI-KEYWORD MESSAGES
// ===========================================================================

// Block value:value: with two arguments
[:x :y | x + y] value: 3 value: 4
// => 7

// Two-arg block with subtraction
[:a :b | a - b] value: 10 value: 3
// => 7

// Two-arg block with multiplication
[:x :y | x * y] value: 6 value: 7
// => 42

// ===========================================================================
// THREE-KEYWORD MESSAGES
// ===========================================================================

// Block with three arguments
[:a :b :c | a + b + c] value: 1 value: 2 value: 3
// => 6

// Three-arg block with mixed operations
[:x :y :z | x * y + z] value: 2 value: 3 value: 4
// => 10

// ===========================================================================
// NESTED KEYWORD MESSAGES
// ===========================================================================

// Keyword message as argument to another keyword message
[:x | [:y | x + y] value: 10] value: 5
// => 15

// Multiple nested blocks
[:a | [:b | [:c | a + b + c] value: 3] value: 2] value: 1
// => 6

// ===========================================================================
// KEYWORD MESSAGES WITH LITERALS
// ===========================================================================

// String as keyword argument
[:s | s] value: 'test'
// => test

// Zero as argument
[:n | n * 10] value: 0
// => 0

// Negative number as argument
[:x | 0 - x] value: 5
// => -5

// ===========================================================================
// COMPLEX EXPRESSIONS AS ARGUMENTS
// ===========================================================================

// Arithmetic expression as argument
[:x | x * 2] value: 3 + 2
// => 10

// Nested arithmetic in arguments
[:a :b | a + b] value: 2 * 3 value: 4 + 1
// => 11

// ===========================================================================
// HIGHER-ORDER BLOCKS
// ===========================================================================

// Block that returns a block
makeMultiplier := [:factor | [:n | n * factor]]
// => a Block/1

times3 := makeMultiplier value: 3
// => a Block/1

times3 value: 7
// => 21

// Passing block as argument
applyBlock := [:block :arg | block value: arg]
// => a Block/2

applyBlock value: [:x | x + 100] value: 42
// => 142
